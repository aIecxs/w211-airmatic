this.Two=function(a){function m(){var c=document.body.getBoundingClientRect(),d=this.width=c.width,c=this.height=c.height;this.renderer.setSize(d,c,this.ratio);this.trigger(n.Events.resize,d,c)}function l(){I(l);for(var c=0;c<n.Instances.length;c++){var d=n.Instances[c];d.playing&&d.update()}}var k=this,f={_indexAmount:0,natural:{slice:Array.prototype.slice,indexOf:Array.prototype.indexOf,keys:Object.keys,bind:Function.prototype.bind,create:Object.create},identity:function(c){return c},isArguments:function(c){return"[object Arguments]"===
toString.call(c)},isFunction:function(c){return"[object Function]"===toString.call(c)},isString:function(c){return"[object String]"===toString.call(c)},isNumber:function(c){return"[object Number]"===toString.call(c)},isDate:function(c){return"[object Date]"===toString.call(c)},isRegExp:function(c){return"[object RegExp]"===toString.call(c)},isError:function(c){return"[object Error]"===toString.call(c)},isFinite:function(c){return isFinite(c)&&!isNaN(parseFloat(c))},isNaN:function(c){return f.isNumber(c)&&
c!==+c},isBoolean:function(c){return!0===c||!1===c||"[object Boolean]"===toString.call(c)},isNull:function(c){return null===c},isUndefined:function(c){return void 0===c},isEmpty:function(c){return null==c?!0:q&&(f.isArray(c)||f.isString(c)||f.isArguments(c))?0===c.length:0===f.keys(c).length},isElement:function(c){return!(!c||1!==c.nodeType)},isArray:Array.isArray||function(c){return"[object Array]"===toString.call(c)},isObject:function(c){var d=typeof c;return"function"===d||"object"===d&&!!c},toArray:function(c){return c?
f.isArray(c)?v.call(c):q(c)?f.map(c,f.identity):f.values(c):[]},range:function(c,d,a){null==d&&(d=c||0,c=0);a=a||1;d=Math.max(Math.ceil((d-c)/a),0);for(var e=Array(d),g=0;g<d;g++,c+=a)e[g]=c;return e},indexOf:function(c,d){if(f.natural.indexOf)return f.natural.indexOf.call(c,d);for(var a=0;a<c.length;a++)if(c[a]===d)return a;return-1},has:function(c,d){return null!=c&&hasOwnProperty.call(c,d)},bind:function(c,d){var a=f.natural.bind;if(a&&c.bind===a)return a.apply(c,v.call(arguments,1));var e=v.call(arguments,
2);return function(){c.apply(d,e)}},extend:function(c){for(var d=v.call(arguments,1),a=0;a<d.length;a++){var e=d[a],g;for(g in e)c[g]=e[g]}return c},defaults:function(c){for(var d=v.call(arguments,1),a=0;a<d.length;a++){var e=d[a],g;for(g in e)void 0===c[g]&&(c[g]=e[g])}return c},keys:function(c){if(!f.isObject(c))return[];if(f.natural.keys)return f.natural.keys(c);var d=[],a;for(a in c)f.has(c,a)&&d.push(a);return d},values:function(c){for(var d=f.keys(c),a=[],e=0;e<d.length;e++)a.push(c[d[e]]);
return a},each:function(c,d,a){a=a||this;for(var e=!q(c)&&f.keys(c),g=(e||c).length,r=0;r<g;r++){var p=e?e[r]:r;d.call(a,c[p],p,c)}return c},map:function(c,d,a){a=a||this;for(var e=!q(c)&&f.keys(c),g=(e||c).length,r=[],p=0;p<g;p++){var u=e?e[p]:p;r[p]=d.call(a,c[u],u,c)}return r},once:function(c){var d=!1;return function(){if(d)return c;d=!0;return c.apply(this,arguments)}},after:function(c,d){return function(){for(;1>--c;)return d.apply(this,arguments)}},uniqueId:function(c){var d=++f._indexAmount+
"";return c?c+d:d}},h=Math.sin,g=Math.cos,d=Math.atan2,e=Math.sqrt,p=Math.PI,c=p/2,r=Math.pow,u=Math.min,C=Math.max,x=0,v=f.natural.slice,w=k.performance&&k.performance.now?k.performance:Date,t=Math.pow(2,53)-1,q=function(c){c=null==c?void 0:c.length;return"number"==typeof c&&0<=c&&c<=t},s={temp:k.document?k.document.createElement("div"):{},hasEventListeners:f.isFunction(k.addEventListener),bind:function(c,d,a,e){this.hasEventListeners?c.addEventListener(d,a,!!e):c.attachEvent("on"+d,a);return s},
unbind:function(c,d,a,e){s.hasEventListeners?c.removeEventListeners(d,a,!!e):c.detachEvent("on"+d,a);return s},getRequestAnimationFrame:function(){for(var c=0,d=["ms","moz","webkit","o"],a,e=0;e<d.length;e++)a=k[d[e]+"RequestAnimationFrame"]||a;a=a||function(d,a){var e=(new Date).getTime(),g=Math.max(0,16-(e-c)),f=k.setTimeout(function(){d(e+g)},g);c=e+g;return f};a.init=f.once(l);return a}},n=k.Two=function(c){c=f.defaults(c||{},{fullscreen:!1,width:640,height:480,type:n.Types.svg,autostart:!1});
f.each(c,function(c,d){"fullscreen"!==d&&"autostart"!==d&&(this[d]=c)},this);if(f.isElement(c.domElement)){var d=c.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+d)||(this.type=n.Types[d])}this.renderer=new n[this.type](this);n.Utils.setPlaying.call(this,c.autostart);this.frameCount=0;c.fullscreen?(c=f.bind(m,this),f.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),
f.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),s.bind(k,"resize",c),c()):f.isElement(c.domElement)||(this.renderer.setSize(c.width,c.height,this.ratio),this.width=c.width,this.height=c.height);this.scene=this.renderer.scene;n.Instances.push(this);I.init()};f.extend(n,{Array:k.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.0",Identifier:"two_",Properties:{hierarchy:"hierarchy",demotion:"demotion"},
Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){k.Two=a;return this},uniqueId:function(){var c=x;x++;return c},Utils:f.extend(f,{defineProperty:function(c){var d="_"+c,a="_flag"+c.charAt(0).toUpperCase()+c.slice(1);Object.defineProperty(this,c,{enumerable:!0,get:function(){return this[d]},set:function(c){this[d]=
c;this[a]=!0}})},release:function(c){f.isObject(c)&&(f.isFunction(c.unbind)&&c.unbind(),c.vertices&&(f.isFunction(c.vertices.unbind)&&c.vertices.unbind(),f.each(c.vertices,function(c){f.isFunction(c.unbind)&&c.unbind()})),c.children&&f.each(c.children,function(c){n.Utils.release(c)}))},xhr:function(c,d){var a=new XMLHttpRequest;a.open("GET",c);a.onreadystatechange=function(){4===a.readyState&&200===a.status&&d(a.responseText)};a.send();return a},Curve:{CollinearityEpsilon:r(10,-30),RecursionLimit:16,
CuspLimit:0,Tolerance:{distance:0.25,angle:0,epsilon:0.01},abscissas:[[0.5773502691896257],[0,0.7745966692414834],[0.33998104358485626,0.8611363115940526],[0,0.5384693101056831,0.906179845938664],[0.2386191860831969,0.6612093864662645,0.932469514203152],[0,0.4058451513773972,0.7415311855993945,0.9491079123427585],[0.1834346424956498,0.525532409916329,0.7966664774136267,0.9602898564975363],[0,0.3242534234038089,0.6133714327005904,0.8360311073266358,0.9681602395076261],[0.14887433898163122,0.4333953941292472,
0.6794095682990244,0.8650633666889845,0.9739065285171717],[0,0.26954315595234496,0.5190961292068118,0.7301520055740494,0.8870625997680953,0.978228658146057],[0.1252334085114689,0.3678314989981802,0.5873179542866175,0.7699026741943047,0.9041172563704749,0.9815606342467192],[0,0.2304583159551348,0.44849275103644687,0.6423493394403402,0.8015780907333099,0.9175983992229779,0.9841830547185881],[0.10805494870734367,0.31911236892788974,0.5152486363581541,0.6872929048116855,0.827201315069765,0.9284348836635735,
0.9862838086968123],[0,0.20119409399743451,0.3941513470775634,0.5709721726085388,0.7244177313601701,0.8482065834104272,0.937273392400706,0.9879925180204854],[0.09501250983763744,0.2816035507792589,0.45801677765722737,0.6178762444026438,0.755404408355003,0.8656312023878318,0.9445750230732326,0.9894009349916499]],weights:[[1],[0.8888888888888888,0.5555555555555556],[0.6521451548625461,0.34785484513745385],[0.5688888888888889,0.47862867049936647,0.23692688505618908],[0.46791393457269104,0.3607615730481386,
0.17132449237917036],[0.4179591836734694,0.3818300505051189,0.27970539148927664,0.1294849661688697],[0.362683783378362,0.31370664587788727,0.22238103445337448,0.10122853629037626],[0.3302393550012598,0.31234707704000286,0.26061069640293544,0.1806481606948574,0.08127438836157441],[0.29552422471475287,0.26926671930999635,0.21908636251598204,0.1494513491505806,0.06667134430868814],[0.2729250867779006,0.26280454451024665,0.23319376459199048,0.18629021092773426,0.1255803694649046,0.05566856711617366],
[0.24914704581340277,0.2334925365383548,0.20316742672306592,0.16007832854334622,0.10693932599531843,0.04717533638651183],[0.2325515532308739,0.22628318026289723,0.2078160475368885,0.17814598076194574,0.13887351021978725,0.09212149983772845,0.04048400476531588],[0.2152638534631578,0.2051984637212956,0.18553839747793782,0.15720316715819355,0.12151857068790319,0.08015808715976021,0.03511946033175186],[0.2025782419255613,0.19843148532711158,0.1861610000155622,0.16626920581699392,0.13957067792615432,0.10715922046717194,
0.07036604748810812,0.03075324199611727],[0.1894506104550685,0.18260341504492358,0.16915651939500254,0.14959598881657674,0.12462897125553388,0.09515851168249279,0.062253523938647894,0.027152459411754096]]},devicePixelRatio:k.devicePixelRatio||1,getBackingStoreRatio:function(c){return c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1},getRatio:function(c){return n.Utils.devicePixelRatio/H(c)},setPlaying:function(c){this.playing=
!!c;return this},getComputedMatrix:function(c,d){d=d&&d.identity()||new n.Matrix;for(var a=c,e=[];a&&a._matrix;)e.push(a._matrix),a=a.parent;e.reverse();f.each(e,function(c){c=c.elements;d.multiply(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9])});return d},deltaTransformPoint:function(c,d,a){return new n.Vector(d*c.a+a*c.c+0,d*c.b+a*c.d+0)},decomposeMatrix:function(c){var d=n.Utils.deltaTransformPoint(c,0,1),a=n.Utils.deltaTransformPoint(c,1,0),d=180/Math.PI*Math.atan2(d.y,d.x)-90,a=180/Math.PI*
Math.atan2(a.y,a.x);return{translateX:c.e,translateY:c.f,scaleX:Math.sqrt(c.a*c.a+c.b*c.b),scaleY:Math.sqrt(c.c*c.c+c.d*c.d),skewX:d,skewY:a,rotation:d}},applySvgAttributes:function(c,d){var a={},e={},g,r,p;if(getComputedStyle){var u=getComputedStyle(c);for(g=u.length;g--;)r=u[g],p=u[r],void 0!==p&&(e[r]=p)}for(g=c.attributes.length;g--;)p=c.attributes[g],a[p.nodeName]=p.value;f.isUndefined(e.opacity)||(e["stroke-opacity"]=e.opacity,e["fill-opacity"]=e.opacity);f.extend(e,a);e.visible=!(f.isUndefined(e.display)&&
"none"===e.display)||f.isUndefined(e.visibility)&&"hidden"===e.visibility;for(r in e)switch(p=e[r],r){case "transform":if("none"===p)break;if(null===c.getCTM())break;a=n.Utils.decomposeMatrix(c.getCTM());d.translation.set(a.translateX,a.translateY);d.rotation=a.rotation;d.scale=a.scaleX;a=parseFloat((e.x+"").replace("px"));g=parseFloat((e.y+"").replace("px"));a&&(d.translation.x=a);g&&(d.translation.y=g);break;case "visible":d.visible=p;break;case "stroke-linecap":d.cap=p;break;case "stroke-linejoin":d.join=
p;break;case "stroke-miterlimit":d.miter=p;break;case "stroke-width":d.linewidth=parseFloat(p);break;case "stroke-opacity":case "fill-opacity":case "opacity":d.opacity=parseFloat(p);break;case "fill":case "stroke":/url\(\#.*\)/i.test(p)?d[r]=this.getById(p.replace(/url\(\#(.*)\)/i,"$1")):d[r]="none"===p?"transparent":p;break;case "id":d.id=p;break;case "class":d.classList=p.split(" ")}return d},read:{svg:function(){return n.Utils.read.g.apply(this,arguments)},g:function(c){var d=new n.Group;n.Utils.applySvgAttributes.call(this,
c,d);for(var a=0,e=c.childNodes.length;a<e;a++){var g=c.childNodes[a],f=g.nodeName;if(!f)return;f=f.replace(/svg\:/ig,"").toLowerCase();f in n.Utils.read&&(g=n.Utils.read[f].call(d,g),d.add(g))}return d},polygon:function(c,d){var a=[];c.getAttribute("points").replace(/(-?[\d\.?]+),(-?[\d\.?]+)/g,function(c,d,e){a.push(new n.Anchor(parseFloat(d),parseFloat(e)))});var e=(new n.Path(a,!d)).noStroke();e.fill="black";return n.Utils.applySvgAttributes.call(this,c,e)},polyline:function(c){return n.Utils.read.polygon.call(this,
c,!0)},path:function(c){var d=c.getAttribute("d"),a=new n.Anchor,e,g,p=!1,u=!1,h=d.match(/[a-df-z][^a-df-z]*/ig),C=h.length-1;f.each(h.slice(0),function(c,d){var a=c[0],e=a.toLowerCase(),g=c.slice(1).trim().split(/[\s,]+|(?=\s?[+\-])/),f=[],p;0>=d&&(h=[]);switch(e){case "h":case "v":1<g.length&&(p=1);break;case "m":case "l":case "t":2<g.length&&(p=2);break;case "s":case "q":4<g.length&&(p=4);break;case "c":6<g.length&&(p=6)}if(p){for(var e=0,r=g.length,u=0;e<r;e+=p){var n=a;if(0<u)switch(a){case "m":n=
"l";break;case "M":n="L"}f.push([n].concat(g.slice(e,e+p)).join(" "));u++}h=Array.prototype.concat.apply(h,f)}else h.push(c)});var l=[];f.each(h,function(c,d){var h,A,D;A=c[0];var k=A.toLowerCase();g=c.slice(1).trim();g=g.replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(c,d,a){return parseFloat(d)*r(10,a)});g=g.split(/[\s,]+|(?=\s?[+\-])/);u=A===k;var x,v,m,q;switch(k){case "z":d>=C?p=!0:(A=a.x,D=a.y,h=new n.Anchor(A,D,void 0,void 0,void 0,void 0,n.Commands.close));break;case "m":case "l":A=parseFloat(g[0]);
D=parseFloat(g[1]);h=new n.Anchor(A,D,void 0,void 0,void 0,void 0,"m"===k?n.Commands.move:n.Commands.line);u&&h.addSelf(a);a=h;break;case "h":case "v":D="h"===k?"x":"y";k="x"===D?"y":"x";h=new n.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,n.Commands.line);h[D]=parseFloat(g[0]);h[k]=a[k];u&&(h[D]+=a[D]);a=h;break;case "c":case "s":h=a.x;D=a.y;e||(e=new n.Vector);"c"===k?(x=parseFloat(g[0]),v=parseFloat(g[1]),m=parseFloat(g[2]),q=parseFloat(g[3]),k=parseFloat(g[4]),A=parseFloat(g[5])):(k=L(a,e,
u),x=k.x,v=k.y,m=parseFloat(g[0]),q=parseFloat(g[1]),k=parseFloat(g[2]),A=parseFloat(g[3]));u&&(x+=h,v+=D,m+=h,q+=D,k+=h,A+=D);f.isObject(a.controls)||n.Anchor.AppendCurveProperties(a);a.controls.right.set(x-a.x,v-a.y);a=h=new n.Anchor(k,A,m-k,q-A,void 0,void 0,n.Commands.curve);e=h.controls.left;break;case "t":case "q":h=a.x;D=a.y;e||(e=new n.Vector);e.isZero()?(x=h,v=D):(x=e.x,D=e.y);"q"===k?(m=parseFloat(g[0]),q=parseFloat(g[1]),k=parseFloat(g[1]),A=parseFloat(g[2])):(k=L(a,e,u),m=k.x,q=k.y,k=
parseFloat(g[0]),A=parseFloat(g[1]));u&&(x+=h,v+=D,m+=h,q+=D,k+=h,A+=D);f.isObject(a.controls)||n.Anchor.AppendCurveProperties(a);a.controls.right.set(x-a.x,v-a.y);a=h=new n.Anchor(k,A,m-k,q-A,void 0,void 0,n.Commands.curve);e=h.controls.left;break;case "a":h=a.x;D=a.y;var w=parseFloat(g[0]),t=parseFloat(g[1]);v=parseFloat(g[2])*Math.PI/180;x=parseFloat(g[3]);m=parseFloat(g[4]);k=parseFloat(g[5]);A=parseFloat(g[6]);u&&(k+=h,A+=D);var s=(k-h)/2,y=(A-D)/2;q=s*Math.cos(v)+y*Math.sin(v);var s=-s*Math.sin(v)+
y*Math.cos(v),y=w*w,z=t*t,M=q*q,B=s*s,E=M/y+B/z;1<E&&(w*=Math.sqrt(E),t*=Math.sqrt(E));z=Math.sqrt((y*z-y*B-z*M)/(y*B+z*M));f.isNaN(z)?z=0:x!=m&&0<z&&(z*=-1);y=z*w*s/t;z=-z*t*q/w;h=y*Math.cos(v)-z*Math.sin(v)+(h+k)/2;var M=y*Math.sin(v)+z*Math.cos(v)+(D+A)/2,F=function(c,d){return(c[0]*d[0]+c[1]*d[1])/(Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2))*Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)))};D=function(c,d){return(c[0]*d[1]<c[1]*d[0]?-1:1)*Math.acos(F(c,d))};var H=D([1,0],[(q-y)/w,(s-z)/t]),B=[(q-
y)/w,(s-z)/t];q=[(-q-y)/w,(-s-z)/t];var J=D(B,q);-1>=F(B,q)&&(J=Math.PI);1<=F(B,q)&&(J=0);x&&(J=G(J,2*Math.PI));m&&0<J&&(J-=2*Math.PI);var I=n.Resolution,K=(new n.Matrix).translate(h,M).rotate(v);h=f.map(f.range(I),function(c){var d=(1-c/(I-1))*J+H;c=w*Math.cos(d);d=t*Math.sin(d);c=K.multiply(c,d,1);return new n.Anchor(c.x,c.y,!1,!1,!1,!1,n.Commands.line)});h.push(new n.Anchor(k,A,!1,!1,!1,!1,n.Commands.line));a=h[h.length-1];e=a.controls.left}h&&(f.isArray(h)?l=l.concat(h):l.push(h))});if(!(1>=l.length))return d=
(new n.Path(l,p,void 0,!0)).noStroke(),d.fill="black",n.Utils.applySvgAttributes.call(this,c,d)},circle:function(c){var d=parseFloat(c.getAttribute("cx")),a=parseFloat(c.getAttribute("cy")),e=parseFloat(c.getAttribute("r")),d=(new n.Circle(d,a,e)).noStroke();d.fill="black";return n.Utils.applySvgAttributes.call(this,c,d)},ellipse:function(c){var d=parseFloat(c.getAttribute("cx")),a=parseFloat(c.getAttribute("cy")),e=parseFloat(c.getAttribute("rx")),g=parseFloat(c.getAttribute("ry")),d=(new n.Ellipse(d,
a,e,g)).noStroke();d.fill="black";return n.Utils.applySvgAttributes.call(this,c,d)},rect:function(c){var d=parseFloat(c.getAttribute("x"))||0,a=parseFloat(c.getAttribute("y"))||0,e=parseFloat(c.getAttribute("width")),g=parseFloat(c.getAttribute("height")),d=(new n.Rectangle(d+e/2,a+g/2,e,g)).noStroke();d.fill="black";return n.Utils.applySvgAttributes.call(this,c,d)},line:function(c){var d=parseFloat(c.getAttribute("x1")),a=parseFloat(c.getAttribute("y1")),e=parseFloat(c.getAttribute("x2")),g=parseFloat(c.getAttribute("y2")),
d=(new n.Line(d,a,e,g)).noFill();return n.Utils.applySvgAttributes.call(this,c,d)},lineargradient:function(c){for(var d=parseFloat(c.getAttribute("x1")),a=parseFloat(c.getAttribute("y1")),e=parseFloat(c.getAttribute("x2")),g=parseFloat(c.getAttribute("y2")),p=(e+d)/2,r=(g+a)/2,h=[],u=0;u<c.children.length;u++){var k=c.children[u],C=parseFloat(k.getAttribute("offset")),l=k.getAttribute("stop-color"),x=k.getAttribute("stop-opacity"),k=k.getAttribute("style");if(f.isNull(l))var v=k.match(/stop\-color\:\s?([\#a-fA-F0-9]*)/),
l=v&&1<v.length?v[1]:void 0;f.isNull(x)&&(x=(v=k.match(/stop\-opacity\:\s?([0-9\.\-]*)/))&&1<v.length?parseFloat(v[1]):1);h.push(new n.Gradient.Stop(C,l,x))}d=new n.LinearGradient(d-p,a-r,e-p,g-r,h);return n.Utils.applySvgAttributes.call(this,c,d)},radialgradient:function(c){var d=parseFloat(c.getAttribute("cx"))||0,a=parseFloat(c.getAttribute("cy"))||0,e=parseFloat(c.getAttribute("r")),g=parseFloat(c.getAttribute("fx")),p=parseFloat(c.getAttribute("fy"));f.isNaN(g)&&(g=d);f.isNaN(p)&&(p=a);for(var r=
Math.abs(d+g)/2,h=Math.abs(a+p)/2,u=[],k=0;k<c.children.length;k++){var C=c.children[k],l=parseFloat(C.getAttribute("offset")),x=C.getAttribute("stop-color"),v=C.getAttribute("stop-opacity"),C=C.getAttribute("style");if(f.isNull(x))var q=C.match(/stop\-color\:\s?([\#a-fA-F0-9]*)/),x=q&&1<q.length?q[1]:void 0;f.isNull(v)&&(v=(q=C.match(/stop\-opacity\:\s?([0-9\.\-]*)/))&&1<q.length?parseFloat(q[1]):1);u.push(new n.Gradient.Stop(l,x,v))}d=new n.RadialGradient(d-r,a-h,e,u,g-r,p-h);return n.Utils.applySvgAttributes.call(this,
c,d)}},subdivide:function(c,d,a,e,g,p,r,h,u){u=u||n.Utils.Curve.RecursionLimit;var k=u+1;return c===r&&d===h?[new n.Anchor(r,h)]:f.map(f.range(0,k),function(f){var u=f/k;f=K(u,c,a,g,r);u=K(u,d,e,p,h);return new n.Anchor(f,u)})},getPointOnCubicBezier:function(c,d,a,e,g){var f=1-c;return f*f*f*d+3*f*f*c*a+3*f*c*c*e+c*c*c*g},getCurveLength:function(c,d,a,g,f,p,r,h,u){if(c===a&&d===g&&f===r&&p===h)return c=r-c,d=h-d,e(c*c+d*d);var k=9*(a-f)+3*(r-c),C=6*(c+f)-12*a,l=3*(a-c),x=9*(g-p)+3*(h-d),v=6*(d+p)-
12*g,q=3*(g-d);return N(function(c){var d=(k*c+C)*c+l;c=(x*c+v)*c+q;return e(d*d+c*c)},0,1,u||n.Utils.Curve.RecursionLimit)},integrate:function(c,d,a,e){var g=n.Utils.Curve.abscissas[e-2],f=n.Utils.Curve.weights[e-2];a=0.5*(a-d);d=a+d;var p=0,r=e+1>>1;for(e=e&1?f[p++]*c(d):0;p<r;){var h=a*g[p];e+=f[p++]*(c(d+h)+c(d-h))}return a*e},getCurveFromPoints:function(c,d){for(var a=c.length,e=a-1,g=0;g<a;g++){var p=c[g];f.isObject(p.controls)||n.Anchor.AppendCurveProperties(p);var r=d?G(g-1,a):C(g-1,0),h=
d?G(g+1,a):u(g+1,e);F(c[r],p,c[h]);p._command=0===g?n.Commands.move:n.Commands.curve;p.controls.left.x=f.isNumber(p.controls.left.x)?p.controls.left.x:p.x;p.controls.left.y=f.isNumber(p.controls.left.y)?p.controls.left.y:p.y;p.controls.right.x=f.isNumber(p.controls.right.x)?p.controls.right.x:p.x;p.controls.right.y=f.isNumber(p.controls.right.y)?p.controls.right.y:p.y}},getControlPoints:function(d,a,e){var r=E(d,a),u=E(e,a);d=z(d,a);e=z(e,a);var k=(r+u)/2;a.u=f.isObject(a.controls.left)?a.controls.left:
new n.Vector(0,0);a.v=f.isObject(a.controls.right)?a.controls.right:new n.Vector(0,0);if(1E-4>d||1E-4>e)return a._relative||(a.controls.left.copy(a),a.controls.right.copy(a)),a;d*=0.33;e*=0.33;k=u<r?k+c:k-c;a.controls.left.x=g(k)*d;a.controls.left.y=h(k)*d;k-=p;a.controls.right.x=g(k)*e;a.controls.right.y=h(k)*e;a._relative||(a.controls.left.x+=a.x,a.controls.left.y+=a.y,a.controls.right.x+=a.x,a.controls.right.y+=a.y);return a},getReflection:function(c,d,a){return new n.Vector(2*c.x-(d.x+c.x)-(a?
c.x:0),2*c.y-(d.y+c.y)-(a?c.y:0))},getAnchorsFromArcData:function(c,d,a,e,g,p,r){(new n.Matrix).translate(c.x,c.y).rotate(d);var h=n.Resolution;return f.map(f.range(h),function(c){c=(c+1)/h;r&&(c=1-c);var d=c*p+g;c=a*Math.cos(d);d=e*Math.sin(d);c=new n.Anchor(c,d);n.Anchor.AppendCurveProperties(c);c.command=n.Commands.line;return c})},ratioBetween:function(c,d){return(c.x*d.x+c.y*d.y)/(c.length()*d.length())},angleBetween:function(c,a){var e,g;if(4<=arguments.length)return e=arguments[0]-arguments[2],
g=arguments[1]-arguments[3],d(g,e);e=c.x-a.x;g=c.y-a.y;return d(g,e)},distanceBetweenSquared:function(c,d){var a=c.x-d.x,e=c.y-d.y;return a*a+e*e},distanceBetween:function(c,d){return e(B(c,d))},toFixed:function(c){return Math.floor(1E3*c)/1E3},mod:function(c,d){for(;0>c;)c+=d;return c%d},Collection:function(){Array.call(this);1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(c){this.name=
"two.js";this.message=c},Events:{on:function(c,d){this._events||(this._events={});(this._events[c]||(this._events[c]=[])).push(d);return this},off:function(c,d){if(!this._events)return this;if(!c&&!d)return this._events={},this;for(var a=c?[c]:f.keys(this._events),e=0,g=a.length;e<g;e++){c=a[e];var p=this._events[c];if(p){var r=[];if(d)for(var h=0,u=p.length;h<u;h++){var n=p[h];d&&d!==n&&r.push(n)}this._events[c]=r}}return this},trigger:function(c){if(!this._events)return this;var d=v.call(arguments,
1),a=this._events[c];a&&y(this,a,d);return this}}})});n.Utils.Events.bind=n.Utils.Events.on;n.Utils.Events.unbind=n.Utils.Events.off;var y=function(c,d,a){var e;switch(a.length){case 0:e=function(e){d[e].call(c,a[0])};break;case 1:e=function(e){d[e].call(c,a[0],a[1])};break;case 2:e=function(e){d[e].call(c,a[0],a[1],a[2])};break;case 3:e=function(e){d[e].call(c,a[0],a[1],a[2],a[3])};break;default:e=function(e){d[e].apply(c,a)}}for(var g=0;g<d.length;g++)e(g)};n.Utils.Error.prototype=Error();n.Utils.Error.prototype.constructor=
n.Utils.Error;n.Utils.Collection.prototype=[];n.Utils.Collection.prototype.constructor=n.Utils.Collection;f.extend(n.Utils.Collection.prototype,n.Utils.Events,{pop:function(){var c=Array.prototype.pop.apply(this,arguments);this.trigger(n.Events.remove,[c]);return c},shift:function(){var c=Array.prototype.shift.apply(this,arguments);this.trigger(n.Events.remove,[c]);return c},push:function(){var c=Array.prototype.push.apply(this,arguments);this.trigger(n.Events.insert,arguments);return c},unshift:function(){var c=
Array.prototype.unshift.apply(this,arguments);this.trigger(n.Events.insert,arguments);return c},splice:function(){var c=Array.prototype.splice.apply(this,arguments),d;this.trigger(n.Events.remove,c);2<arguments.length&&(d=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(n.Events.insert,d),this.trigger(n.Events.order));return c},sort:function(){Array.prototype.sort.apply(this,arguments);this.trigger(n.Events.order);return this},reverse:function(){Array.prototype.reverse.apply(this,
arguments);this.trigger(n.Events.order);return this}});var z=n.Utils.distanceBetween,B=n.Utils.distanceBetweenSquared,E=n.Utils.angleBetween,F=n.Utils.getControlPoints,G=n.Utils.mod,H=n.Utils.getBackingStoreRatio,K=n.Utils.getPointOnCubicBezier,N=n.Utils.integrate,L=n.Utils.getReflection;f.extend(n.prototype,n.Utils.Events,{appendTo:function(c){c.appendChild(this.renderer.domElement);return this},play:function(){n.Utils.setPlaying.call(this,!0);return this.trigger(n.Events.play)},pause:function(){this.playing=
!1;return this.trigger(n.Events.pause)},update:function(){var c=!!this._lastFrame,d=w.now();this.frameCount++;c&&(this.timeDelta=parseFloat((d-this._lastFrame).toFixed(3)));this._lastFrame=d;var c=this.width,d=this.height,a=this.renderer;c===a.width&&d===a.height||a.setSize(c,d,this.ratio);this.trigger(n.Events.update,this.frameCount,this.timeDelta);return this.render()},render:function(){this.renderer.render();return this.trigger(n.Events.render,this.frameCount)},add:function(c){var d=c;d instanceof
Array||(d=f.toArray(arguments));this.scene.add(d);return this},remove:function(c){var d=c;d instanceof Array||(d=f.toArray(arguments));this.scene.remove(d);return this},clear:function(){this.scene.remove(f.toArray(this.scene.children));return this},makeLine:function(c,d,a,e){c=new n.Line(c,d,a,e);this.scene.add(c);return c},makeRectangle:function(c,d,a,e){c=new n.Rectangle(c,d,a,e);this.scene.add(c);return c},makeRoundedRectangle:function(c,d,a,e,g){c=new n.RoundedRectangle(c,d,a,e,g);this.scene.add(c);
return c},makeCircle:function(c,d,a){c=new n.Circle(c,d,a);this.scene.add(c);return c},makeEllipse:function(c,d,a,e){c=new n.Ellipse(c,d,a,e);this.scene.add(c);return c},makeStar:function(c,d,a,e,g){c=new n.Star(c,d,a,e,g);this.scene.add(c);return c},makeCurve:function(c){var d=arguments.length,a=c;if(!f.isArray(c))for(var a=[],e=0;e<d;e+=2){var g=arguments[e];if(!f.isNumber(g))break;a.push(new n.Anchor(g,arguments[e+1]))}d=arguments[d-1];a=new n.Path(a,!(f.isBoolean(d)&&d),!0);d=a.getBoundingClientRect();
a.center().translation.set(d.left+d.width/2,d.top+d.height/2);this.scene.add(a);return a},makePolygon:function(c,d,a,e){c=new n.Polygon(c,d,a,e);this.scene.add(c);return c},makeArcSegment:function(c,d,a,e,g,p,f){c=new n.ArcSegment(c,d,a,e,g,p,f);this.scene.add(c);return c},makePath:function(c){var d=arguments.length,a=c;if(!f.isArray(c))for(var a=[],e=0;e<d;e+=2){var g=arguments[e];if(!f.isNumber(g))break;a.push(new n.Anchor(g,arguments[e+1]))}d=arguments[d-1];a=new n.Path(a,!(f.isBoolean(d)&&d));
d=a.getBoundingClientRect();a.center().translation.set(d.left+d.width/2,d.top+d.height/2);this.scene.add(a);return a},makeText:function(c,d,a,e){c=new n.Text(c,d,a,e);this.add(c);return c},makeLinearGradient:function(c,d,a,e){var g=v.call(arguments,4),g=new n.LinearGradient(c,d,a,e,g);this.add(g);return g},makeRadialGradient:function(c,d,a){var e=v.call(arguments,3),e=new n.RadialGradient(c,d,a,e);this.add(e);return e},makeGroup:function(c){var d=c;d instanceof Array||(d=f.toArray(arguments));var a=
new n.Group;this.scene.add(a);a.add(d);return a},interpret:function(c,d){var a=c.tagName.toLowerCase();if(!(a in n.Utils.read))return null;a=n.Utils.read[a].call(this,c);d&&a instanceof n.Group?this.add(a.children):this.add(a);return a},load:function(c,d){var a=[],e,g;if(/.*\.svg/ig.test(c))return n.Utils.xhr(c,f.bind(function(c){s.temp.innerHTML=c;for(g=0;g<s.temp.children.length;g++)e=s.temp.children[g],a.push(this.interpret(e));d(1>=a.length?a[0]:a,1>=s.temp.children.length?s.temp.children[0]:
s.temp.children)},this)),this;s.temp.innerHTML=c;for(g=0;g<s.temp.children.length;g++)e=s.temp.children[g],a.push(this.interpret(e));d(1>=a.length?a[0]:a,1>=s.temp.children.length?s.temp.children[0]:s.temp.children);return this}});var I=s.getRequestAnimationFrame();"function"===typeof define&&define.amd?define("two",[],function(){return n}):"undefined"!=typeof module&&module.exports&&(module.exports=n);return n}(this.Two);(function(a){var m=a.Utils;a=a.Registry=function(){this.map={}};m.extend(a,{});m.extend(a.prototype,{add:function(a,k){this.map[a]=k;return this},remove:function(a){delete this.map[a];return this},get:function(a){return this.map[a]},contains:function(a){return a in this.map}})})(this.Two);(function(a){var m=a.Utils,l=a.Vector=function(a,d){this.x=a||0;this.y=d||0};m.extend(l,{zero:new a.Vector});m.extend(l.prototype,a.Utils.Events,{set:function(a,d){this.x=a;this.y=d;return this},copy:function(a){this.x=a.x;this.y=a.y;return this},clear:function(){this.y=this.x=0;return this},clone:function(){return new l(this.x,this.y)},add:function(a,d){this.x=a.x+d.x;this.y=a.y+d.y;return this},addSelf:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a,d){this.x=a.x-d.x;this.y=a.y-
d.y;return this},subSelf:function(a){this.x-=a.x;this.y-=a.y;return this},multiplySelf:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){a?(this.x/=a,this.y/=a):this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},
distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var d=this.x-a.x;a=this.y-a.y;return d*d+a*a},setLength:function(a){return this.normalize().multiplyScalar(a)},equals:function(a,d){d="undefined"===typeof d?1E-4:d;return this.distanceTo(a)<d},lerp:function(a,d){return this.set((a.x-this.x)*d+this.x,(a.y-this.y)*d+this.y)},isZero:function(a){a="undefined"===typeof a?1E-4:a;return this.length()<a},toString:function(){return[this.x,this.y].join(" ")},toObject:function(){return{x:this.x,
y:this.y}}});var k={set:function(g,d){this._x=g;this._y=d;return this.trigger(a.Events.change)},copy:function(g){this._x=g.x;this._y=g.y;return this.trigger(a.Events.change)},clear:function(){this._y=this._x=0;return this.trigger(a.Events.change)},clone:function(){return new l(this._x,this._y)},add:function(g,d){this._x=g.x+d.x;this._y=g.y+d.y;return this.trigger(a.Events.change)},addSelf:function(g){this._x+=g.x;this._y+=g.y;return this.trigger(a.Events.change)},sub:function(g,d){this._x=g.x-d.x;
this._y=g.y-d.y;return this.trigger(a.Events.change)},subSelf:function(g){this._x-=g.x;this._y-=g.y;return this.trigger(a.Events.change)},multiplySelf:function(g){this._x*=g.x;this._y*=g.y;return this.trigger(a.Events.change)},multiplyScalar:function(g){this._x*=g;this._y*=g;return this.trigger(a.Events.change)},divideScalar:function(g){return g?(this._x/=g,this._y/=g,this.trigger(a.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this._x*a.x+
this._y*a.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var d=this._x-a.x;a=this._y-a.y;return d*d+a*a},setLength:function(a){return this.normalize().multiplyScalar(a)},equals:function(a,d){d="undefined"===typeof d?1E-4:d;return this.distanceTo(a)<d},lerp:function(a,
d){return this.set((a.x-this._x)*d+this._x,(a.y-this._y)*d+this._y)},isZero:function(a){a="undefined"===typeof a?1E-4:a;return this.length()<a},toString:function(){return[this._x,this._y].join(" ")},toObject:function(){return{x:this._x,y:this._y}}},f={enumerable:!0,get:function(){return this._x},set:function(g){this._x=g;this.trigger(a.Events.change,"x")}},h={enumerable:!0,get:function(){return this._y},set:function(g){this._y=g;this.trigger(a.Events.change,"y")}};a.Vector.prototype.bind=a.Vector.prototype.on=
function(){this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",f),Object.defineProperty(this,"y",h),m.extend(this,k),this._bound=!0);a.Utils.Events.bind.apply(this,arguments);return this}})(this.Two);(function(a){var m=a.Commands,l=a.Utils,k=a.Anchor=function(f,g,d,e,p,c,r){a.Vector.call(this,f,g);this._broadcast=l.bind(function(){this.trigger(a.Events.change)},this);this._command=r||m.move;this._relative=!0;if(!r)return this;k.AppendCurveProperties(this);l.isNumber(d)&&(this.controls.left.x=d);l.isNumber(e)&&(this.controls.left.y=e);l.isNumber(p)&&(this.controls.right.x=p);l.isNumber(c)&&(this.controls.right.y=c)};l.extend(k,{AppendCurveProperties:function(f){f.controls={left:new a.Vector(0,
0),right:new a.Vector(0,0)}}});var f={listen:function(){l.isObject(this.controls)||k.AppendCurveProperties(this);this.controls.left.bind(a.Events.change,this._broadcast);this.controls.right.bind(a.Events.change,this._broadcast);return this},ignore:function(){this.controls.left.unbind(a.Events.change,this._broadcast);this.controls.right.unbind(a.Events.change,this._broadcast);return this},clone:function(){var f=this.controls,f=new a.Anchor(this.x,this.y,f&&f.left.x,f&&f.left.y,f&&f.right.x,f&&f.right.y,
this.command);f.relative=this._relative;return f},toObject:function(){var a={x:this.x,y:this.y};this._command&&(a.command=this._command);this._relative&&(a.relative=this._relative);this.controls&&(a.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()});return a},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y].join(" "):[this._x,this._y].join(" ")}};Object.defineProperty(k.prototype,
"command",{enumerable:!0,get:function(){return this._command},set:function(f){this._command=f;this._command!==m.curve||l.isObject(this.controls)||k.AppendCurveProperties(this);return this.trigger(a.Events.change)}});Object.defineProperty(k.prototype,"relative",{enumerable:!0,get:function(){return this._relative},set:function(f){if(this._relative==f)return this;this._relative=!!f;return this.trigger(a.Events.change)}});l.extend(k.prototype,a.Vector.prototype,f);a.Anchor.prototype.bind=a.Anchor.prototype.on=
function(){a.Vector.prototype.bind.apply(this,arguments);l.extend(this,f)};a.Anchor.prototype.unbind=a.Anchor.prototype.off=function(){a.Vector.prototype.unbind.apply(this,arguments);l.extend(this,f)}})(this.Two);(function(a){var m=Math.cos,l=Math.sin,k=Math.tan,f=a.Utils,h=a.Matrix=function(g,d,e,p,c,r){this.elements=new a.Array(9);var u=g;f.isArray(u)||(u=f.toArray(arguments));this.identity().set(u)};f.extend(h,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(g,d,e){if(3>=d.length){e=d[0]||0;var f=d[1]||0;d=d[2]||0;return{x:g[0]*e+g[1]*f+g[2]*d,y:g[3]*e+g[4]*f+g[5]*d,z:g[6]*e+g[7]*f+g[8]*d}}var f=g[0],c=g[1],r=g[2],u=g[3],h=g[4],k=g[5],l=g[6],m=g[7];g=g[8];var t=d[0],q=d[1],s=d[2],n=d[3],y=d[4],z=d[5],B=
d[6],E=d[7];d=d[8];e=e||new a.Array(9);e[0]=f*t+c*n+r*B;e[1]=f*q+c*y+r*E;e[2]=f*s+c*z+r*d;e[3]=u*t+h*n+k*B;e[4]=u*q+h*y+k*E;e[5]=u*s+h*z+k*d;e[6]=l*t+m*n+g*B;e[7]=l*q+m*y+g*E;e[8]=l*s+m*z+g*d;return e}});f.extend(h.prototype,a.Utils.Events,{set:function(g){var d=g;f.isArray(d)||(d=f.toArray(arguments));f.extend(this.elements,d);return this.trigger(a.Events.change)},identity:function(){this.set(h.Identity);return this},multiply:function(g,d,e,p,c,r,u,h,k){var l=arguments,m=l.length;if(1>=m)return f.each(this.elements,
function(c,a){this.elements[a]=c*g},this),this.trigger(a.Events.change);if(3>=m)return g=g||0,d=d||0,e=e||0,c=this.elements,{x:c[0]*g+c[1]*d+c[2]*e,y:c[3]*g+c[4]*d+c[5]*e,z:c[6]*g+c[7]*d+c[8]*e};var t=this.elements,q=l,l=t[0],m=t[1],s=t[2],n=t[3],y=t[4],z=t[5],B=t[6],E=t[7],t=t[8],F=q[0],G=q[1],H=q[2],K=q[3],N=q[4],L=q[5],I=q[6],A=q[7],q=q[8];this.elements[0]=l*F+m*K+s*I;this.elements[1]=l*G+m*N+s*A;this.elements[2]=l*H+m*L+s*q;this.elements[3]=n*F+y*K+z*I;this.elements[4]=n*G+y*N+z*A;this.elements[5]=
n*H+y*L+z*q;this.elements[6]=B*F+E*K+t*I;this.elements[7]=B*G+E*N+t*A;this.elements[8]=B*H+E*L+t*q;return this.trigger(a.Events.change)},inverse:function(g){var d=this.elements;g=g||new a.Matrix;var e=d[0],f=d[1],c=d[2],r=d[3],u=d[4],h=d[5],k=d[6],l=d[7],d=d[8],m=d*u-h*l,t=-d*r+h*k,q=l*r-u*k,s=e*m+f*t+c*q;if(!s)return null;s=1/s;g.elements[0]=m*s;g.elements[1]=(-d*f+c*l)*s;g.elements[2]=(h*f-c*u)*s;g.elements[3]=t*s;g.elements[4]=(d*e-c*k)*s;g.elements[5]=(-h*e+c*r)*s;g.elements[6]=q*s;g.elements[7]=
(-l*e+f*k)*s;g.elements[8]=(u*e-f*r)*s;return g},scale:function(a,d){1>=arguments.length&&(d=a);return this.multiply(a,0,0,0,d,0,0,0,1)},rotate:function(a){var d=m(a);a=l(a);return this.multiply(d,-a,0,a,d,0,0,0,1)},translate:function(a,d){return this.multiply(1,0,a,0,1,d,0,0,1)},skewX:function(a){a=k(a);return this.multiply(1,a,0,0,1,0,0,0,1)},skewY:function(a){a=k(a);return this.multiply(1,0,0,a,1,0,0,0,1)},toString:function(a){var d=[];this.toArray(a,d);return d.join(" ")},toArray:function(a,d){var e=
this.elements,f=!!d,c=parseFloat(e[0].toFixed(3)),r=parseFloat(e[1].toFixed(3)),u=parseFloat(e[2].toFixed(3)),h=parseFloat(e[3].toFixed(3)),k=parseFloat(e[4].toFixed(3)),l=parseFloat(e[5].toFixed(3));if(a){var m=parseFloat(e[6].toFixed(3)),t=parseFloat(e[7].toFixed(3)),e=parseFloat(e[8].toFixed(3));if(f){d[0]=c;d[1]=h;d[2]=m;d[3]=r;d[4]=k;d[5]=t;d[6]=u;d[7]=l;d[8]=e;return}return[c,h,m,r,k,t,u,l,e]}if(f)d[0]=c,d[1]=h,d[2]=r,d[3]=k,d[4]=u,d[5]=l;else return[c,h,r,k,u,l]},clone:function(){return new a.Matrix(this.elements[0],
this.elements[1],this.elements[2],this.elements[3],this.elements[4],this.elements[5],this.elements[6],this.elements[7],this.elements[8])}})})(this.Two);(function(a){var m=a.Utils.mod,l=a.Utils.toFixed,k=a.Utils,f={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(a,d){var e=document.createElementNS(this.ns,a);"svg"===a&&(d=k.defaults(d||{},{version:this.version}));k.isEmpty(d)||f.setAttributes(e,d);return e},setAttributes:function(a,d){for(var e=Object.keys(d),f=0;f<e.length;f++)a.setAttribute(e[f],d[e[f]]);return this},removeAttributes:function(a,
d){for(var e in d)a.removeAttribute(e);return this},toString:function(g,d){for(var e=g.length,f=e-1,c,r="",h=0;h<e;h++){var k=g[h],x,v=d?m(h-1,e):Math.max(h-1,0),w=d?m(h+1,e):Math.min(h+1,f);x=g[v];var t=g[w],q,s,n,v=l(k._x),t=l(k._y);switch(k._command){case a.Commands.close:x=a.Commands.close;break;case a.Commands.curve:q=x.controls&&x.controls.right||a.Vector.zero;n=k.controls&&k.controls.left||a.Vector.zero;x._relative?(w=l(q.x+x.x),q=l(q.y+x.y)):(w=l(q.x),q=l(q.y));k._relative?(s=l(n.x+k.x),n=
l(n.y+k.y)):(s=l(n.x),n=l(n.y));x=(0===h?a.Commands.move:a.Commands.curve)+" "+w+" "+q+" "+s+" "+n+" "+v+" "+t;break;case a.Commands.move:c=k;x=a.Commands.move+" "+v+" "+t;break;default:x=k._command+" "+v+" "+t}h>=f&&d&&(k._command===a.Commands.curve&&(t=c,q=k.controls&&k.controls.right||k,v=t.controls&&t.controls.left||t,k._relative?(w=l(q.x+k.x),q=l(q.y+k.y)):(w=l(q.x),q=l(q.y)),t._relative?(s=l(v.x+t.x),n=l(v.y+t.y)):(s=l(v.x),n=l(v.y)),v=l(t.x),t=l(t.y),x+=" C "+w+" "+q+" "+s+" "+n+" "+v+" "+
t),x+=" Z");r+=x+" "}return r},getClip:function(a){var d=a._renderer.clip;if(!d){for(var e=a;e.parent;)e=e.parent;d=a._renderer.clip=f.createElement("clipPath");e.defs.appendChild(d)}return d},group:{appendChild:function(a){var d=a._renderer.elem;if(d){var e=d.nodeName;!e||(/(radial|linear)gradient/i.test(e)||a._clip)||this.elem.appendChild(d)}},removeChild:function(a){var d=a._renderer.elem;d&&d.parentNode==this.elem&&d.nodeName&&(a._clip||this.elem.removeChild(d))},orderChild:function(a){this.elem.appendChild(a._renderer.elem)},
renderChild:function(a){f[a._renderer.type].render.call(a,this)},render:function(a){this._update();if(0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=f.createElement("g",{id:this.id}),a.appendChild(this._renderer.elem));var d={domElement:a,elem:this._renderer.elem};(this._matrix.manual||this._flagMatrix)&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var e=0;e<this.children.length;e++){var p=this.children[e];f[p._renderer.type].render.call(p,
a)}this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity);this._flagAdditions&&this.additions.forEach(f.group.appendChild,d);this._flagSubtractions&&this.subtractions.forEach(f.group.removeChild,d);this._flagOrder&&this.children.forEach(f.group.orderChild,d);this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path"));return this.flagReset()}},path:{render:function(a){this._update();if(0===
this._opacity&&!this._flagOpacity)return this;var d={};if(this._matrix.manual||this._flagMatrix)d.transform="matrix("+this._matrix.toString()+")";if(this._flagVertices){var e=f.toString(this._vertices,this._closed);d.d=e}this._fill&&this._fill._renderer&&this._fill._update();this._flagFill&&(this._fill&&this._fill._renderer&&f[this._fill._renderer.type].render.call(this._fill,a,!0),d.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill);this._stroke&&this._stroke._renderer&&this._stroke._update();
this._flagStroke&&(this._stroke&&this._stroke._renderer&&f[this._stroke._renderer.type].render.call(this._stroke,a,!0),d.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke);this._flagLinewidth&&(d["stroke-width"]=this._linewidth);this._flagOpacity&&(d["stroke-opacity"]=this._opacity,d["fill-opacity"]=this._opacity);this._flagVisible&&(d.visibility=this._visible?"visible":"hidden");this._flagCap&&(d["stroke-linecap"]=this._cap);this._flagJoin&&(d["stroke-linejoin"]=this._join);
this._flagMiter&&(d["stroke-miterlimit"]=this._miter);this._renderer.elem?f.setAttributes(this._renderer.elem,d):(d.id=this.id,this._renderer.elem=f.createElement("path",d),a.appendChild(this._renderer.elem));this._flagClip&&(a=f.getClip(this),d=this._renderer.elem,this._clip?(d.removeAttribute("id"),a.setAttribute("id",this.id),a.appendChild(d)):(a.removeAttribute("id"),d.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(d)));return this.flagReset()}},text:{render:function(a){this._update();
var d={};if(this._matrix.manual||this._flagMatrix)d.transform="matrix("+this._matrix.toString()+")";this._flagFamily&&(d["font-family"]=this._family);this._flagSize&&(d["font-size"]=this._size);this._flagLeading&&(d["line-height"]=this._leading);this._flagAlignment&&(d["text-anchor"]=f.alignments[this._alignment]||this._alignment);this._flagBaseline&&(d["alignment-baseline"]=d["dominant-baseline"]=this._baseline);this._flagStyle&&(d["font-style"]=this._style);this._flagWeight&&(d["font-weight"]=this._weight);
this._flagDecoration&&(d["text-decoration"]=this._decoration);this._fill&&this._fill._renderer&&this._fill._update();this._flagFill&&(this._fill&&this._fill._renderer&&f[this._fill._renderer.type].render.call(this._fill,a,!0),d.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill);this._stroke&&this._stroke._renderer&&this._stroke._update();this._flagStroke&&(this._stroke&&this._stroke._renderer&&f[this._stroke._renderer.type].render.call(this._stroke,a,!0),d.stroke=this._stroke&&this._stroke.id?
"url(#"+this._stroke.id+")":this._stroke);this._flagLinewidth&&(d["stroke-width"]=this._linewidth);this._flagOpacity&&(d.opacity=this._opacity);this._flagVisible&&(d.visibility=this._visible?"visible":"hidden");this._renderer.elem?f.setAttributes(this._renderer.elem,d):(d.id=this.id,this._renderer.elem=f.createElement("text",d),a.defs.appendChild(this._renderer.elem));this._flagClip&&(a=f.getClip(this),d=this._renderer.elem,this._clip?(d.removeAttribute("id"),a.setAttribute("id",this.id),a.appendChild(d)):
(a.removeAttribute("id"),d.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(d)));this._flagValue&&(this._renderer.elem.textContent=this._value);return this.flagReset()}},"linear-gradient":{render:function(a,d){d||this._update();var e={};this._flagEndPoints&&(e.x1=this.left._x,e.y1=this.left._y,e.x2=this.right._x,e.y2=this.right._y);this._flagSpread&&(e.spreadMethod=this._spread);this._renderer.elem?f.setAttributes(this._renderer.elem,e):(e.id=this.id,e.gradientUnits="userSpaceOnUse",
this._renderer.elem=f.createElement("linearGradient",e),a.defs.appendChild(this._renderer.elem));if(this._flagStops){if(e=this._renderer.elem.childNodes.length!==this.stops.length)this._renderer.elem.childNodes.length=0;for(var p=0;p<this.stops.length;p++){var c=this.stops[p],r={};c._flagOffset&&(r.offset=100*c._offset+"%");c._flagColor&&(r["stop-color"]=c._color);c._flagOpacity&&(r["stop-opacity"]=c._opacity);c._renderer.elem?f.setAttributes(c._renderer.elem,r):c._renderer.elem=f.createElement("stop",
r);e&&this._renderer.elem.appendChild(c._renderer.elem);c.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(a,d){d||this._update();var e={};this._flagCenter&&(e.cx=this.center._x,e.cy=this.center._y);this._flagFocal&&(e.fx=this.focal._x,e.fy=this.focal._y);this._flagRadius&&(e.r=this._radius);this._flagSpread&&(e.spreadMethod=this._spread);this._renderer.elem?f.setAttributes(this._renderer.elem,e):(e.id=this.id,e.gradientUnits="userSpaceOnUse",this._renderer.elem=f.createElement("radialGradient",
e),a.defs.appendChild(this._renderer.elem));if(this._flagStops){if(e=this._renderer.elem.childNodes.length!==this.stops.length)this._renderer.elem.childNodes.length=0;for(var p=0;p<this.stops.length;p++){var c=this.stops[p],r={};c._flagOffset&&(r.offset=100*c._offset+"%");c._flagColor&&(r["stop-color"]=c._color);c._flagOpacity&&(r["stop-opacity"]=c._opacity);c._renderer.elem?f.setAttributes(c._renderer.elem,r):c._renderer.elem=f.createElement("stop",r);e&&this._renderer.elem.appendChild(c._renderer.elem);
c.flagReset()}}return this.flagReset()}},texture:{render:function(a,d){d||this._update();var e={};if(this._flagLoaded&&this.loaded){var p=this.image;e.x=-p.width/2;e.y=-p.height/2;e.width=p.width;e.height=p.height;var c={x:0,y:0,width:p.width,height:p.height};switch(p.nodeName.toLowerCase()){case "canvas":c.href=p.toDataURL("image/png");break;case "img":case "image":c.href=this.src}this._renderer.image?f.setAttributes(this._renderer.image,c):this._renderer.image=f.createElement("image",c)}this._renderer.elem?
f.setAttributes(this._renderer.elem,e):(e.id=this.id,e.patternUnits="userSpaceOnUse",this._renderer.elem=f.createElement("pattern",e),a.defs.appendChild(this._renderer.elem));this._renderer.elem&&(this._renderer.image&&!this._renderer.appended)&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0);return this.flagReset()}}},h=a[a.Types.svg]=function(g){this.domElement=g.domElement||f.createElement("svg");this.scene=new a.Group;this.scene.parent=this;this.defs=f.createElement("defs");
this.domElement.appendChild(this.defs);this.domElement.defs=this.defs;this.domElement.style.overflow="hidden"};k.extend(h,{Utils:f});k.extend(h.prototype,a.Utils.Events,{setSize:function(a,d){this.width=a;this.height=d;f.setAttributes(this.domElement,{width:a,height:d});return this},render:function(){f.group.render.call(this.scene,this.domElement);return this}})})(this.Two);(function(a){var m=a.Utils.mod,l=a.Utils.toFixed,k=a.Utils.getRatio,f=a.Utils,h=function(a){return 1==a[0]&&0==a[3]&&0==a[1]&&1==a[4]&&0==a[2]&&0==a[5]},g={isHidden:/(none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(a){a.tagName="canvas";a.nodeType=1;return a},group:{renderChild:function(a){g[a._renderer.type].render.call(a,this.ctx,!0,this.clip)},render:function(a){this._update();var d=this._matrix.elements,c=this.parent;this._renderer.opacity=this._opacity*
(c&&c._renderer?c._renderer.opacity:1);var c=h(d),f=this._mask;this._renderer.context||(this._renderer.context={});this._renderer.context.ctx=a;c||(a.save(),a.transform(d[0],d[3],d[1],d[4],d[2],d[5]));f&&g[f._renderer.type].render.call(f,a,!0);for(d=0;d<this.children.length;d++)f=this.children[d],g[f._renderer.type].render.call(f,a);c||a.restore();return this.flagReset()}},path:{render:function(d,p,c){var r,u,k,x,v,w,t,q,s,n,y,z,B,E,F,G;this._update();r=this._matrix.elements;u=this._stroke;k=this._linewidth;
x=this._fill;v=this._opacity*this.parent._renderer.opacity;w=this._visible;t=this._cap;q=this._join;s=this._miter;n=this._closed;y=this._vertices;z=y.length;B=z-1;G=h(r);F=this._clip;if(!p&&(!w||F))return this;G||(d.save(),d.transform(r[0],r[3],r[1],r[4],r[2],r[5]));x&&(f.isString(x)?d.fillStyle=x:(g[x._renderer.type].render.call(x,d),d.fillStyle=x._renderer.effect));u&&(f.isString(u)?d.strokeStyle=u:(g[u._renderer.type].render.call(u,d),d.strokeStyle=u._renderer.effect));k&&(d.lineWidth=k);s&&(d.miterLimit=
s);q&&(d.lineJoin=q);t&&(d.lineCap=t);f.isNumber(v)&&(d.globalAlpha=v);d.beginPath();for(r=0;r<y.length;r++)switch(p=y[r],v=l(p._x),w=l(p._y),p._command){case a.Commands.close:d.closePath();break;case a.Commands.curve:k=n?m(r-1,z):Math.max(r-1,0);n?m(r+1,z):Math.min(r+1,B);t=y[k];q=t.controls&&t.controls.right||a.Vector.zero;s=p.controls&&p.controls.left||a.Vector.zero;t._relative?(k=q.x+l(t._x),q=q.y+l(t._y)):(k=l(q.x),q=l(q.y));p._relative?(t=s.x+l(p._x),s=s.y+l(p._y)):(t=l(s.x),s=l(s.y));d.bezierCurveTo(k,
q,t,s,v,w);r>=B&&n&&(w=E,t=p.controls&&p.controls.right||a.Vector.zero,v=w.controls&&w.controls.left||a.Vector.zero,p._relative?(k=t.x+l(p._x),q=t.y+l(p._y)):(k=l(t.x),q=l(t.y)),w._relative?(t=v.x+l(w._x),s=v.y+l(w._y)):(t=l(v.x),s=l(v.y)),v=l(w._x),w=l(w._y),d.bezierCurveTo(k,q,t,s,v,w));break;case a.Commands.line:d.lineTo(v,w);break;case a.Commands.move:E=p,d.moveTo(v,w)}n&&d.closePath();if(!F&&!c){if(!g.isHidden.test(x)){if(n=x._renderer&&x._renderer.offset)d.save(),d.translate(-x._renderer.offset.x,
-x._renderer.offset.y);d.fill();n&&d.restore()}if(!g.isHidden.test(u)){if(n=u._renderer&&u._renderer.offset)d.save(),d.translate(-u._renderer.offset.x,-u._renderer.offset.y);d.stroke();n&&d.restore()}}d.restore();G||d.restore();F&&!c&&d.clip();return this.flagReset()}},text:{render:function(a,d,c){this._update();var r=this._matrix.elements,u=this._stroke,k=this._linewidth,l=this._fill,m=this._opacity*this.parent._renderer.opacity,w=this._visible,t=h(r),q=this._clip;if(!d&&(!w||q))return this;t||(a.save(),
a.transform(r[0],r[3],r[1],r[4],r[2],r[5]));a.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ");a.textAlign=g.alignments[this._alignment]||this._alignment;a.textBaseline=this._baseline;l&&(f.isString(l)?a.fillStyle=l:(g[l._renderer.type].render.call(l,a),a.fillStyle=l._renderer.effect));u&&(f.isString(u)?a.strokeStyle=u:(g[u._renderer.type].render.call(u,a),a.strokeStyle=u._renderer.effect));k&&(a.lineWidth=k);f.isNumber(m)&&(a.globalAlpha=m);q||c||(g.isHidden.test(l)||
(l._renderer&&l._renderer.offset?(a.save(),a.translate(-l._renderer.offset.x,-l._renderer.offset.y),a.fillText(this.value,l._renderer.offset.x,l._renderer.offset.y),a.restore()):a.fillText(this.value,0,0)),g.isHidden.test(u)||(u._renderer&&u._renderer.offset?(a.save(),a.translate(-u._renderer.offset.x,-u._renderer.offset.y),a.strokeText(this.value,u._renderer.offset.x,u._renderer.offset.y),a.restore()):a.strokeText(this.value,0,0)));t||a.restore();q&&!c&&a.clip();return this.flagReset()}},"linear-gradient":{render:function(a){this._update();
if(!this._renderer.effect||this._flagEndPoints||this._flagStops)for(this._renderer.effect=a.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y),a=0;a<this.stops.length;a++){var d=this.stops[a];this._renderer.effect.addColorStop(d._offset,d._color)}return this.flagReset()}},"radial-gradient":{render:function(a){this._update();if(!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops)for(this._renderer.effect=a.createRadialGradient(this.center._x,
this.center._y,0,this.focal._x,this.focal._y,this._radius),a=0;a<this.stops.length;a++){var d=this.stops[a];this._renderer.effect.addColorStop(d._offset,d._color)}return this.flagReset()}},texture:{render:function(d){this._update();if(!this._renderer.effect||this._flagLoaded&&this.loaded)this._renderer.effect=d.createPattern(this.image,"repeat"),this._renderer.offset=new a.Vector(this.image.width/2,this.image.height/2);return this.flagReset()}}},d=a[a.Types.canvas]=function(d){var g=!1!==d.smoothing;
this.domElement=d.domElement||document.createElement("canvas");this.ctx=this.domElement.getContext("2d");this.overdraw=d.overdraw||!1;f.isUndefined(this.ctx.imageSmoothingEnabled)||(this.ctx.imageSmoothingEnabled=g);this.scene=new a.Group;this.scene.parent=this};f.extend(d,{Utils:g});f.extend(d.prototype,a.Utils.Events,{setSize:function(a,d,c){this.width=a;this.height=d;this.ratio=f.isUndefined(c)?k(this.ctx):c;this.domElement.width=a*this.ratio;this.domElement.height=d*this.ratio;this.domElement.style&&
f.extend(this.domElement.style,{width:a+"px",height:d+"px"});return this},render:function(){var a=1===this.ratio;a||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio));this.overdraw||this.ctx.clearRect(0,0,this.width,this.height);g.group.render.call(this.scene,this.ctx);a||this.ctx.restore();return this}})})(this.Two);(function(a){var m=a.Matrix.Multiply,l=a.Utils.mod,k=[1,0,0,0,1,0,0,0,1],f=new a.Array(9),h=a.Utils.getRatio,g=a.Utils.toFixed,d=a.Utils,e={isHidden:/(none|transparent)/i,canvas:this.document?this.document.createElement("canvas"):{getContext:d.identity},alignments:{left:"start",middle:"center",right:"end"},matrix:new a.Matrix,uv:new a.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{removeChild:function(c,a){if(c.children)for(var d=0;d<c.children.length;d++)e.group.removeChild(c.children[d],a);else a.deleteTexture(c._renderer.texture),
delete c._renderer.texture},renderChild:function(c){e[c._renderer.type].render.call(c,this.gl,this.program)},render:function(c,d){this._update();var g=this.parent,p=g._matrix&&g._matrix.manual||g._flagMatrix,h=this._matrix.manual||this._flagMatrix;if(p||h)this._renderer.matrix||(this._renderer.matrix=new a.Array(9)),this._matrix.toArray(!0,f),m(f,g._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*g._renderer.scale,p&&(this._flagMatrix=!0);this._mask&&(c.enable(c.STENCIL_TEST),
c.stencilFunc(c.ALWAYS,1,1),c.colorMask(!1,!1,!1,!0),c.stencilOp(c.KEEP,c.KEEP,c.INCR),e[this._mask._renderer.type].render.call(this._mask,c,d,this),c.colorMask(!0,!0,!0,!0),c.stencilFunc(c.NOTEQUAL,0,1),c.stencilOp(c.KEEP,c.KEEP,c.KEEP));this._flagOpacity=g._flagOpacity||this._flagOpacity;this._renderer.opacity=this._opacity*(g&&g._renderer?g._renderer.opacity:1);if(this._flagSubtractions)for(g=0;g<this.subtractions.length;g++)e.group.removeChild(this.subtractions[g],c);this.children.forEach(e.group.renderChild,
{gl:c,program:d});this._mask&&(c.colorMask(!1,!1,!1,!1),c.stencilOp(c.KEEP,c.KEEP,c.DECR),e[this._mask._renderer.type].render.call(this._mask,c,d,this),c.colorMask(!0,!0,!0,!0),c.stencilFunc(c.NOTEQUAL,0,1),c.stencilOp(c.KEEP,c.KEEP,c.KEEP),c.disable(c.STENCIL_TEST));return this.flagReset()}},path:{updateCanvas:function(c){var f,p,h,k,m,w,t=c._vertices;f=this.canvas;var q=this.ctx;w=c._renderer.scale;var s=c._stroke;h=c._linewidth;var n=c._fill;p=c._renderer.opacity||c._opacity;m=c._cap;k=c._join;
var y=c._miter,z=c._closed,B=t.length,E=B-1;f.width=Math.max(Math.ceil(c._renderer.rect.width*w),1);f.height=Math.max(Math.ceil(c._renderer.rect.height*w),1);var F=c._renderer.rect.centroid,G=F.x,F=F.y;q.clearRect(0,0,f.width,f.height);n&&(d.isString(n)?q.fillStyle=n:(e[n._renderer.type].render.call(n,q,c),q.fillStyle=n._renderer.gradient));s&&(d.isString(s)?q.strokeStyle=s:(e[s._renderer.type].render.call(s,q,c),q.strokeStyle=s._renderer.gradient));h&&(q.lineWidth=h);y&&(q.miterLimit=y);k&&(q.lineJoin=
k);m&&(q.lineCap=m);d.isNumber(p)&&(q.globalAlpha=p);var H;q.save();q.scale(w,w);q.translate(G,F);q.beginPath();for(c=0;c<t.length;c++)switch(b=t[c],w=g(b._x),h=g(b._y),b._command){case a.Commands.close:q.closePath();break;case a.Commands.curve:f=z?l(c-1,B):Math.max(c-1,0);z?l(c+1,B):Math.min(c+1,E);p=t[f];m=p.controls&&p.controls.right||a.Vector.zero;k=b.controls&&b.controls.left||a.Vector.zero;p._relative?(f=g(m.x+p._x),m=g(m.y+p._y)):(f=g(m.x),m=g(m.y));b._relative?(p=g(k.x+b._x),k=g(k.y+b._y)):
(p=g(k.x),k=g(k.y));q.bezierCurveTo(f,m,p,k,w,h);c>=E&&z&&(h=H,p=b.controls&&b.controls.right||a.Vector.zero,w=h.controls&&h.controls.left||a.Vector.zero,b._relative?(f=g(p.x+b._x),m=g(p.y+b._y)):(f=g(p.x),m=g(p.y)),h._relative?(p=g(w.x+h._x),k=g(w.y+h._y)):(p=g(w.x),k=g(w.y)),w=g(h._x),h=g(h._y),q.bezierCurveTo(f,m,p,k,w,h));break;case a.Commands.line:q.lineTo(w,h);break;case a.Commands.move:H=b,q.moveTo(w,h)}z&&q.closePath();e.isHidden.test(n)||q.fill();e.isHidden.test(s)||q.stroke();q.restore()},
getBoundingClientRect:function(c,a,e){var f=Infinity,g=-Infinity,p=Infinity,h=-Infinity;c.forEach(function(c){var a=c.x,d=c.y,e=c.controls,r,k;p=Math.min(d,p);f=Math.min(a,f);g=Math.max(a,g);h=Math.max(d,h);c.controls&&(r=e.left,k=e.right,r&&k&&(e=c._relative?r.x+a:r.x,r=c._relative?r.y+d:r.y,a=c._relative?k.x+a:k.x,c=c._relative?k.y+d:k.y,e&&(r&&a&&c)&&(p=Math.min(r,c,p),f=Math.min(e,a,f),g=Math.max(e,a,g),h=Math.max(r,c,h))))});d.isNumber(a)&&(p-=a,f-=a,g+=a,h+=a);e.top=p;e.left=f;e.right=g;e.bottom=
h;e.width=g-f;e.height=h-p;e.centroid||(e.centroid={});e.centroid.x=-f;e.centroid.y=-p},render:function(c,d,g){if(!this._visible||!this._opacity)return this;var p=this.parent,h=p._matrix.manual||p._flagMatrix,k=this._matrix.manual||this._flagMatrix,l=this._flagVertices||this._flagFill||this._fill instanceof a.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof a.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||
this._fill._flagCenter||this._fill._flagFocal)||this._stroke instanceof a.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof a.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._flagStroke||this._flagLinewidth||this._flagOpacity||p._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||
!this._renderer.texture;this._update();if(h||k)this._renderer.matrix||(this._renderer.matrix=new a.Array(9)),this._matrix.toArray(!0,f),m(f,p._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*p._renderer.scale;l&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new a.Array(12)),this._renderer.opacity=this._opacity*p._renderer.opacity,e.path.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect),e.getTriangles(this._renderer.rect,
this._renderer.triangles),e.updateBuffer.call(e,c,this,d),e.updateTexture.call(e,c,this));if(!this._clip||g)return c.bindBuffer(c.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),c.vertexAttribPointer(d.textureCoords,2,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,this._renderer.texture),c.uniformMatrix3fv(d.matrix,!1,this._renderer.matrix),c.bindBuffer(c.ARRAY_BUFFER,this._renderer.buffer),c.vertexAttribPointer(d.position,2,c.FLOAT,!1,0,0),c.drawArrays(c.TRIANGLES,0,6),this.flagReset()}},text:{updateCanvas:function(c){var a=
this.canvas,f=this.ctx,g=c._renderer.scale,p=c._stroke,h=c._linewidth*g,k=c._fill,l=c._renderer.opacity||c._opacity;a.width=Math.max(Math.ceil(c._renderer.rect.width*g),1);a.height=Math.max(Math.ceil(c._renderer.rect.height*g),1);var m=c._renderer.rect.centroid,s=m.x,m=m.y;f.clearRect(0,0,a.width,a.height);f.font=[c._style,c._weight,c._size+"px/"+c._leading+"px",c._family].join(" ");f.textAlign="center";f.textBaseline="middle";k&&(d.isString(k)?f.fillStyle=k:(e[k._renderer.type].render.call(k,f,c),
f.fillStyle=k._renderer.gradient));p&&(d.isString(p)?f.strokeStyle=p:(e[p._renderer.type].render.call(p,f,c),f.strokeStyle=p._renderer.gradient));h&&(f.lineWidth=h);d.isNumber(l)&&(f.globalAlpha=l);f.save();f.scale(g,g);f.translate(s,m);e.isHidden.test(k)||f.fillText(c.value,0,0);e.isHidden.test(p)||f.strokeText(c.value,0,0);f.restore()},getBoundingClientRect:function(c,a){var d=e.ctx;d.font=[c._style,c._weight,c._size+"px/"+c._leading+"px",c._family].join(" ");d.textAlign="center";d.textBaseline=
c._baseline;var d=d.measureText(c._value).width,f=Math.max(c._size||c._leading);this._linewidth&&!e.isHidden.test(this._stroke)&&(f+=this._linewidth);var g=d/2,p=f/2;switch(e.alignments[c._alignment]||c._alignment){case e.alignments.left:a.left=0;a.right=d;break;case e.alignments.right:a.left=-d;a.right=0;break;default:a.left=-g,a.right=g}switch(c._baseline){case "bottom":a.top=-f;a.bottom=0;break;case "top":a.top=0;a.bottom=f;break;default:a.top=-p,a.bottom=p}a.width=d;a.height=f;a.centroid||(a.centroid=
{});a.centroid.x=g;a.centroid.y=p},render:function(c,d,g){if(!this._visible||!this._opacity)return this;var p=this.parent,h=p._matrix.manual||p._flagMatrix,k=this._matrix.manual||this._flagMatrix,l=this._flagVertices||this._flagFill||this._fill instanceof a.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof a.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||
this._stroke instanceof a.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof a.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._flagStroke||this._flagLinewidth||this._flagOpacity||p._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||
this._flagStyle||this._flagWeight||this._flagDecoration||!this._renderer.texture;this._update();if(h||k)this._renderer.matrix||(this._renderer.matrix=new a.Array(9)),this._matrix.toArray(!0,f),m(f,p._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*p._renderer.scale;l&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new a.Array(12)),this._renderer.opacity=this._opacity*p._renderer.opacity,e.text.getBoundingClientRect(this,this._renderer.rect),
e.getTriangles(this._renderer.rect,this._renderer.triangles),e.updateBuffer.call(e,c,this,d),e.updateTexture.call(e,c,this));if(!this._clip||g)return c.bindBuffer(c.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),c.vertexAttribPointer(d.textureCoords,2,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,this._renderer.texture),c.uniformMatrix3fv(d.matrix,!1,this._renderer.matrix),c.bindBuffer(c.ARRAY_BUFFER,this._renderer.buffer),c.vertexAttribPointer(d.position,2,c.FLOAT,!1,0,0),c.drawArrays(c.TRIANGLES,
0,6),this.flagReset()}},"linear-gradient":{render:function(c,a){if(c.canvas.getContext("2d")){this._update();if(!this._renderer.gradient||this._flagEndPoints||this._flagStops){this._renderer.gradient=c.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var d=0;d<this.stops.length;d++){var e=this.stops[d];this._renderer.gradient.addColorStop(e._offset,e._color)}}return this.flagReset()}}},"radial-gradient":{render:function(c,a){if(c.canvas.getContext("2d")){this._update();
if(!this._renderer.gradient||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.gradient=c.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var d=0;d<this.stops.length;d++){var e=this.stops[d];this._renderer.gradient.addColorStop(e._offset,e._color)}}return this.flagReset()}}},getTriangles:function(c,a){var d=c.top,e=c.left,f=c.right,g=c.bottom;a[0]=e;a[1]=d;a[2]=f;a[3]=d;a[4]=e;a[5]=g;a[6]=e;a[7]=g;a[8]=f;a[9]=d;
a[10]=f;a[11]=g},updateTexture:function(c,a){this[a._renderer.type].updateCanvas.call(e,a);a._renderer.texture&&c.deleteTexture(a._renderer.texture);c.bindBuffer(c.ARRAY_BUFFER,a._renderer.textureCoordsBuffer);a._renderer.texture=c.createTexture();c.bindTexture(c.TEXTURE_2D,a._renderer.texture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);0>=this.canvas.width||
0>=this.canvas.height||c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(a,e,f){d.isObject(e._renderer.buffer)&&a.deleteBuffer(e._renderer.buffer);e._renderer.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,e._renderer.buffer);a.enableVertexAttribArray(f.position);a.bufferData(a.ARRAY_BUFFER,e._renderer.triangles,a.STATIC_DRAW);d.isObject(e._renderer.textureCoordsBuffer)&&a.deleteBuffer(e._renderer.textureCoordsBuffer);e._renderer.textureCoordsBuffer=
a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,e._renderer.textureCoordsBuffer);a.enableVertexAttribArray(f.textureCoords);a.bufferData(a.ARRAY_BUFFER,this.uv,a.STATIC_DRAW)},program:{create:function(c,e){var f,g;f=c.createProgram();d.each(e,function(a){c.attachShader(f,a)});c.linkProgram(f);if(!c.getProgramParameter(f,c.LINK_STATUS))throw g=c.getProgramInfoLog(f),c.deleteProgram(f),new a.Utils.Error("unable to link program: "+g);return f}},shaders:{create:function(c,d,e){e=c.createShader(c[e]);c.shaderSource(e,
d);c.compileShader(e);if(!c.getShaderParameter(e,c.COMPILE_STATUS))throw d=c.getShaderInfoLog(e),c.deleteShader(e),new a.Utils.Error("unable to compile shader "+e+": "+d);return e},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",
fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"}};e.ctx=e.canvas.getContext("2d");var p=a[a.Types.webgl]=function(c){var f,g;this.domElement=c.domElement||document.createElement("canvas");this.scene=new a.Group;this.scene.parent=this;this._renderer={matrix:new a.Array(k),scale:1,opacity:1};this._flagMatrix=!0;c=d.defaults(c||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,
preserveDrawingBuffer:!0,overdraw:!1});this.overdraw=c.overdraw;c=this.ctx=this.domElement.getContext("webgl",c)||this.domElement.getContext("experimental-webgl",c);if(!this.ctx)throw new a.Utils.Error("unable to create a webgl context. Try using another renderer.");f=e.shaders.create(c,e.shaders.vertex,e.shaders.types.vertex);g=e.shaders.create(c,e.shaders.fragment,e.shaders.types.fragment);this.program=e.program.create(c,[f,g]);c.useProgram(this.program);this.program.position=c.getAttribLocation(this.program,
"a_position");this.program.matrix=c.getUniformLocation(this.program,"u_matrix");this.program.textureCoords=c.getAttribLocation(this.program,"a_textureCoords");c.disable(c.DEPTH_TEST);c.enable(c.BLEND);c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)};d.extend(p,{Utils:e});d.extend(p.prototype,a.Utils.Events,{setSize:function(a,e,f){this.width=a;this.height=e;this.ratio=d.isUndefined(f)?h(this.ctx):f;this.domElement.width=
a*this.ratio;this.domElement.height=e*this.ratio;d.extend(this.domElement.style,{width:a+"px",height:e+"px"});a*=this.ratio;e*=this.ratio;this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio;this._flagMatrix=!0;this.ctx.viewport(0,0,a,e);f=this.ctx.getUniformLocation(this.program,"u_resolution");this.ctx.uniform2f(f,a,e);return this},render:function(){var a=this.ctx;this.overdraw||a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);e.group.render.call(this.scene,a,this.program);
this._flagMatrix=!1;return this}})})(this.Two);(function(a){var m=a.Utils,l=a.Shape=function(){this._renderer={};this._renderer.flagMatrix=m.bind(l.FlagMatrix,this);this.id=a.Identifier+a.uniqueId();this.classList=[];this._matrix=new a.Matrix;this.translation=new a.Vector;this.rotation=0;this.scale=1};m.extend(l,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(k){Object.defineProperty(k,"translation",{enumerable:!0,get:function(){return this._translation},set:function(f){this._translation&&this._translation.unbind(a.Events.change,
this._renderer.flagMatrix);this._translation=f;this._translation.bind(a.Events.change,this._renderer.flagMatrix);l.FlagMatrix.call(this)}});Object.defineProperty(k,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(a){this._rotation=a;this._flagMatrix=!0}});Object.defineProperty(k,"scale",{enumerable:!0,get:function(){return this._scale},set:function(f){this._scale instanceof a.Vector&&this._scale.unbind(a.Events.change,this._renderer.flagMatrix);this._scale=f;this._scale instanceof
a.Vector&&this._scale.bind(a.Events.change,this._renderer.flagMatrix);this._flagScale=this._flagMatrix=!0}})}});m.extend(l.prototype,{_flagMatrix:!0,_flagScale:!1,_rotation:0,_scale:1,_translation:null,addTo:function(a){a.add(this);return this},clone:function(){var a=new l;a.translation.copy(this.translation);a.rotation=this.rotation;a.scale=this.scale;m.each(l.Properties,function(f){a[f]=this[f]},this);return a._update()},_update:function(k){!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,
this.translation.y),this._scale instanceof a.Vector?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation));k&&this.parent&&this.parent._update&&this.parent._update();return this},flagReset:function(){this._flagMatrix=this._flagScale=!1;return this}});l.MakeObservable(l.prototype)})(this.Two);(function(a){function m(d,c,e){var f,g,h,k,l,m,q,s,n=c.controls&&c.controls.right,y=d.controls&&d.controls.left;f=c.x;l=c.y;g=(n||c).x;m=(n||c).y;h=(y||d).x;q=(y||d).y;k=d.x;s=d.y;n&&c._relative&&(g+=c.x,m+=c.y);y&&d._relative&&(h+=d.x,q+=d.y);return a.Utils.getCurveLength(f,l,g,m,h,q,k,s,e)}function l(d,c,e){var f,g,h,k,l,m,q,s,n=c.controls&&c.controls.right,y=d.controls&&d.controls.left;f=c.x;l=c.y;g=(n||c).x;m=(n||c).y;h=(y||d).x;q=(y||d).y;k=d.x;s=d.y;n&&c._relative&&(g+=c.x,m+=c.y);y&&d._relative&&
(h+=d.x,q+=d.y);return a.Utils.subdivide(f,l,g,m,h,q,k,s,e)}var k=Math.min,f=Math.max,h=Math.round,g=a.Utils.getComputedMatrix,d=a.Utils;d.each(a.Commands,function(a,c){});var e=a.Path=function(f,c,g,h){a.Shape.call(this);this._renderer.type="path";this._renderer.flagVertices=d.bind(e.FlagVertices,this);this._renderer.bindVertices=d.bind(e.BindVertices,this);this._renderer.unbindVertices=d.bind(e.UnbindVertices,this);this._renderer.flagFill=d.bind(e.FlagFill,this);this._renderer.flagStroke=d.bind(e.FlagStroke,
this);this._closed=!!c;this._curved=!!g;this.beginning=0;this.ending=1;this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.cap="butt";this.join="miter";this.miter=4;this._vertices=[];this.vertices=f;this.automatic=!h};d.extend(e,{Properties:"fill stroke linewidth opacity visible cap join miter closed curved automatic beginning ending".split(" "),FlagVertices:function(){this._flagLength=this._flagVertices=!0},BindVertices:function(d){for(var c=d.length;c--;)d[c].bind(a.Events.change,
this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(d){for(var c=d.length;c--;)d[c].unbind(a.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(f){a.Shape.MakeObservable(f);d.each(e.Properties.slice(2,8),a.Utils.defineProperty,f);Object.defineProperty(f,"fill",{enumerable:!0,get:function(){return this._fill},set:function(c){(this._fill instanceof
a.Gradient||this._fill instanceof a.LinearGradient||this._fill instanceof a.RadialGradient||this._fill instanceof a.Texture)&&this._fill.unbind(a.Events.change,this._renderer.flagFill);this._fill=c;this._flagFill=!0;(this._fill instanceof a.Gradient||this._fill instanceof a.LinearGradient||this._fill instanceof a.RadialGradient||this._fill instanceof a.Texture)&&this._fill.bind(a.Events.change,this._renderer.flagFill)}});Object.defineProperty(f,"stroke",{enumerable:!0,get:function(){return this._stroke},
set:function(c){(this._stroke instanceof a.Gradient||this._stroke instanceof a.LinearGradient||this._stroke instanceof a.RadialGradient||this._stroke instanceof a.Texture)&&this._stroke.unbind(a.Events.change,this._renderer.flagStroke);this._stroke=c;this._flagStroke=!0;(this._stroke instanceof a.Gradient||this._stroke instanceof a.LinearGradient||this._stroke instanceof a.RadialGradient||this._stroke instanceof a.Texture)&&this._stroke.bind(a.Events.change,this._renderer.flagStroke)}});Object.defineProperty(f,
"length",{get:function(){this._flagLength&&this._updateLength();return this._length}});Object.defineProperty(f,"closed",{enumerable:!0,get:function(){return this._closed},set:function(a){this._closed=!!a;this._flagVertices=!0}});Object.defineProperty(f,"curved",{enumerable:!0,get:function(){return this._curved},set:function(a){this._curved=!!a;this._flagVertices=!0}});Object.defineProperty(f,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(a){if(a!==this._automatic){var e=
(this._automatic=!!a)?"ignore":"listen";d.each(this.vertices,function(a){a[e]()})}}});Object.defineProperty(f,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(a){this._beginning=a;this._flagVertices=!0}});Object.defineProperty(f,"ending",{enumerable:!0,get:function(){return this._ending},set:function(a){this._ending=a;this._flagVertices=!0}});Object.defineProperty(f,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(c){var e=d.bind(this._renderer.bindVertices,
this),f=d.bind(this._renderer.unbindVertices,this);this._collection&&this._collection.unbind(a.Events.insert,e).unbind(a.Events.remove,f);this._collection=new a.Utils.Collection((c||[]).slice(0));this._collection.bind(a.Events.insert,e).bind(a.Events.remove,f);e(this._collection)}});Object.defineProperty(f,"clip",{enumerable:!0,get:function(){return this._clip},set:function(a){this._clip=a;this._flagClip=!0}})}});d.extend(e.prototype,a.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,
_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,clone:function(f){f=f||this.parent;var c=d.map(this.vertices,function(a){return a.clone()}),g=new e(c,this.closed,this.curved,!this.automatic);d.each(a.Path.Properties,function(a){g[a]=this[a]},this);g.translation.copy(this.translation);
g.rotation=this.rotation;g.scale=this.scale;f.add(g);return g},toObject:function(){var e={vertices:d.map(this.vertices,function(a){return a.toObject()})};d.each(a.Shape.Properties,function(a){e[a]=this[a]},this);e.translation=this.translation.toObject;e.rotation=this.rotation;e.scale=this.scale;return e},noFill:function(){this.fill="transparent";return this},noStroke:function(){this.stroke="transparent";return this},corner:function(){var a=this.getBoundingClientRect(!0);a.centroid={x:a.left+a.width/
2,y:a.top+a.height/2};d.each(this.vertices,function(c){c.addSelf(a.centroid)});return this},center:function(){var a=this.getBoundingClientRect(!0);a.centroid={x:a.left+a.width/2,y:a.top+a.height/2};d.each(this.vertices,function(c){c.subSelf(a.centroid)});return this},remove:function(){if(!this.parent)return this;this.parent.remove(this);return this},getBoundingClientRect:function(a){var c,d,e,h,l,m=Infinity,w=-Infinity,t=Infinity,q=-Infinity;this._update(!0);a=a?this._matrix:g(this);c=this.linewidth/
2;d=this._vertices.length;if(0>=d)return h=a.multiply(0,0,1),{top:h.y,left:h.x,right:h.x,bottom:h.y,width:0,height:0};for(l=0;l<d;l++)h=this._vertices[l],e=h.x,h=h.y,h=a.multiply(e,h,1),t=k(h.y-c,t),m=k(h.x-c,m),w=f(h.x+c,w),q=f(h.y+c,q);return{top:t,left:m,right:w,bottom:q,width:w-m,height:q-t}},getPointAt:function(e,c){var f,g,h,k,l,m,t,q,s,n,y,z;t=this.length*Math.min(Math.max(e,0),1);q=this.vertices.length;s=q-1;m=f=null;n=0;g=this._lengths.length;for(h=0;n<g;n++){if(h+this._lengths[n]>t){f=this.vertices[this.closed?
a.Utils.mod(n,q):n];m=this.vertices[Math.min(Math.max(n-1,0),s)];t-=h;e=t/this._lengths[n];break}h+=this._lengths[n]}if(d.isNull(f)||d.isNull(m))return null;z=m.controls&&m.controls.right;y=f.controls&&f.controls.left;g=m.x;t=m.y;h=(z||m).x;q=(z||m).y;k=(y||f).x;s=(y||f).y;l=f.x;n=f.y;z&&m._relative&&(h+=m.x,q+=m.y);y&&f._relative&&(k+=f.x,s+=f.y);f=a.Utils.getPointOnCubicBezier(e,g,h,k,l);m=a.Utils.getPointOnCubicBezier(e,t,q,s,n);return d.isObject(c)?(c.x=f,c.y=m,c):new a.Vector(f,m)},plot:function(){if(this.curved)return a.Utils.getCurveFromPoints(this._vertices,
this.closed),this;for(var d=0;d<this._vertices.length;d++)this._vertices[d]._command=0===d?a.Commands.move:a.Commands.line;return this},subdivide:function(e){this._update();var c=this.vertices.length-1,f=this.vertices[c],g=this._closed||this.vertices[c]._command===a.Commands.close,h=[];d.each(this.vertices,function(k,m){if(!(0>=m)||g)if(k.command===a.Commands.move)h.push(new a.Anchor(f.x,f.y)),0<m&&(h[h.length-1].command=a.Commands.line);else{var w=l(k,f,e);h=h.concat(w);d.each(w,function(c,d){c.command=
0>=d&&f.command===a.Commands.move?a.Commands.move:a.Commands.line});m>=c&&(this._closed&&this._automatic?(f=k,w=l(k,f,e),h=h.concat(w),d.each(w,function(c,d){c.command=0>=d&&f.command===a.Commands.move?a.Commands.move:a.Commands.line})):g&&h.push(new a.Anchor(k.x,k.y)),h[h.length-1].command=g?a.Commands.close:a.Commands.line)}f=k},this);this._curved=this._automatic=!1;this.vertices=h;return this},_updateLength:function(e){this._update();var c=this.vertices.length-1,f=this.vertices[c],g=this._closed||
this.vertices[c]._command===a.Commands.close,h=0;d.isUndefined(this._lengths)&&(this._lengths=[]);d.each(this.vertices,function(d,k){0>=k&&!g||d.command===a.Commands.move?(f=d,this._lengths[k]=0):(this._lengths[k]=m(d,f,e),h+=this._lengths[k],k>=c&&g&&(f=d,this._lengths[k+1]=m(d,f,e),h+=this._lengths[k+1]),f=d)},this);this._length=h;return this},_update:function(){if(this._flagVertices){var d=this.vertices.length-1,c;c=h(this._beginning*d);d=h(this._ending*d);this._vertices.length=0;for(var e=c;e<
d+1;e++)c=this.vertices[e],this._vertices.push(c);this._automatic&&this.plot()}a.Shape.prototype._update.apply(this,arguments);return this},flagReset:function(){this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1;a.Shape.prototype.flagReset.call(this);return this}});e.MakeObservable(e.prototype)})(this.Two);(function(a){var m=a.Path,l=a.Utils,k=a.Line=function(f,h,g,d){g=(g-f)/2;d=(d-h)/2;m.call(this,[new a.Anchor(-g,-d),new a.Anchor(g,d)]);this.translation.set(f+g,h+d)};l.extend(k.prototype,m.prototype);m.MakeObservable(k.prototype)})(this.Two);(function(a){var m=a.Path,l=a.Utils,k=a.Rectangle=function(f,h,g,d){m.call(this,[new a.Anchor,new a.Anchor,new a.Anchor,new a.Anchor],!0);this.width=g;this.height=d;this._update();this.translation.set(f,h)};l.extend(k,{Properties:["width","height"],MakeObservable:function(f){m.MakeObservable(f);l.each(k.Properties,a.Utils.defineProperty,f)}});l.extend(k.prototype,m.prototype,{_width:0,_height:0,_flagWidth:0,_flagHeight:0,_update:function(){if(this._flagWidth||this._flagHeight){var a=this._width/2,
h=this._height/2;this.vertices[0].set(-a,-h);this.vertices[1].set(a,-h);this.vertices[2].set(a,h);this.vertices[3].set(-a,h)}m.prototype._update.call(this);return this},flagReset:function(){this._flagWidth=this._flagHeight=!1;m.prototype.flagReset.call(this);return this}});k.MakeObservable(k.prototype)})(this.Two);(function(a){var m=a.Path,l=2*Math.PI,k=Math.cos,f=Math.sin,h=a.Utils,g=a.Ellipse=function(d,e,f,c){h.isNumber(c)||(c=f);var g=h.map(h.range(a.Resolution),function(c){return new a.Anchor},this);m.call(this,g,!0,!0);this.width=2*f;this.height=2*c;this._update();this.translation.set(d,e)};h.extend(g,{Properties:["width","height"],MakeObservable:function(d){m.MakeObservable(d);h.each(g.Properties,a.Utils.defineProperty,d)}});h.extend(g.prototype,m.prototype,{_width:0,_height:0,_flagWidth:!1,_flagHeight:!1,
_update:function(){if(this._flagWidth||this._flagHeight)for(var a=0,e=this.vertices.length;a<e;a++){var g=a/e*l,c=this._width*k(g)/2,g=this._height*f(g)/2;this.vertices[a].set(c,g)}m.prototype._update.call(this);return this},flagReset:function(){this._flagWidth=this._flagHeight=!1;m.prototype.flagReset.call(this);return this}});g.MakeObservable(g.prototype)})(this.Two);(function(a){var m=a.Path,l=2*Math.PI,k=Math.cos,f=Math.sin,h=a.Utils,g=a.Circle=function(d,e,f){var c=h.map(h.range(a.Resolution),function(c){return new a.Anchor},this);m.call(this,c,!0,!0);this.radius=f;this._update();this.translation.set(d,e)};h.extend(g,{Properties:["radius"],MakeObservable:function(d){m.MakeObservable(d);h.each(g.Properties,a.Utils.defineProperty,d)}});h.extend(g.prototype,m.prototype,{_radius:0,_flagRadius:!1,_update:function(){if(this._flagRadius)for(var a=0,e=this.vertices.length;a<
e;a++){var g=a/e*l,c=this._radius*k(g),g=this._radius*f(g);this.vertices[a].set(c,g)}m.prototype._update.call(this);return this},flagReset:function(){this._flagRadius=!1;m.prototype.flagReset.call(this);return this}});g.MakeObservable(g.prototype)})(this.Two);(function(a){var m=a.Path,l=2*Math.PI,k=Math.cos,f=Math.sin,h=a.Utils,g=a.Polygon=function(d,e,f,c){c=Math.max(c||0,3);var g=h.map(h.range(c),function(c){return new a.Anchor});m.call(this,g,!0);this.width=2*f;this.height=2*f;this.sides=c;this._update();this.translation.set(d,e)};h.extend(g,{Properties:["width","height","sides"],MakeObservable:function(d){m.MakeObservable(d);h.each(g.Properties,a.Utils.defineProperty,d)}});h.extend(g.prototype,m.prototype,{_width:0,_height:0,_sides:0,_flagWidth:!1,
_flagHeight:!1,_flagSides:!1,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var d=this._sides,e=this.vertices.length;e>d&&this.vertices.splice(d-1,e-d);for(var g=0;g<d;g++){var c=l*((g+0.5)/d)+Math.PI/2,h=this._width*k(c),c=this._height*f(c);g>=e?this.vertices.push(new a.Anchor(h,c)):this.vertices[g].set(h,c)}}m.prototype._update.call(this);return this},flagReset:function(){this._flagWidth=this._flagHeight=this._flagSides=!1;m.prototype.flagReset.call(this);return this}});
g.MakeObservable(g.prototype)})(this.Two);(function(a){function m(a,e){for(;0>a;)a+=e;return a%e}var l=a.Path,k=2*Math.PI,f=Math.PI/2,h=a.Utils,g=a.ArcSegment=function(d,e,f,c,g,k,m){m=h.map(h.range(m||3*a.Resolution),function(){return new a.Anchor});l.call(this,m,!1,!1,!0);this.innerRadius=f;this.outerRadius=c;this.startAngle=g;this.endAngle=k;this._update();this.translation.set(d,e)};h.extend(g,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(d){l.MakeObservable(d);h.each(g.Properties,a.Utils.defineProperty,
d)}});h.extend(g.prototype,l.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:k,_innerRadius:0,_outerRadius:0,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var d=this._startAngle,e=this._endAngle,g=this._innerRadius,c=this._outerRadius,h=m(d,k)===m(e,k),u=0<g,C=this.vertices,x=u?C.length/2:C.length,v,w=0;h?x--:u||(x-=2);for(var t=0,q=x-1;t<x;t++){var s=t/q,n=C[w],s=s*(e-d)+
d,y=(e-d)/x,z=c*Math.cos(s),B=c*Math.sin(s);switch(t){case 0:v=a.Commands.move;break;default:v=a.Commands.curve}n.command=v;n.x=z;n.y=B;n.controls.left.clear();n.controls.right.clear();n.command===a.Commands.curve&&(v=c*y/Math.PI,n.controls.left.x=v*Math.cos(s-f),n.controls.left.y=v*Math.sin(s-f),n.controls.right.x=v*Math.cos(s+f),n.controls.right.y=v*Math.sin(s+f),1===t&&n.controls.left.multiplyScalar(2),t===q&&n.controls.right.multiplyScalar(2));w++}if(u)for(h?(C[w].command=a.Commands.close,w++):
(x--,q=x-1),t=0;t<x;t++)s=t/q,n=C[w],s=(1-s)*(e-d)+d,y=(e-d)/x,z=g*Math.cos(s),B=g*Math.sin(s),v=a.Commands.curve,0>=t&&(v=h?a.Commands.move:a.Commands.line),n.command=v,n.x=z,n.y=B,n.controls.left.clear(),n.controls.right.clear(),n.command===a.Commands.curve&&(v=g*y/Math.PI,n.controls.left.x=v*Math.cos(s+f),n.controls.left.y=v*Math.sin(s+f),n.controls.right.x=v*Math.cos(s-f),n.controls.right.y=v*Math.sin(s-f),1===t&&n.controls.left.multiplyScalar(2),t===q&&n.controls.right.multiplyScalar(2)),w++;
else h||(C[w].command=a.Commands.line,C[w].x=0,C[w].y=0,w++);C[w].command=a.Commands.close}l.prototype._update.call(this);return this},flagReset:function(){l.prototype.flagReset.call(this);this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1;return this}});g.MakeObservable(g.prototype)})(this.Two);(function(a){var m=a.Path,l=2*Math.PI,k=Math.cos,f=Math.sin,h=a.Utils,g=a.Star=function(d,e,f,c,g){h.isNumber(c)||(c=f/2);if(!h.isNumber(g)||0>=g)g=5;var k=h.map(h.range(2*g),function(c){return new a.Anchor});m.call(this,k,!0);this.innerRadius=c;this.outerRadius=f;this.sides=g;this._update();this.translation.set(d,e)};h.extend(g,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(d){m.MakeObservable(d);h.each(g.Properties,a.Utils.defineProperty,d)}});h.extend(g.prototype,m.prototype,
{_innerRadius:0,_outerRadius:0,_sides:0,_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var d=2*this._sides,e=this.vertices.length;e>d&&this.vertices.splice(d-1,e-d);for(var g=0;g<d;g++){var c=l*((g+0.5)/d),h=g%2?this._innerRadius:this._outerRadius,u=h*k(c),c=h*f(c);g>=e?this.vertices.push(new a.Anchor(u,c)):this.vertices[g].set(u,c)}}m.prototype._update.call(this);return this},flagReset:function(){this._flagInnerRadius=
this._flagOuterRadius=this._flagSides=!1;m.prototype.flagReset.call(this);return this}});g.MakeObservable(g.prototype)})(this.Two);(function(a){var m=a.Path,l=a.Utils,k=a.RoundedRectangle=function(f,h,g,d,e){l.isNumber(e)||(e=Math.floor(Math.min(g,d)/12));var k=l.map(l.range(10),function(c){return new a.Anchor(0,0,0,0,0,0,0===c?a.Commands.move:a.Commands.curve)});k[k.length-1].command=a.Commands.close;m.call(this,k,!1,!1,!0);this.width=g;this.height=d;this.radius=e;this._update();this.translation.set(f,h)};l.extend(k,{Properties:["width","height","radius"],MakeObservable:function(f){m.MakeObservable(f);l.each(k.Properties,a.Utils.defineProperty,
f)}});l.extend(k.prototype,m.prototype,{_width:0,_height:0,_radius:0,_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var a=this._width,h=this._height,g=Math.min(Math.max(this._radius,0),Math.min(a,h)),a=a/2,d=h/2,h=this.vertices[0];h.x=-(a-g);h.y=-d;h=this.vertices[1];h.x=a-g;h.y=-d;h.controls.left.clear();h.controls.right.x=g;h.controls.right.y=0;h=this.vertices[2];h.x=a;h.y=-(d-g);h.controls.right.clear();h.controls.left.clear();
h=this.vertices[3];h.x=a;h.y=d-g;h.controls.left.clear();h.controls.right.x=0;h.controls.right.y=g;h=this.vertices[4];h.x=a-g;h.y=d;h.controls.right.clear();h.controls.left.clear();h=this.vertices[5];h.x=-(a-g);h.y=d;h.controls.left.clear();h.controls.right.x=-g;h.controls.right.y=0;h=this.vertices[6];h.x=-a;h.y=d-g;h.controls.left.clear();h.controls.right.clear();h=this.vertices[7];h.x=-a;h.y=-(d-g);h.controls.left.clear();h.controls.right.x=0;h.controls.right.y=-g;h=this.vertices[8];h.x=-(a-g);
h.y=-d;h.controls.left.clear();h.controls.right.clear();h=this.vertices[9];h.copy(this.vertices[8])}m.prototype._update.call(this);return this},flagReset:function(){this._flagWidth=this._flagHeight=this._flagRadius=!1;m.prototype.flagReset.call(this);return this}});k.MakeObservable(k.prototype)})(this.Two);(function(a){var m=a.Utils.getComputedMatrix,l=a.Utils;(this.document?this.document.createElement("canvas"):{getContext:l.identity}).getContext("2d");var k=a.Text=function(f,h,g,d){a.Shape.call(this);this._renderer.type="text";this._renderer.flagFill=l.bind(k.FlagFill,this);this._renderer.flagStroke=l.bind(k.FlagStroke,this);this.value=f;l.isNumber(h)&&(this.translation.x=h);l.isNumber(g)&&(this.translation.y=g);if(!l.isObject(d))return this;l.each(a.Text.Properties,function(a){a in d&&(this[a]=d[a])},
this)};l.extend(a.Text,{Properties:"value family size leading alignment linewidth style weight decoration baseline opacity visible fill stroke".split(" "),FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(f){a.Shape.MakeObservable(f);l.each(a.Text.Properties.slice(0,12),a.Utils.defineProperty,f);Object.defineProperty(f,"fill",{enumerable:!0,get:function(){return this._fill},set:function(f){(this._fill instanceof a.Gradient||this._fill instanceof
a.LinearGradient||this._fill instanceof a.RadialGradient||this._fill instanceof a.Texture)&&this._fill.unbind(a.Events.change,this._renderer.flagFill);this._fill=f;this._flagFill=!0;(this._fill instanceof a.Gradient||this._fill instanceof a.LinearGradient||this._fill instanceof a.RadialGradient||this._fill instanceof a.Texture)&&this._fill.bind(a.Events.change,this._renderer.flagFill)}});Object.defineProperty(f,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(f){(this._stroke instanceof
a.Gradient||this._stroke instanceof a.LinearGradient||this._stroke instanceof a.RadialGradient||this._stroke instanceof a.Texture)&&this._stroke.unbind(a.Events.change,this._renderer.flagStroke);this._stroke=f;this._flagStroke=!0;(this._stroke instanceof a.Gradient||this._stroke instanceof a.LinearGradient||this._stroke instanceof a.RadialGradient||this._stroke instanceof a.Texture)&&this._stroke.bind(a.Events.change,this._renderer.flagStroke)}});Object.defineProperty(f,"clip",{enumerable:!0,get:function(){return this._clip},
set:function(a){this._clip=a;this._flagClip=!0}})}});l.extend(a.Text.prototype,a.Shape.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",
_linewidth:1,_opacity:1,_visible:!0,_clip:!1,remove:function(){if(!this.parent)return this;this.parent.remove(this);return this},clone:function(f){f=f||this.parent;var h=new a.Text(this.value);h.translation.copy(this.translation);h.rotation=this.rotation;h.scale=this.scale;l.each(a.Text.Properties,function(a){h[a]=this[a]},this);f.add(h);return h},toObject:function(){var f={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};l.each(a.Text.Properties,function(a){f[a]=this[a]},
this);return f},noStroke:function(){this.stroke="transparent";return this},noFill:function(){this.fill="transparent";return this},getBoundingClientRect:function(a){this._update(!0);a=(a?this._matrix:m(this)).multiply(0,0,1);return{top:a.x,left:a.y,right:a.x,bottom:a.y,width:0,height:0}},flagReset:function(){this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpaicty=this._flagVisible=this._flagClip=this._flagDecoration=
this._flagBaseline=!1;a.Shape.prototype.flagReset.call(this);return this}});a.Text.MakeObservable(a.Text.prototype)})(this.Two);(function(a){var m=a.Utils,l=a.Stop=function(a,h,g){this._renderer={};this._renderer.type="stop";this.offset=m.isNumber(a)?a:0>=l.Index?0:1;this.opacity=m.isNumber(g)?g:1;this.color=m.isString(h)?h:0>=l.Index?"#fff":"#000";l.Index=(l.Index+1)%2};m.extend(l,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(a){m.each(l.Properties,function(a){var f="_"+a,d="_flag"+a.charAt(0).toUpperCase()+a.slice(1);Object.defineProperty(this,a,{enumerable:!0,get:function(){return this[f]},set:function(a){this[f]=
a;this[d]=!0;this.parent&&(this.parent._flagStops=!0)}})},a)}});m.extend(l.prototype,a.Utils.Events,{clone:function(){var a=new l;m.each(l.Properties,function(h){a[h]=this[h]},this);return a},toObject:function(){var a={};m.each(l.Properties,function(h){a[h]=this[h]},this);return a},flagReset:function(){this._flagOffset=this._flagColor=this._flagOpacity=!1;return this}});l.MakeObservable(l.prototype);var k=a.Gradient=function(f){a.Shape.call(this);this._renderer.type="gradient";this._renderer.flagStops=
m.bind(k.FlagStops,this);this._renderer.bindStops=m.bind(k.BindStops,this);this._renderer.unbindStops=m.bind(k.UnbindStops,this);this.spread="pad";this.stops=f};m.extend(k,{Stop:l,Properties:["spread"],MakeObservable:function(f){a.Shape.MakeObservable(f);m.each(k.Properties,a.Utils.defineProperty,f);Object.defineProperty(f,"stops",{enumerable:!0,get:function(){return this._stops},set:function(f){var g=this._renderer.bindStops,d=this._renderer.unbindStops;this._stops&&this._stops.unbind(a.Events.insert,
g).unbind(a.Events.remove,d);this._stops=new a.Utils.Collection((f||[]).slice(0));this._stops.bind(a.Events.insert,g).bind(a.Events.remove,d);g(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(f){for(var h=f.length;h--;)f[h].bind(a.Events.change,this._renderer.flagStops),f[h].parent=this;this._renderer.flagStops()},UnbindStops:function(f){for(var h=f.length;h--;)f[h].unbind(a.Events.change,this._renderer.flagStops),delete f[h].parent;this._renderer.flagStops()}});m.extend(k.prototype,
a.Utils.Events,a.Shape.prototype,{_flagStops:!1,_flagSpread:!1,clone:function(f){f=f||this.parent;var h=m.map(this.stops,function(a){return a.clone()}),g=new k(h);m.each(a.Gradient.Properties,function(a){g[a]=this[a]},this);g.translation.copy(this.translation);g.rotation=this.rotation;g.scale=this.scale;f.add(g);return g},toObject:function(){var a={stops:m.map(this.stops,function(a){return a.toObject()})};m.each(k.Properties,function(h){a[h]=this[h]},this);return a},_update:function(){(this._flagSpread||
this._flagStops)&&this.trigger(a.Events.change);a.Shape.prototype._update.call(this);return this},flagReset:function(){this._flagSpread=this._flagStops=!1;a.Shape.prototype.flagReset.call(this);return this}});k.MakeObservable(k.prototype)})(this.Two);(function(a){var m=a.Utils,l=a.LinearGradient=function(k,f,h,g,d){a.Gradient.call(this,d);this._renderer.type="linear-gradient";d=m.bind(l.FlagEndPoints,this);this.left=(new a.Vector).bind(a.Events.change,d);this.right=(new a.Vector).bind(a.Events.change,d);m.isNumber(k)&&(this.left.x=k);m.isNumber(f)&&(this.left.y=f);m.isNumber(h)&&(this.right.x=h);m.isNumber(g)&&(this.right.y=g)};m.extend(l,{Stop:a.Gradient.Stop,MakeObservable:function(k){a.Gradient.MakeObservable(k)},FlagEndPoints:function(){this._flagEndPoints=
!0}});m.extend(l.prototype,a.Gradient.prototype,{_flagEndPoints:!1,clone:function(k){k=k||this.parent;var f=m.map(this.stops,function(a){return a.clone()}),h=new l(this.left._x,this.left._y,this.right._x,this.right._y,f);m.each(a.Gradient.Properties,function(a){h[a]=this[a]},this);k.add(h);return h},toObject:function(){var k=a.Gradient.prototype.toObject.call(this);k.left=this.left.toObject();k.right=this.right.toObject();return k},_update:function(){(this._flagEndPoints||this._flagSpread||this._flagStops)&&
this.trigger(a.Events.change);a.Shape.prototype._update.call(this);return this},flagReset:function(){this._flagEndPoints=!1;a.Gradient.prototype.flagReset.call(this);return this}});l.MakeObservable(l.prototype)})(this.Two);(function(a){var m=a.Utils,l=a.RadialGradient=function(k,f,h,g,d,e){a.Gradient.call(this,g);this._renderer.type="radial-gradient";this.center=(new a.Vector).bind(a.Events.change,m.bind(function(){this._flagCenter=!0},this));this.radius=m.isNumber(h)?h:20;this.focal=(new a.Vector).bind(a.Events.change,m.bind(function(){this._flagFocal=!0},this));m.isNumber(k)&&(this.center.x=k);m.isNumber(f)&&(this.center.y=f);this.focal.copy(this.center);m.isNumber(d)&&(this.focal.x=d);m.isNumber(e)&&(this.focal.y=
e)};m.extend(l,{Stop:a.Gradient.Stop,Properties:["radius"],MakeObservable:function(k){a.Gradient.MakeObservable(k);m.each(l.Properties,a.Utils.defineProperty,k)}});m.extend(l.prototype,a.Gradient.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,clone:function(k){k=k||this.parent;var f=m.map(this.stops,function(a){return a.clone()}),h=new l(this.center._x,this.center._y,this._radius,f,this.focal._x,this.focal._y);m.each(a.Gradient.Properties.concat(l.Properties),function(a){h[a]=this[a]},this);
k.add(h);return h},toObject:function(){var k=a.Gradient.prototype.toObject.call(this);m.each(l.Properties,function(a){k[a]=this[a]},this);k.center=this.center.toObject();k.focal=this.focal.toObject();return k},_update:function(){(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(a.Events.change);a.Shape.prototype._update.call(this);return this},flagReset:function(){this._flagRadius=this._flagCenter=this._flagFocal=!1;a.Gradient.prototype.flagReset.call(this);
return this}});l.MakeObservable(l.prototype)})(this.Two);(function(a){var m=a.Utils,l=a.Texture=function(k,f){a.Shape.call(this);this._renderer.type="texture";if(m.isFunction(f)){var h=m.bind(function(){this.unbind(a.Events.load,h);m.isFunction(f)&&f()},this);this.bind(a.Events.load,h)}m.isString(k)?this.src=k:m.isElement(k)&&(this.image=k)};m.extend(l,{Properties:["src","image","loaded"],ImageRegistry:new a.Registry,getImage:function(a){if(l.ImageRegistry.contains(a))return l.ImageRegistry.get(a);a=document.createElement("img");a.crossOrigin="anonymous";
return a},Register:{canvas:function(a,f){a._src="#"+a.id;l.ImageRegistry.add(a.path,a.image);m.isFunction(f)&&f()},image:function(k,f){var h=function(a){l.ImageRegistry.add(k.path,k.image);k.image.removeEventListener("load",h,!1);k.image.removeEventListener("error",g,!1);m.isFunction(f)&&f()},g=function(d){k.image.removeEventListener("load",h,!1);k.image.removeEventListener("error",g,!1);throw new a.Utils.Error("unable to load "+k.src);};k.image.addEventListener("load",h,!1);k.image.addEventListener("error",
g,!1);k.image.src=k.src}},load:function(a,f){var h=a.image;a._flagImage&&(/canvas/i.test(h.nodeName)?l.Register.canvas(a,f):(a._src=h.src,l.Register.image(a,f)));a._flagSrc&&(h||(a.image=l.getImage(a.src)),l.Register.image(a,f))},MakeObservable:function(k){a.Shape.MakeObservable(k);m.each(l.Properties,a.Utils.defineProperty,k)}});m.extend(l.prototype,a.Utils.Events,a.Shape.prototype,{_flagSrc:!1,_flagImage:!1,_flagLoaded:!1,_src:"",_image:null,_loaded:!1,clone:function(){return new l(this.src)},toObject:function(){return{src:this.src,
image:this.image}},_update:function(){if(this._flagSrc||this._flagImage)this.trigger(a.Events.change),this.loaded=!1,l.load(this,m.bind(function(){this.loaded=!0;this.trigger(a.Events.change).trigger(a.Events.load)},this));return this},flagReset:function(){this._flagSrc=this._flagImage=this._flagLoaded=!1;return this}});l.MakeObservable(l.prototype)})(this.Two);(function(a){function m(a,e){var g=a.parent,c;g===e?(this.additions.push(a),this._flagAdditions=!0):(g&&g.children.ids[a.id]&&(c=f.indexOf(g.children,a),g.children.splice(c,1),c=f.indexOf(g.additions,a),0<=c?g.additions.splice(c,1):(g.subtractions.push(a),g._flagSubtractions=!0)),e?(a.parent=e,this.additions.push(a),this._flagAdditions=!0):(c=f.indexOf(this.additions,a),0<=c?this.additions.splice(c,1):(this.subtractions.push(a),this._flagSubtractions=!0),delete a.parent))}var l=Math.min,k=Math.max,
f=a.Utils,h=function(){a.Utils.Collection.apply(this,arguments);Object.defineProperty(this,"_events",{value:{},enumerable:!1});this.ids={};this.on(a.Events.insert,this.attach);this.on(a.Events.remove,this.detach);h.prototype.attach.apply(this,arguments)};h.prototype=new a.Utils.Collection;h.prototype.constructor=h;f.extend(h.prototype,{attach:function(a){for(var e=0;e<a.length;e++)this.ids[a[e].id]=a[e];return this},detach:function(a){for(var e=0;e<a.length;e++)delete this.ids[a[e].id];return this}});
var g=a.Group=function(){a.Shape.call(this,!0);this._renderer.type="group";this.additions=[];this.subtractions=[];this.children=arguments};f.extend(g,{Children:h,InsertChildren:function(a){for(var e=0;e<a.length;e++)m.call(this,a[e],this)},RemoveChildren:function(a){for(var e=0;e<a.length;e++)m.call(this,a[e])},OrderChildren:function(a){this._flagOrder=!0},MakeObservable:function(d){var e=a.Path.Properties.slice(0),k=f.indexOf(e,"opacity");0<=k&&(e.splice(k,1),Object.defineProperty(d,"opacity",{enumerable:!0,
get:function(){return this._opacity},set:function(a){this._flagOpacity=this._opacity!=a;this._opacity=a}}));a.Shape.MakeObservable(d);g.MakeGetterSetters(d,e);Object.defineProperty(d,"children",{enumerable:!0,get:function(){return this._children},set:function(c){var d=f.bind(g.InsertChildren,this),e=f.bind(g.RemoveChildren,this),k=f.bind(g.OrderChildren,this);this._children&&this._children.unbind();this._children=new h(c);this._children.bind(a.Events.insert,d);this._children.bind(a.Events.remove,
e);this._children.bind(a.Events.order,k)}});Object.defineProperty(d,"mask",{enumerable:!0,get:function(){return this._mask},set:function(a){this._mask=a;this._flagMask=!0;a.clip||(a.clip=!0)}})},MakeGetterSetters:function(a,e){f.isArray(e)||(e=[e]);f.each(e,function(e){g.MakeGetterSetter(a,e)})},MakeGetterSetter:function(a,e){var g="_"+e;Object.defineProperty(a,e,{enumerable:!0,get:function(){return this[g]},set:function(a){this[g]=a;f.each(this.children,function(d){d[e]=a})}})}});f.extend(g.prototype,
a.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_mask:null,clone:function(a){a=a||this.parent;var e=new g;a.add(e);f.map(this.children,function(a){return a.clone(e)});e.translation.copy(this.translation);e.rotation=this.rotation;e.scale=this.scale;return e},toObject:function(){var a={children:[],
translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};f.each(this.children,function(e,f){a.children[f]=e.toObject()},this);return a},corner:function(){var a=this.getBoundingClientRect(!0),e={x:a.left,y:a.top};this.children.forEach(function(a){a.translation.subSelf(e)});return this},center:function(){var a=this.getBoundingClientRect(!0);a.centroid={x:a.left+a.width/2,y:a.top+a.height/2};this.children.forEach(function(e){e.translation.subSelf(a.centroid)});return this},getById:function(a){var e=
function(a,c){if(a.id===c)return a;if(a.children)for(var d=a.children.length;d--;){var f=e(a.children[d],c);if(f)return f}};return e(this,a)||null},getByClassName:function(a){var e=[],f=function(a,d){-1!=a.classList.indexOf(d)?e.push(a):a.children&&a.children.forEach(function(a){f(a,d)});return e};return f(this,a)},getByType:function(d){var e=[],f=function(c,d){for(var g in c.children)c.children[g]instanceof d?e.push(c.children[g]):c.children[g]instanceof a.Group&&f(c.children[g],d);return e};return f(this,
d)},add:function(a){a=a instanceof Array?a.slice():f.toArray(arguments);for(var e=0;e<a.length;e++)a[e]&&a[e].id&&this.children.push(a[e]);return this},remove:function(a){var e=this.parent;if(0>=arguments.length&&e)return e.remove(this),this;a=a instanceof Array?a.slice():f.toArray(arguments);for(e=0;e<a.length;e++)a[e]&&this.children.ids[a[e].id]&&this.children.splice(f.indexOf(this.children,a[e]),1);return this},getBoundingClientRect:function(a){var e;this._update(!0);var g=Infinity,c=-Infinity,
h=Infinity,m=-Infinity;this.children.forEach(function(C){/(linear-gradient|radial-gradient|gradient)/.test(C._renderer.type)||(e=C.getBoundingClientRect(a),f.isNumber(e.top)&&(f.isNumber(e.left)&&f.isNumber(e.right)&&f.isNumber(e.bottom))&&(h=l(e.top,h),g=l(e.left,g),c=k(e.right,c),m=k(e.bottom,m)))},this);return{top:h,left:g,right:c,bottom:m,width:c-g,height:m-h}},noFill:function(){this.children.forEach(function(a){a.noFill()});return this},noStroke:function(){this.children.forEach(function(a){a.noStroke()});
return this},subdivide:function(){var a=arguments;this.children.forEach(function(e){e.subdivide.apply(e,a)});return this},flagReset:function(){this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1);this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1);this._flagOrder=this._flagMask=this._flagOpacity=!1;a.Shape.prototype.flagReset.call(this);return this}});g.MakeObservable(g.prototype)})(this.Two);
