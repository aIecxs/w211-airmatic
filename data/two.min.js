(function(){function n(k,a,c){if(k===a)return 0!==k||1/k==1/a;if(null==k||null==a)return k===a;k._chain&&(k=k._wrapped);a._chain&&(a=a._wrapped);if(k.isEqual&&d.isFunction(k.isEqual))return k.isEqual(a);if(a.isEqual&&d.isFunction(a.isEqual))return a.isEqual(k);var g=x.call(k);if(g!=x.call(a))return!1;switch(g){case "[object String]":return k==String(a);case "[object Number]":return k!=+k?a!=+a:0==k?1/k==1/a:k==+a;case "[object Date]":case "[object Boolean]":return+k==+a;case "[object RegExp]":return k.source==
a.source&&k.global==a.global&&k.multiline==a.multiline&&k.ignoreCase==a.ignoreCase}if("object"!=typeof k||"object"!=typeof a)return!1;for(var b=c.length;b--;)if(c[b]==k)return!0;c.push(k);var b=0,f=!0;if("[object Array]"==g){if(b=k.length,f=b==a.length)for(;b--&&(f=b in k==b in a&&n(k[b],a[b],c)););}else{if("constructor"in k!="constructor"in a||k.constructor!=a.constructor)return!1;for(var q in k)if(d.has(k,q)&&(b++,!(f=d.has(a,q)&&n(k[q],a[q],c))))break;if(f){for(q in a)if(d.has(a,q)&&!b--)break;
f=!b}}c.pop();return f}var e=this,j=e._,l={},h=Array.prototype,b=Object.prototype,c=h.slice,f=h.unshift,x=b.toString,a=b.hasOwnProperty,m=h.forEach,p=h.map,s=h.reduce,g=h.reduceRight,y=h.filter,C=h.every,u=h.some,r=h.indexOf,v=h.lastIndexOf,b=Array.isArray,q=Object.keys,t=Function.prototype.bind,d=function(k){return new G(k)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports._=d):e._=d;d.VERSION="1.3.3";var w=d.each=d.forEach=function(k,
a,c){if(null!=k)if(m&&k.forEach===m)k.forEach(a,c);else if(k.length===+k.length)for(var b=0,g=k.length;b<g&&!(b in k&&a.call(c,k[b],b,k)===l);b++);else for(b in k)if(d.has(k,b)&&a.call(c,k[b],b,k)===l)break};d.map=d.collect=function(k,a,d){var c=[];if(null==k)return c;if(p&&k.map===p)return k.map(a,d);w(k,function(k,b,g){c[c.length]=a.call(d,k,b,g)});k.length===+k.length&&(c.length=k.length);return c};d.reduce=d.foldl=d.inject=function(k,a,c,b){var g=2<arguments.length;null==k&&(k=[]);if(s&&k.reduce===
s)return b&&(a=d.bind(a,b)),g?k.reduce(a,c):k.reduce(a);w(k,function(k,d,f){g?c=a.call(b,c,k,d,f):(c=k,g=!0)});if(!g)throw new TypeError("Reduce of empty array with no initial value");return c};d.reduceRight=d.foldr=function(k,a,c,b){var f=2<arguments.length;null==k&&(k=[]);if(g&&k.reduceRight===g)return b&&(a=d.bind(a,b)),f?k.reduceRight(a,c):k.reduceRight(a);var q=d.toArray(k).reverse();b&&!f&&(a=d.bind(a,b));return f?d.reduce(q,a,c,b):d.reduce(q,a)};d.find=d.detect=function(a,d,c){var b;z(a,function(a,
k,g){if(d.call(c,a,k,g))return b=a,!0});return b};d.filter=d.select=function(a,d,c){var b=[];if(null==a)return b;if(y&&a.filter===y)return a.filter(d,c);w(a,function(a,k,g){d.call(c,a,k,g)&&(b[b.length]=a)});return b};d.reject=function(a,d,c){var b=[];if(null==a)return b;w(a,function(a,k,g){d.call(c,a,k,g)||(b[b.length]=a)});return b};d.every=d.all=function(a,d,c){var b=!0;if(null==a)return b;if(C&&a.every===C)return a.every(d,c);w(a,function(a,k,g){if(!(b=b&&d.call(c,a,k,g)))return l});return!!b};
var z=d.some=d.any=function(a,c,b){c||(c=d.identity);var g=!1;if(null==a)return g;if(u&&a.some===u)return a.some(c,b);w(a,function(a,k,d){if(g||(g=c.call(b,a,k,d)))return l});return!!g};d.include=d.contains=function(a,d){var c=!1;return null==a?c:r&&a.indexOf===r?-1!=a.indexOf(d):c=z(a,function(a){return a===d})};d.invoke=function(a,b){var g=c.call(arguments,2);return d.map(a,function(a){return(d.isFunction(b)?b||a:a[b]).apply(a,g)})};d.pluck=function(a,c){return d.map(a,function(a){return a[c]})};
d.max=function(a,c,b){if(!c&&d.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!c&&d.isEmpty(a))return-Infinity;var g={computed:-Infinity};w(a,function(a,d,k){d=c?c.call(b,a,d,k):a;d>=g.computed&&(g={value:a,computed:d})});return g.value};d.min=function(a,c,b){if(!c&&d.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!c&&d.isEmpty(a))return Infinity;var g={computed:Infinity};w(a,function(a,d,k){d=c?c.call(b,a,d,k):a;d<g.computed&&(g={value:a,computed:d})});return g.value};d.shuffle=
function(a){var d=[],c;w(a,function(a,k){c=Math.floor(Math.random()*(k+1));d[k]=d[c];d[c]=a});return d};d.sortBy=function(a,c,b){var g=d.isFunction(c)?c:function(a){return a[c]};return d.pluck(d.map(a,function(a,d,k){return{value:a,criteria:g.call(b,a,d,k)}}).sort(function(a,d){var k=a.criteria,c=d.criteria;return void 0===k?1:void 0===c?-1:k<c?-1:k>c?1:0}),"value")};d.groupBy=function(a,c){var b={},g=d.isFunction(c)?c:function(a){return a[c]};w(a,function(a,d){var k=g(a,d);(b[k]||(b[k]=[])).push(a)});
return b};d.sortedIndex=function(a,c,b){b||(b=d.identity);for(var g=0,f=a.length;g<f;){var q=g+f>>1;b(a[q])<b(c)?g=q+1:f=q}return g};d.toArray=function(a){return!a?[]:d.isArray(a)||d.isArguments(a)?c.call(a):a.toArray&&d.isFunction(a.toArray)?a.toArray():d.values(a)};d.size=function(a){return d.isArray(a)?a.length:d.keys(a).length};d.first=d.head=d.take=function(a,d,b){return null!=d&&!b?c.call(a,0,d):a[0]};d.initial=function(a,d,b){return c.call(a,0,a.length-(null==d||b?1:d))};d.last=function(a,
d,b){return null!=d&&!b?c.call(a,Math.max(a.length-d,0)):a[a.length-1]};d.rest=d.tail=function(a,d,b){return c.call(a,null==d||b?1:d)};d.compact=function(a){return d.filter(a,function(a){return!!a})};d.flatten=function(a,c){return d.reduce(a,function(a,k){if(d.isArray(k))return a.concat(c?k:d.flatten(k));a[a.length]=k;return a},[])};d.without=function(a){return d.difference(a,c.call(arguments,1))};d.uniq=d.unique=function(a,c,b){b=b?d.map(a,b):a;var g=[];3>a.length&&(c=!0);d.reduce(b,function(b,f,
q){if(c?d.last(b)!==f||!b.length:!d.include(b,f))b.push(f),g.push(a[q]);return b},[]);return g};d.union=function(){return d.uniq(d.flatten(arguments,!0))};d.intersection=d.intersect=function(a){var b=c.call(arguments,1);return d.filter(d.uniq(a),function(a){return d.every(b,function(c){return 0<=d.indexOf(c,a)})})};d.difference=function(a){var b=d.flatten(c.call(arguments,1),!0);return d.filter(a,function(a){return!d.include(b,a)})};d.zip=function(){for(var a=c.call(arguments),b=d.max(d.pluck(a,"length")),
g=Array(b),f=0;f<b;f++)g[f]=d.pluck(a,""+f);return g};d.indexOf=function(a,c,b){if(null==a)return-1;var g;if(b)return b=d.sortedIndex(a,c),a[b]===c?b:-1;if(r&&a.indexOf===r)return a.indexOf(c);b=0;for(g=a.length;b<g;b++)if(b in a&&a[b]===c)return b;return-1};d.lastIndexOf=function(a,d){if(null==a)return-1;if(v&&a.lastIndexOf===v)return a.lastIndexOf(d);for(var b=a.length;b--;)if(b in a&&a[b]===d)return b;return-1};d.range=function(a,d,b){1>=arguments.length&&(d=a||0,a=0);b=arguments[2]||1;for(var c=
Math.max(Math.ceil((d-a)/b),0),g=0,f=Array(c);g<c;)f[g++]=a,a+=b;return f};var K=function(){};d.bind=function(a,b){var g,f;if(a.bind===t&&t)return t.apply(a,c.call(arguments,1));if(!d.isFunction(a))throw new TypeError;f=c.call(arguments,2);return g=function(){if(!(this instanceof g))return a.apply(b,f.concat(c.call(arguments)));K.prototype=a.prototype;var d=new K,q=a.apply(d,f.concat(c.call(arguments)));return Object(q)===q?q:d}};d.bindAll=function(a){var b=c.call(arguments,1);0==b.length&&(b=d.functions(a));
w(b,function(b){a[b]=d.bind(a[b],a)});return a};d.memoize=function(a,b){var c={};b||(b=d.identity);return function(){var g=b.apply(this,arguments);return d.has(c,g)?c[g]:c[g]=a.apply(this,arguments)}};d.delay=function(a,d){var b=c.call(arguments,2);return setTimeout(function(){return a.apply(null,b)},d)};d.defer=function(a){return d.delay.apply(d,[a,1].concat(c.call(arguments,1)))};d.throttle=function(a,b){var c,g,f,q,m,t,h=d.debounce(function(){m=q=!1},b);return function(){c=this;g=arguments;f||
(f=setTimeout(function(){f=null;m&&a.apply(c,g);h()},b));q?m=!0:t=a.apply(c,g);h();q=!0;return t}};d.debounce=function(a,d,b){var c;return function(){var g=this,f=arguments;b&&!c&&a.apply(g,f);clearTimeout(c);c=setTimeout(function(){c=null;b||a.apply(g,f)},d)}};d.once=function(a){var d=!1,b;return function(){if(d)return b;d=!0;return b=a.apply(this,arguments)}};d.wrap=function(a,d){return function(){var b=[a].concat(c.call(arguments,0));return d.apply(this,b)}};d.compose=function(){var a=arguments;
return function(){for(var d=arguments,b=a.length-1;0<=b;b--)d=[a[b].apply(this,d)];return d[0]}};d.after=function(a,d){return 0>=a?d():function(){if(1>--a)return d.apply(this,arguments)}};d.keys=q||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)d.has(a,c)&&(b[b.length]=c);return b};d.values=function(a){return d.map(a,d.identity)};d.functions=d.methods=function(a){var b=[],c;for(c in a)d.isFunction(a[c])&&b.push(c);return b.sort()};d.extend=function(a){w(c.call(arguments,
1),function(d){for(var b in d)a[b]=d[b]});return a};d.pick=function(a){var b={};w(d.flatten(c.call(arguments,1)),function(d){d in a&&(b[d]=a[d])});return b};d.defaults=function(a){w(c.call(arguments,1),function(d){for(var b in d)null==a[b]&&(a[b]=d[b])});return a};d.clone=function(a){return!d.isObject(a)?a:d.isArray(a)?a.slice():d.extend({},a)};d.tap=function(a,d){d(a);return a};d.isEqual=function(a,d){return n(a,d,[])};d.isEmpty=function(a){if(null==a)return!0;if(d.isArray(a)||d.isString(a))return 0===
a.length;for(var b in a)if(d.has(a,b))return!1;return!0};d.isElement=function(a){return!!(a&&1==a.nodeType)};d.isArray=b||function(a){return"[object Array]"==x.call(a)};d.isObject=function(a){return a===Object(a)};d.isArguments=function(a){return"[object Arguments]"==x.call(a)};d.isArguments(arguments)||(d.isArguments=function(a){return!(!a||!d.has(a,"callee"))});d.isFunction=function(a){return"[object Function]"==x.call(a)};d.isString=function(a){return"[object String]"==x.call(a)};d.isNumber=function(a){return"[object Number]"==
x.call(a)};d.isFinite=function(a){return d.isNumber(a)&&isFinite(a)};d.isNaN=function(a){return a!==a};d.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==x.call(a)};d.isDate=function(a){return"[object Date]"==x.call(a)};d.isRegExp=function(a){return"[object RegExp]"==x.call(a)};d.isNull=function(a){return null===a};d.isUndefined=function(a){return void 0===a};d.has=function(d,b){return a.call(d,b)};d.noConflict=function(){e._=j;return this};d.identity=function(a){return a};d.times=
function(a,d,b){for(var c=0;c<a;c++)d.call(b,c)};d.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};d.result=function(a,b){if(null==a)return null;var c=a[b];return d.isFunction(c)?c.call(a):c};d.mixin=function(a){w(d.functions(a),function(b){var g=d[b]=a[b];G.prototype[b]=function(){var a=c.call(arguments);f.call(a,this._wrapped);return M(g.apply(d,a),this._chain)}})};var F=0;d.uniqueId=
function(a){var d=F++;return a?a+d:d};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/.^/,L={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},N;for(N in L)L[L[N]]=N;var T=/\\|'|\r|\n|\t|\u2028|\u2029/g,U=/\\(\\|'|r|n|t|u2028|u2029)/g,O=function(a){return a.replace(U,function(a,d){return L[d]})};d.template=function(a,b,c){c=d.defaults(c||{},d.templateSettings);a="__p+='"+a.replace(T,function(a){return"\\"+L[a]}).replace(c.escape||
B,function(a,d){return"'+\n_.escape("+O(d)+")+\n'"}).replace(c.interpolate||B,function(a,d){return"'+\n("+O(d)+")+\n'"}).replace(c.evaluate||B,function(a,d){return"';\n"+O(d)+"\n;__p+='"})+"';\n";c.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var g=new Function(c.variable||"obj","_",a);if(b)return g(b,d);b=function(a){return g.call(this,a,d)};b.source="function("+(c.variable||"obj")+"){\n"+a+"}";return b};
d.chain=function(a){return d(a).chain()};var G=function(a){this._wrapped=a};d.prototype=G.prototype;var M=function(a,b){return b?d(a).chain():a};d.mixin(d);w("pop push reverse shift sort splice unshift".split(" "),function(a){var d=h[a];G.prototype[a]=function(){var b=this._wrapped;d.apply(b,arguments);var c=b.length;("shift"==a||"splice"==a)&&0===c&&delete b[0];return M(b,this._chain)}});w(["concat","join","slice"],function(a){var d=h[a];G.prototype[a]=function(){return M(d.apply(this._wrapped,arguments),
this._chain)}});G.prototype.chain=function(){this._chain=!0;return this};G.prototype.value=function(){return this._wrapped}}).call(this);var Backbone=Backbone||{};
(function(){var n=[].slice,e=/\s+/,j=function(b,c,f,h){if(!f)return!0;if("object"===typeof f)for(var a in f)b[c].apply(b,[a,f[a]].concat(h));else if(e.test(f)){f=f.split(e);a=0;for(var m=f.length;a<m;a++)b[c].apply(b,[f[a]].concat(h))}else return!0},l=function(b,c,f){var h;b=-1;var a=c.length;switch(f.length){case 0:for(;++b<a;)(h=c[b]).callback.call(h.ctx);break;case 1:for(;++b<a;)(h=c[b]).callback.call(h.ctx,f[0]);break;case 2:for(;++b<a;)(h=c[b]).callback.call(h.ctx,f[0],f[1]);break;case 3:for(;++b<
a;)(h=c[b]).callback.call(h.ctx,f[0],f[1],f[2]);break;default:for(;++b<a;)(h=c[b]).callback.apply(h.ctx,f)}},h=Backbone.Events={on:function(b,c,f){if(!j(this,"on",b,[c,f])||!c)return this;this._events||(this._events={});(this._events[b]||(this._events[b]=[])).push({callback:c,context:f,ctx:f||this});return this},once:function(b,c,f){if(!j(this,"once",b,[c,f])||!c)return this;var h=this,a=_.once(function(){h.off(b,a);c.apply(this,arguments)});a._callback=c;this.on(b,a,f);return this},off:function(b,
c,f){var h,a,m,e,s,g,y,l;if(!this._events||!j(this,"off",b,[c,f]))return this;if(!b&&!c&&!f)return this._events={},this;e=b?[b]:_.keys(this._events);s=0;for(g=e.length;s<g;s++)if(b=e[s],h=this._events[b]){m=[];if(c||f){y=0;for(l=h.length;y<l;y++)a=h[y],(c&&c!==(a.callback._callback||a.callback)||f&&f!==a.context)&&m.push(a)}this._events[b]=m}return this},trigger:function(b){if(!this._events)return this;var c=n.call(arguments,1);if(!j(this,"trigger",b,c))return this;var f=this._events[b],h=this._events.all;
f&&l(this,f,c);h&&l(this,h,arguments);return this},listenTo:function(b,c,f){var h=this._listeners||(this._listeners={}),a=b._listenerId||(b._listenerId=_.uniqueId("l"));h[a]=b;b.on(c,f||this,this);return this},stopListening:function(b,c,f){var h=this._listeners;if(h){if(b)b.off(c,f,this),!c&&!f&&delete h[b._listenerId];else{for(var a in h)h[a].off(null,null,this);this._listeners={}}return this}}};h.bind=h.on;h.unbind=h.off})();(function(){for(var n=0,e=["ms","moz","webkit","o"],j=0;j<e.length&&!window.requestAnimationFrame;++j)window.requestAnimationFrame=window[e[j]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[j]+"CancelAnimationFrame"]||window[e[j]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var h=(new Date).getTime(),b=Math.max(0,16-(h-n)),c=window.setTimeout(function(){e(h+b)},b);n=h+b;return c});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(e){clearTimeout(e)})})();(function(){function n(){var a=document.body.getBoundingClientRect(),b=this.width=a.width,a=this.height=a.height;this.renderer.setSize(b,a);this.trigger(g.Events.resize,b,a)}var e=this,j=e.Two||{},l=Math.sin,h=Math.cos,b=Math.atan2,c=Math.sqrt,f=Math.abs,x=Math.PI,a=2*x,m=x/2,p=Math.pow,s={hasEventListeners:_.isFunction(e.addEventListener),bind:function(a,b,d,c){this.hasEventListeners?a.addEventListener(b,d,!!c):a.attachEvent("on"+b,d);return this},unbind:function(a,b,d,c){this.hasEventListeners?
a.removeEventListeners(b,d,!!c):a.detachEvent("on"+b,d);return this}},g=e.Two=function(a){a=_.defaults(a||{},{fullscreen:!1,width:640,height:480,type:g.Types.svg,autostart:!1});this.type=a.type;this.renderer=new g[this.type](this);g.Utils.setPlaying.call(this,a.autostart);this.frameCount=0;a.fullscreen?(a=_.bind(n,this),_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),_.extend(this.renderer.domElement.style,{display:"block",top:0,
left:0,right:0,bottom:0,position:"fixed"}),s.bind(window,"resize",a),a()):(this.renderer.setSize(a.width,a.height),this.width=a.width,this.height=a.height);this.scene=new g.Group;this.renderer.add(this.scene);g.Instances.push(this)};_.extend(g,{Array:e.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.2.1",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",
remove:"remove",insert:"insert"},Resolution:8,Instances:[],noConflict:function(){e.Two=j;return this},Utils:{Curve:{CollinearityEpsilon:p(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:0.25,angle:0,epsilon:0.01}},setPlaying:function(a){_.defer(_.bind(function(){this.playing=!!a},this))},getComputedMatrix:function(a){for(var b=new g.Matrix;a&&a._matrix;){var d=a._matrix.elements;b.multiply(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9]);a=a.parent}return b},applySvgAttributes:function(a,
b){b.cap="butt";b.join="bevel";_.each(a.attributes,function(a){switch(a.nodeName){case "visibility":b.visible=!!a.nodeValue;break;case "stroke-linecap":b.cap=a.nodeValue;break;case "stroke-linejoin":b.join=a.nodeValue;break;case "stroke-miterlimit":b.miter=a.nodeValue;break;case "stroke-width":b.linewidth=parseFloat(a.nodeValue);break;case "stroke-opacity":case "fill-opacity":b.opacity=a.nodeValue;break;case "fill":b.fill=a.nodeValue;break;case "stroke":b.stroke=a.nodeValue}});return b},read:{svg:function(){return g.Utils.read.g.apply(this,
arguments)},g:function(a){var b=new g.Group;this.add(b);_.each(a.childNodes,function(a){if(a.localName){var c=a.localName.toLowerCase();c in g.Utils.read&&(a=g.Utils.read[c].call(this,a),b.add(a))}},this);return g.Utils.applySvgAttributes(a,b)},polygon:function(a,b){var d=a.points;if(d){var c=_.map(_.range(d.numberOfItems),function(a){a=d.getItem(a);return new g.Vector(a.x,a.y)}),c=(new g.Polygon(c,!b)).noStroke();return g.Utils.applySvgAttributes(a,c)}},polyline:function(a){return g.Utils.read.polygon(a,
!0)},path:function(a){var b=a.getAttribute("d"),b=_.flatten(_.map(_.compact(b.split(/M/g)),function(a){a=_.map(_.compact(a.split(/m/g)),function(a,b){return 0>=b?a:"m"+a});a[0]="M"+a[0];return a})),d=new g.Vector,c=new g.Vector;return _.map(b,function(b){var f,h=!1,m=!1;b=_.flatten(_.map(b.match(/[a-z][^a-z]*/ig),function(a){var b,q,e=a[0],t=e.toLowerCase();f=a.slice(1).trim().split(/[\s,]+|(?=[+\-])/);h=e===t;var p,s,k;switch(t){case "z":m=!0;break;case "m":case "l":q=parseFloat(f[0]);b=parseFloat(f[1]);
b=new g.Vector(q,b);h&&b.addSelf(d);d.copy(b);break;case "h":case "v":q="h"===t?"x":"y";a="x"===q?"y":"x";b=new g.Vector;b[q]=parseFloat(f[0]);b[a]=d[a];h&&(b[q]+=d[q]);d.copy(b);break;case "s":case "c":b=d.x;a=d.y;"c"===t?(e=parseFloat(f[0]),q=parseFloat(f[1]),t=parseFloat(f[2]),p=parseFloat(f[3]),s=parseFloat(f[4]),k=parseFloat(f[5])):(p=(new g.Vector).copy(d).subSelf(c),e=parseFloat(p.x),q=parseFloat(p.y),t=parseFloat(f[0]),p=parseFloat(f[1]),s=parseFloat(f[2]),k=parseFloat(f[3]));h&&(e+=b,q+=
a,t+=b,p+=a,s+=b,k+=a);b=g.Utils.subdivide(b,a,e,q,t,p,s,k);d.set(s,k);c.set(t,p);break;case "t":case "q":b=d.x;a=d.y;c.isZero()?(e=b,q=a):(e=c.x,a=c.y);"q"===t?(t=parseFloat(f[0]),p=parseFloat(f[1]),s=parseFloat(f[1]),k=parseFloat(f[2])):(p=(new g.Vector).copy(d).subSelf(c),t=parseFloat(p.x),p=parseFloat(p.y),s=parseFloat(f[0]),k=parseFloat(f[1]));h&&(e+=b,q+=a,t+=b,p+=a,s+=b,k+=a);b=g.Utils.subdivide(b,a,e,q,t,p,s,k);d.set(s,k);c.set(t,p);break;case "a":throw new g.Utils.Error("not yet able to interpret Elliptical Arcs.");
}return b}));_.isUndefined(b[b.length-1])&&b.pop();b=(new g.Polygon(b,m)).noStroke();return g.Utils.applySvgAttributes(a,b)})},circle:function(b){var c=parseFloat(b.getAttribute("cx")),d=parseFloat(b.getAttribute("cy")),f=parseFloat(b.getAttribute("r")),m=g.Resolution,e=_.map(_.range(m),function(b){var d=b/m*a;b=f*h(d);d=f*l(d);return new g.Vector(b,d)},this),e=(new g.Polygon(e,!0,!0)).noStroke();e.translation.set(c,d);return g.Utils.applySvgAttributes(b,e)},ellipse:function(b){var c=parseFloat(b.getAttribute("cx")),
d=parseFloat(b.getAttribute("cy")),f=parseFloat(b.getAttribute("rx")),m=parseFloat(b.getAttribute("ry")),e=g.Resolution,p=_.map(_.range(e),function(b){var d=b/e*a;b=f*h(d);d=m*l(d);return new g.Vector(b,d)},this),p=(new g.Polygon(p,!0,!0)).noStroke();p.translation.set(c,d);return g.Utils.applySvgAttributes(b,p)},rect:function(a){var b=parseFloat(a.getAttribute("x")),d=parseFloat(a.getAttribute("y")),c=parseFloat(a.getAttribute("width")),f=parseFloat(a.getAttribute("height")),c=c/2,f=f/2,h=[new g.Vector(c,
f),new g.Vector(-c,f),new g.Vector(-c,-f),new g.Vector(c,-f)],h=(new g.Polygon(h,!0)).noStroke();h.translation.set(b+c,d+f);return g.Utils.applySvgAttributes(a,h)},line:function(a){var b=parseFloat(a.getAttribute("x1")),d=parseFloat(a.getAttribute("y1")),c=parseFloat(a.getAttribute("x2")),f=parseFloat(a.getAttribute("y2")),c=(c-b)/2,f=(f-d)/2,h=[new g.Vector(-c,-f),new g.Vector(c,f)],h=(new g.Polygon(h)).noFill();h.translation.set(b+c,d+f);return g.Utils.applySvgAttributes(a,h)}},subdivide:function(c,
h,d,m,e,p,s,j,y){var l=g.Utils.Curve.CollinearityEpsilon,C=g.Utils.Curve.RecursionLimit,r=g.Utils.Curve.CuspLimit,u=g.Utils.Curve.Tolerance,n;y=y||0;if(y>C)return[];var C=(c+d)/2,v=(h+m)/2,k=(d+e)/2,J=(m+p)/2,P=(e+s)/2,Q=(p+j)/2,R=(C+k)/2,S=(v+J)/2,k=(k+P)/2,J=(J+Q)/2,D=(R+k)/2,E=(S+J)/2;n=s-c;var A=j-h,H=f((d-s)*A-(m-j)*n),I=f((e-s)*A-(p-j)*n);if(0<y){if(H>l&&I>l&&(H+I)*(H+I)<=u.distance*(n*n+A*A)){if(u.angle<u.epsilon)return[new g.Vector(D,E)];n=b(p-m,e-d);l=f(n-b(m-h,d-c));n=f(b(j-p,s-e)-n);l>=
x&&(l=a-l);n>=x&&(n=a-n);if(l+n<u.angle)return[new g.Vector(D,E)];if(0!==r){if(l>r)return[new g.Vector(d,m)];if(n>r)return[new g.Vector(e,p)]}}}else if(H>l)if(H*H<=u.distance*(n*n+A*A)){if(u.angle<u.epsilon)return[new g.Vector(D,E)];l=f(b(p-m,e-d)-b(m-h,d-c));l>=x&&(l=a-l);if(l<u.angle)return[new g.Vector(d,m),new g.Vector(e,p)];if(0!==r&&l>r)return[new g.Vector(d,m)]}else if(I>l){if(I*I<=u.distance*(n*n+A*A)){if(u.angle<u.epsilon)return[new g.Vector(D,E)];l=f(b(j-p,s-e)-b(p-m,e-d));l>=x&&(l=a-l);
if(l<u.angle)return[new g.Vector(d,m),new g.Vector(e,p)];if(0!==r&&l>r)return[new g.Vector2(e,p)]}}else if(n=D-(c+s)/2,A=E-(h+j)/2,n*n+A*A<=u.distance)return[new g.Vector(D,E)];return g.Utils.subdivide(c,h,C,v,R,S,D,E,y+1).concat(g.Utils.subdivide(D,E,k,J,P,Q,s,j,y+1))},getCurveFromPoints:function(a,b){for(var d=[],c=a.length,g=c-1,f=0;f<c;f++){var h=a[f],m={x:h.x,y:h.y};d.push(m);var h=b?v(f-1,c):Math.max(f-1,0),e=b?v(f+1,c):Math.min(f+1,g);r(a[h],m,a[e]);!m.u.x&&!m.u.y&&(m.u.x=m.x,m.u.y=m.y);!m.v.x&&
!m.v.y&&(m.v.x=m.x,m.v.y=m.y)}return d},getControlPoints:function(a,b,d){var c=u(a,b),g=u(d,b);a=y(a,b);d=y(d,b);var f=(c+g)/2;if(1E-4>a||1E-4>d)return b.u={x:b.x,y:b.y},b.v={x:b.x,y:b.y},b;a*=0.33;d*=0.33;f=g<c?f+m:f-m;c={x:b.x+h(f)*a,y:b.y+l(f)*a};f-=x;g={x:b.x+h(f)*d,y:b.y+l(f)*d};b.u=c;b.v=g;return b},angleBetween:function(a,c){return b(a.y-c.y,a.x-c.x)},distanceBetweenSquared:function(a,b){var d=a.x-b.x,c=a.y-b.y;return d*d+c*c},distanceBetween:function(a,b){return c(C(a,b))},mod:function(a,
b){for(;0>a;)a+=b;return a%b},Collection:function(){Array.call(this);1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(a){this.name="two.js";this.message=a}}});g.Utils.Error.prototype=Error();g.Utils.Error.prototype.constructor=g.Utils.Error;g.Utils.Collection.prototype=[];g.Utils.Collection.constructor=g.Utils.Collection;_.extend(g.Utils.Collection.prototype,Backbone.Events,{pop:function(){var a=
Array.prototype.pop.apply(this,arguments);this.trigger(g.Events.remove,[a]);return a},shift:function(){var a=Array.prototype.shift.apply(this,arguments);this.trigger(g.Events.remove,[a]);return a},push:function(){var a=Array.prototype.push.apply(this,arguments);this.trigger(g.Events.insert,arguments);return a},unshift:function(){var a=Array.prototype.unshift.apply(this,arguments);this.trigger(g.Events.insert,arguments);return a},splice:function(){var a=Array.prototype.splice.apply(this,arguments),
b;this.trigger(g.Events.remove,a);2<arguments.length&&(b=this.slice(arguments[0],arguments.length-2),this.trigger(g.Events.insert,b));return a}});var y=g.Utils.distanceBetween,C=g.Utils.distanceBetweenSquared,u=g.Utils.angleBetween,r=g.Utils.getControlPoints,v=g.Utils.mod;_.extend(g.prototype,Backbone.Events,{appendTo:function(a){a.appendChild(this.renderer.domElement);return this},play:function(){g.Utils.setPlaying.call(this,!0);return this.trigger(g.Events.play)},pause:function(){this.playing=!1;
return this.trigger(g.Events.pause)},update:function(){_.defer(_.bind(function(){var a=!!this._lastFrame,b=(window.performance&&window.performance.now?window.performance:Date).now();this.frameCount++;a&&(this.timeDelta=parseFloat((b-this._lastFrame).toFixed(3)));this._lastFrame=b;var a=this.width,b=this.height,d=this.renderer;(a!==d.width||b!==d.height)&&d.setSize(a,b);this.trigger(g.Events.update,this.frameCount,this.timeDelta);this.render()},this));return this},render:function(){this.renderer.render();
return this.trigger(g.Events.render,this.frameCount)},add:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));this.scene.add(b);return this},remove:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));this.scene.remove(b);return this},clear:function(){_.each(this.scene.children,function(a){a.remove()});return this},makeLine:function(a,b,d,c){d=(d-a)/2;c=(c-b)/2;var f=[new g.Vector(-d,-c),new g.Vector(d,c)],f=(new g.Polygon(f)).noFill();f.translation.set(a+d,b+c);this.scene.add(f);return f},
makeRectangle:function(a,b,d,c){d/=2;c/=2;c=[new g.Vector(d,c),new g.Vector(-d,c),new g.Vector(-d,-c),new g.Vector(d,-c)];c=new g.Polygon(c,!0);c.translation.set(a,b);this.scene.add(c);return c},makeCircle:function(a,b,c){return this.makeEllipse(a,b,c,c)},makeEllipse:function(b,c,d,f){var m=g.Resolution,e=_.map(_.range(m),function(b){var c=b/m*a;b=d*h(c);c=f*l(c);return new g.Vector(b,c)},this),e=new g.Polygon(e,!0,!0);e.translation.set(b,c);this.scene.add(e);return e},makeCurve:function(a){var b=
arguments.length,c=a;if(!_.isArray(a))for(var c=[],f=0;f<b;f+=2){var m=arguments[f];if(!_.isNumber(m))break;c.push(new g.Vector(m,arguments[f+1]))}var b=arguments[b-1],c=new g.Polygon(c,!(_.isBoolean(b)&&b),!0),b=c.getBoundingClientRect(),h=b.left+b.width/2,e=b.top+b.height/2;_.each(c.vertices,function(a){a.x-=h;a.y-=e});c.translation.set(h,e);this.scene.add(c);return c},makePolygon:function(a){var b=arguments.length,c=a;if(!_.isArray(a))for(var c=[],f=0;f<b;f+=2){var m=arguments[f];if(!_.isNumber(m))break;
c.push(new g.Vector(m,arguments[f+1]))}b=arguments[b-1];c=new g.Polygon(c,!(_.isBoolean(b)&&b));b=c.getBoundingClientRect();c.center().translation.set(b.left+b.width/2,b.top+b.height/2);this.scene.add(c);return c},makeGroup:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));var c=new g.Group;this.scene.add(c);c.add(b);return c},interpret:function(a){var b=a.tagName.toLowerCase();if(!(b in g.Utils.read))return null;a=g.Utils.read[b].call(this,a);this.add(a);return a}});(function(){_.each(g.Instances,
function(a){a.playing&&a.update()});requestAnimationFrame(arguments.callee)})();"function"===typeof define&&define.amd?define(function(){return g}):"undefined"!=typeof module&&module.exports&&(module.exports=g)})();(function(){var n=Two.Vector=function(e,j){this.x=e||0;this.y=j||0};_.extend(n,{MakeGetterSetter:function(e,j,l){var h="_"+j;Object.defineProperty(e,j,{get:function(){return this[h]},set:function(b){this[h]=b;this.trigger(Two.Events.change,j)}});e[h]=l}});_.extend(n.prototype,Backbone.Events,{set:function(e,j){if(this._bound)return this._x=e,this._y=j,this.trigger(Two.Events.change);this.x=e;this.y=j;return this},copy:function(e){if(this._bound)return this._x=e.x,this._y=e.y,this.trigger(Two.Events.change);
this.x=e.x;this.y=e.y;return this},clear:function(){if(this._bound)return this._y=this._x=0,this.trigger(Two.Events.change);this.y=this.x=0;return this},clone:function(){return new n(this.x,this.y)},add:function(e,j){if(this._bound)return this._x=e.x+j.x,this._y=e.y+j.y,this.trigger(Two.Events.change);this.x=e.x+j.x;this.y=e.y+j.y;return this},addSelf:function(e){if(this._bound)return this._x+=e.x,this._y+=e.y,this.trigger(Two.Events.change);this.x+=e.x;this.y+=e.y;return this},sub:function(e,j){if(this._bound)return this._x=
e.x-j.x,this._y=e.y-j.y,this.trigger(Two.Events.change);this.x=e.x-j.x;this.y=e.y-j.y;return this},subSelf:function(e){if(this._bound)return this._x-=e.x,this._y-=e.y,this.trigger(Two.Events.change);this.x-=e.x;this.y-=e.y;return this},multiplySelf:function(e){if(this._bound)return this._x*=e.x,this._y*=e.y,this.trigger(Two.Events.change);this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){if(this._bound)return this._x*=e,this._y*=e,this.trigger(Two.Events.change);this.x*=e;this.y*=e;
return this},divideScalar:function(e){if(e){if(this._bound)return this._x/=e,this._y/=e,this.trigger(Two.Events.change);this.x/=e;this.y/=e}else this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this._bound?this._x*e.x+this._y*e.y:this.x*e.x+this.y*e.y},lengthSquared:function(){return this._bound?this._x*this._x+this._y*this._y:this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},
distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var j;this._bound?(j=this._x-e.x,e=this._y-e.y):(j=this.x-e.x,e=this.y-e.y);return j*j+e*e},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return 1E-4>this.distanceTo(e)},lerp:function(e,j){var l,h;this._bound?(l=(e.x-this._x)*j+this._x,h=(e.y-this._y)*j+this._y):(l=(e.x-this.x)*j+this.x,h=(e.y-this.y)*j+this.y);return this.set(l,h)},isZero:function(){return 1E-4>
this.length()}});Two.Vector.prototype.bind=Two.Vector.prototype.on=function(){this._bound||(Two.Vector.MakeGetterSetter(this,"x",this.x),Two.Vector.MakeGetterSetter(this,"y",this.y),this._bound=!0);Backbone.Events.bind.apply(this,arguments);return this}})();(function(){_.range(6);var n=Math.cos,e=Math.sin,j=Math.tan,l=Two.Matrix=function(h,b,c,f,e,a){this.elements=new Two.Array(9);var m=h;_.isArray(m)||(m=_.toArray(arguments));this.identity().set(m)};_.extend(l,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(h,b){if(3>=b.length){var c=b[0]||0,f=b[1]||0,e=b[2]||0;return{x:h[0]*c+h[1]*f+h[2]*e,y:h[3]*c+h[4]*f+h[5]*e,z:h[6]*c+h[7]*f+h[8]*e}}var c=h[0],f=h[1],e=h[2],a=h[3],m=h[4],p=h[5],s=h[6],g=h[7],j=h[8],l=b[0],n=b[1],r=b[2],v=b[3],q=b[4],t=b[5],d=b[6],
w=b[7],z=b[8];return[c*l+f*v+e*d,c*n+f*q+e*w,c*r+f*t+e*z,a*l+m*v+p*d,a*n+m*q+p*w,a*r+m*t+p*z,s*l+g*v+j*d,s*n+g*q+j*w,s*r+g*t+j*z]}});_.extend(l.prototype,Backbone.Events,{set:function(h,b,c,f,e,a){var m=h;_.isArray(m)||(m=_.toArray(arguments));_.each(m,function(a,b){_.isNumber(a)&&(this.elements[b]=a)},this);return this.trigger(Two.Events.change)},identity:function(){this.set(l.Identity);return this},multiply:function(h,b,c,f,e,a,m,p,s){var g=arguments,j=g.length;if(1>=j)return _.each(this.elements,
function(a,b){this.elements[b]=a*h},this),this.trigger(Two.Events.change);if(3>=j)return h=h||0,b=b||0,c=c||0,e=this.elements,{x:e[0]*h+e[1]*b+e[2]*c,y:e[3]*h+e[4]*b+e[5]*c,z:e[6]*h+e[7]*b+e[8]*c};j=this.elements;A0=j[0];A1=j[1];A2=j[2];A3=j[3];A4=j[4];A5=j[5];A6=j[6];A7=j[7];A8=j[8];B0=g[0];B1=g[1];B2=g[2];B3=g[3];B4=g[4];B5=g[5];B6=g[6];B7=g[7];B8=g[8];this.elements[0]=A0*B0+A1*B3+A2*B6;this.elements[1]=A0*B1+A1*B4+A2*B7;this.elements[2]=A0*B2+A1*B5+A2*B8;this.elements[3]=A3*B0+A4*B3+A5*B6;this.elements[4]=
A3*B1+A4*B4+A5*B7;this.elements[5]=A3*B2+A4*B5+A5*B8;this.elements[6]=A6*B0+A7*B3+A8*B6;this.elements[7]=A6*B1+A7*B4+A8*B7;this.elements[8]=A6*B2+A7*B5+A8*B8;return this.trigger(Two.Events.change)},inverse:function(e){var b=this.elements;e=e||new Two.Matrix;var c=b[0],f=b[1],j=b[2],a=b[3],m=b[4],p=b[5],s=b[6],g=b[7],b=b[8],l=b*m-p*g,n=-b*a+p*s,u=g*a-m*s,r=c*l+f*n+j*u;if(!r)return null;r=1/r;e.elements[0]=l*r;e.elements[1]=(-b*f+j*g)*r;e.elements[2]=(p*f-j*m)*r;e.elements[3]=n*r;e.elements[4]=(b*c-
j*s)*r;e.elements[5]=(-p*c+j*a)*r;e.elements[6]=u*r;e.elements[7]=(-g*c+f*s)*r;e.elements[8]=(m*c-f*a)*r;return e},scale:function(e,b){1>=arguments.length&&(b=e);return this.multiply(e,0,0,0,b,0,0,0,1)},rotate:function(h){var b=n(h);h=e(h);return this.multiply(b,-h,0,h,b,0,0,0,1)},translate:function(e,b){return this.multiply(1,0,e,0,1,b,0,0,1)},skewX:function(e){e=j(e);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(e){e=j(e);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(){return this.toArray().join(" ")},
toArray:function(e){var b=this.elements,c=parseFloat(b[0].toFixed(3)),f=parseFloat(b[1].toFixed(3)),j=parseFloat(b[2].toFixed(3)),a=parseFloat(b[3].toFixed(3)),m=parseFloat(b[4].toFixed(3)),p=parseFloat(b[5].toFixed(3));if(e){e=parseFloat(b[6].toFixed(3));var s=parseFloat(b[7].toFixed(3)),b=parseFloat(b[8].toFixed(3));return[c,a,e,f,m,s,j,p,b]}return[c,a,f,m,j,p]},clone:function(){return new Two.Matrix(this.elements[0],this.elements[1],this.elements[2],this.elements[3],this.elements[4],this.elements[5],
this.elements[6],this.elements[7],this.elements[8])}})})();(function(){function n(b){var c={},f=b.id,e=b.translation,a=b.rotation,m=b.scale,p=b.stroke,s=b.linewidth,g=b.fill,j=b.opacity,n=b.visible,u=b.cap,r=b.join,v=b.miter,q=b.curved,t=b.closed,d=b.vertices;f&&(c.id=h.Identifier+f);e&&(_.isNumber(m)&&_.isNumber(a))&&(c.transform="matrix("+b._matrix.toString()+")");p&&(c.stroke=p);g&&(c.fill=g);j&&(c["stroke-opacity"]=c["fill-opacity"]=j);c.visibility=n?"visible":"hidden";u&&(c["stroke-linecap"]=u);r&&(c["stroke-linejoin"]=r);v&&(c["stroke-miterlimit"]=
v);s&&(c["stroke-width"]=s);d&&(c.d=l.toString(d,t,q));return c}var e=Two.Utils.getCurveFromPoints,j=Two.Utils.mod,l={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(b,c){var f=document.createElementNS(this.ns,b);"svg"===b&&(c=_.defaults(c||{},{version:this.version}));_.isObject(c)&&this.setAttributes(f,c);return f},setAttributes:function(b,c){_.each(c,function(b,c){this.setAttribute(c,b)},b);return this},removeAttributes:function(b,c){_.each(c,
function(b){this.removeAttribute(b)},b);return this},toString:function(b,c,f){var h=b.length,a=h-1;if(!f)return _.map(b,function(b,f){var g;g=(0>=f?"M":"L")+(" "+b.x.toFixed(3)+" "+b.y.toFixed(3));f>=a&&c&&(g+=" Z");return g}).join(" ");var m=e(b,c);return _.map(m,function(b,f){var g,e=c?j(f-1,h):Math.max(f-1,0),l=c?j(f+1,h):Math.min(f+1,a);g=m[e];var l=m[l],e=g.v.x.toFixed(3),n=g.v.y.toFixed(3),r=b.u.x.toFixed(3),v=b.u.y.toFixed(3),q=b.x.toFixed(3),t=b.y.toFixed(3);g=0>=f?"M "+q+" "+t:"C "+e+" "+
n+" "+r+" "+v+" "+q+" "+t;f>=a&&c&&(e=b.v.x.toFixed(3),n=b.v.y.toFixed(3),r=l.u.x.toFixed(3),v=l.u.y.toFixed(3),q=l.x.toFixed(3),t=l.y.toFixed(3),g=g+(" C "+e+" "+n+" "+r+" "+v+" "+q+" "+t)+" Z");return g}).join(" ")}},h=Two[Two.Types.svg]=function(){this.count=0;this.domElement=l.createElement("svg");this.elements=[];this.domElement.style.visibility="hidden";this.unveil=_.once(_.bind(function(){this.domElement.style.visibility="visible"},this))};_.extend(h,{Identifier:"two-",Utils:l});_.extend(h.prototype,
Backbone.Events,{setSize:function(b,c){this.width=b;this.height=c;l.setAttributes(this.domElement,{width:b,height:c});return this},add:function(b){var c=b,f=this.elements,e=this.domElement;_.isArray(b)||(c=_.map(arguments,function(a){return a}));_.each(c,function(a){var b;b=a instanceof Two.Group;if(_.isUndefined(a.id)){var c=this.count;this.count++;a.id=c}b?(b="g",_.isUndefined(a.parent)&&(a.parent=this,a.unbind(Two.Events.change).bind(Two.Events.change,_.bind(this.update,this))),a=n(a),delete a.stroke,
delete a.fill,delete a["fill-opacity"],delete a["stroke-opacity"],delete a["stroke-linecap"],delete a["stroke-linejoin"],delete a["stroke-miterlimit"],delete a["stroke-width"]):(b="path",a=n(a));a=l.createElement(b,a);e.appendChild(a);f.push(a)},this);return this},update:function(b,c,f,e,a){var m=this.elements,h=m[b];switch(c){case Two.Properties.hierarchy:_.each(f,function(a){h.appendChild(m[a])});break;case Two.Properties.demotion:_.each(f,function(a){h.removeChild(m[a])});break;default:a:{b=c;
switch(b){case "matrix":b="transform";f="matrix("+f.toString()+")";break;case "visible":b="visibility";f=f?"visible":"hidden";break;case "cap":b="stroke-linecap";break;case "join":b="stroke-linejoin";break;case "miter":b="stroke-miterlimit";break;case "linewidth":b="stroke-width";break;case "vertices":b="d";f=l.toString(f,e,a);break;case "opacity":l.setAttributes(h,{"stroke-opacity":f,"fill-opacity":f});break a}h.setAttribute(b,f)}}return this},render:function(){this.unveil();return this}})})();(function(){var n=Two.Utils.getCurveFromPoints,e=Two.Utils.mod,j=function(b){_.each(b,function(b,c){this[c]=b},this);this.children=[]};_.extend(j.prototype,{appendChild:function(b){var f=b.parent;_.isUndefined(f)||f.removeChild(b);this.children.push(b);b.parent=this;return this},removeChild:function(b){b=_.indexOf(this.children,b);return 0>b?this:this.children.splice(b,1)[0]},render:function(b){var f=this.matrix;b.save();b.transform(f[0],f[1],f[2],f[3],f[4],f[5]);_.each(this.children,function(f){f.render(b)});
b.restore();return this}});var l=function(b){_.each(b,function(b,c){this[c]=b},this)};_.extend(l.prototype,{render:function(b){var f=this.matrix,h=this.stroke,a=this.linewidth,m=this.fill,p=this.opacity,j=this.cap,g=this.join,l=this.miter,n=this.curved,u=this.closed,r=this.commands,v=r.length,q=v-1;if(!this.visible)return this;b.save();f&&b.transform(f[0],f[1],f[2],f[3],f[4],f[5]);m&&(b.fillStyle=m);h&&(b.strokeStyle=h);a&&(b.lineWidth=a);l&&(b.miterLimit=l);g&&(b.lineJoin=g);j&&(b.lineCap=j);_.isNumber(p)&&
(b.globalAlpha=p);b.beginPath();_.each(r,function(a,d){var f=a.x.toFixed(3),g=a.y.toFixed(3);if(n){var m=u?e(d-1,v):Math.max(d-1,0),h=u?e(d+1,v):Math.min(d+1,q),p=r[m],h=r[h],m=p.v.x.toFixed(3),p=p.v.y.toFixed(3),j=a.u.x.toFixed(3),l=a.u.y.toFixed(3);0>=d?b.moveTo(f,g):(b.bezierCurveTo(m,p,j,l,f,g),d>=q&&u&&(m=a.v.x.toFixed(3),p=a.v.y.toFixed(3),j=h.u.x.toFixed(3),l=h.u.y.toFixed(3),f=h.x.toFixed(3),g=h.y.toFixed(3),b.bezierCurveTo(m,p,j,l,f,g)))}else 0>=d?b.moveTo(f,g):b.lineTo(f,g)});u&&!n&&b.closePath();
b.fill();b.stroke();b.restore()}});var h={devicePixelRatio:this.devicePixelRatio||1,getBackingStoreRatio:function(b){return b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1},getRatio:function(b){return this.devicePixelRatio/this.getBackingStoreRatio(b)},toArray:function(b,f,e){return!f?_.map(b,function(a){return{x:a.x,y:a.y}}):n(b,e)}},b=Two[Two.Types.canvas]=function(){this.count=0;this.domElement=document.createElement("canvas");
this.ctx=this.domElement.getContext("2d");this.overdraw=!1;this.elements=[];this.stage=null};_.extend(b,{Group:j,Element:l,getStyles:function(b){var f={},e=b.id,a=b._matrix,m=b.stroke,p=b.linewidth,j=b.fill,g=b.opacity,l=b.visible,n=b.cap,u=b.join,r=b.miter,v=b.curved,q=b.closed;b=b.vertices;e&&(f.id=e);_.isObject(a)&&(f.matrix=a.toArray());m&&(f.stroke=m);j&&(f.fill=j);_.isNumber(g)&&(f.opacity=g);n&&(f.cap=n);u&&(f.join=u);r&&(f.miter=r);p&&(f.linewidth=p);b&&(f.commands=h.toArray(b,v,q));f.visible=
!!l;f.curved=!!v;f.closed=!!q;return f},setStyles:function(b,f,e,a,m){switch(f){case "matrix":f="matrix";e=e.toArray();break;case "vertices":f="commands",b.curved=m,b.closed=a,e=h.toArray(e,b.curved,b.closed)}b[f]=e},Utils:h});_.extend(b.prototype,Backbone.Events,{setSize:function(b,f,e){this.width=b;this.height=f;this.ratio=_.isUndefined(e)?h.getRatio(this.ctx):e;this.domElement.width=b*this.ratio;this.domElement.height=f*this.ratio;_.extend(this.domElement.style,{width:b+"px",height:f+"px"});return this},
add:function(b){constructor=Object.getPrototypeOf(this).constructor;var f=b,e=this.elements,a=constructor.Group,m=constructor.Element,h=constructor.getStyles;_.isArray(b)||(f=_.map(arguments,function(a){return a}));_.each(f,function(b){var c;c=b instanceof Two.Group;var f=_.isNull(this.stage);if(_.isUndefined(b.id)){var j=this.count;this.count++;b.id=j}c?(c=h.call(this,b),delete c.stroke,delete c.fill,delete c.opacity,delete c.cap,delete c.join,delete c.miter,delete c.linewidth,c=new a(c),f&&(this.stage=
c,this.stage.object=b,b.parent=this,b.unbind(Two.Events.change).bind(Two.Events.change,_.bind(this.update,this)))):c=new m(h.call(this,b));e.push(c);f||this.stage.appendChild(c)},this);return this},update:function(b,f,e,a,m,h){var j=Object.getPrototypeOf(this).constructor,g=this.elements,l=g[b];switch(f){case Two.Properties.hierarchy:_.each(e,function(a){l.appendChild(g[a])});break;case Two.Properties.demotion:_.each(e,function(a){l.removeChild(g[a]);this.elements[a]=null},this);break;default:j.setStyles.call(this,
l,f,e,a,m,h)}return this},render:function(){if(_.isNull(this.stage))return this;1!==this.ratio&&(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio));this.overdraw||this.ctx.clearRect(0,0,this.width,this.height);this.stage.render(this.ctx);1!==this.ratio&&this.ctx.restore();return this}})})();(function(){function n(a,b){var c=Math.min(a.top,b.top),f=Math.min(a.left,b.left),g=Math.max(a.right,b.right),e=Math.max(a.bottom,b.bottom);return{top:c,left:f,right:g,bottom:e,width:g-f,height:e-c,centroid:{x:-f,y:-c}}}var e=Two[Two.Types.canvas],j=Two.Matrix.Multiply,l=Two[Two.Types.canvas].Utils.toArray,h=Two.Utils.mod,b=function(a){e.Group.call(this,a)};_.extend(b.prototype,e.Group.prototype,{appendChild:function(){e.Group.prototype.appendChild.apply(this,arguments);this.updateMatrix();return this},
updateTexture:function(a){_.each(this.children,function(b){b.updateTexture(a)});return this},updateMatrix:function(a){var b=a&&a._matrix||this.parent&&this.parent._matrix;a=a&&a._scale||this.parent&&this.parent._scale;if(!b)return this;this._matrix=j(this.matrix,b);this._scale=this.scale*a;_.each(this.children,function(a){a.updateMatrix(this)},this);return this},render:function(a,b){_.each(this.children,function(c){c.render(a,b)})}});var c=function(a){e.Element.call(this,a)};_.extend(c.prototype,
e.Element.prototype,{updateMatrix:function(a){var b=a&&a._matrix||this.parent&&this.parent._matrix;a=a&&a._scale||this.parent&&this.parent._scale;if(!b)return this;this._matrix=j(this.matrix,b);this._scale=this.scale*a;return this},updateTexture:function(a){f.updateTexture(a,this);return this},render:function(a,b){if(!this.visible||!this.opacity||!this.buffer)return this;a.bindBuffer(a.ARRAY_BUFFER,this.textureCoordsBuffer);a.vertexAttribPointer(b.textureCoords,2,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,
this.texture);a.uniformMatrix3fv(b.matrix,!1,this._matrix);a.bindBuffer(a.ARRAY_BUFFER,this.buffer);a.vertexAttribPointer(b.position,2,a.FLOAT,!1,0,0);a.drawArrays(a.TRIANGLES,0,6);return this}});var f={canvas:document.createElement("canvas"),uv:new Two.Array([0,0,1,0,0,1,0,1,1,0,1,1]),getBoundingClientRect:function(a,b,c){var f=Infinity,g=-Infinity,e=Infinity,h=-Infinity;_.each(a,function(a){var b=a.x,m=a.y,j;e=Math.min(m,e);f=Math.min(b,f);g=Math.max(b,g);h=Math.max(m,h);c&&(b=a.u.x,m=a.u.y,j=a.v.x,
a=a.v.y,e=Math.min(m,a,e),f=Math.min(b,j,f),g=Math.max(b,j,g),h=Math.max(m,a,h))});_.isNumber(b)&&(e-=b,f-=b,g+=b,h+=b);return{top:e,left:f,right:g,bottom:h,width:g-f,height:h-e,centroid:{x:-f,y:-e}}},getTriangles:function(a){var b=a.top,c=a.left,f=a.right;a=a.bottom;return new Two.Array([c,b,f,b,c,a,c,a,f,b,f,a])},updateCanvas:function(a){var b=a.commands,c=this.canvas,f=this.ctx,e=a._scale,j=a.stroke,l=a.linewidth*e,n=a.fill,r=a.opacity,x=a.cap,q=a.join,t=a.miter,d=a.curved,w=a.closed,z=b.length,
K=z-1;c.width=Math.max(Math.ceil(a.rect.width*e),1);c.height=Math.max(Math.ceil(a.rect.height*e),1);a=a.rect.centroid;var F=a.x*e,B=a.y*e;f.clearRect(0,0,c.width,c.height);n&&(f.fillStyle=n);j&&(f.strokeStyle=j);l&&(f.lineWidth=l);t&&(f.miterLimit=t);q&&(f.lineJoin=q);x&&(f.lineCap=x);_.isNumber(r)&&(f.globalAlpha=r);f.beginPath();_.each(b,function(a,c){var j=(a.x*e+F).toFixed(3),l=(a.y*e+B).toFixed(3);if(d){var p=w?h(c-1,z):Math.max(c-1,0),n=w?h(c+1,z):Math.min(c+1,K),q=b[p],n=b[n],p=(q.v.x*e+F).toFixed(3),
q=(q.v.y*e+B).toFixed(3),k=(a.u.x*e+F).toFixed(3),r=(a.u.y*e+B).toFixed(3);0>=c?f.moveTo(j,l):(f.bezierCurveTo(p,q,k,r,j,l),c>=K&&w&&(p=(a.v.x*e+F).toFixed(3),q=(a.v.y*e+B).toFixed(3),k=(n.u.x*e+F).toFixed(3),r=(n.u.y*e+B).toFixed(3),j=(n.x*e+F).toFixed(3),l=(n.y*e+B).toFixed(3),f.bezierCurveTo(p,q,k,r,j,l)))}else 0>=c?f.moveTo(j,l):f.lineTo(j,l)});w&&!d&&f.closePath();f.fill();f.stroke()},updateTexture:function(a,b){this.updateCanvas(b);b.texture&&a.deleteTexture(b.texture);a.bindBuffer(a.ARRAY_BUFFER,
b.textureCoordsBuffer);b.texture=a.createTexture();a.bindTexture(a.TEXTURE_2D,b.texture);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);0>=this.canvas.width||0>=this.canvas.height||a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(a,b,c){_.isObject(b.buffer)&&a.deleteBuffer(b.buffer);b.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,
b.buffer);a.enableVertexAttribArray(c.position);a.bufferData(a.ARRAY_BUFFER,b.triangles,a.STATIC_DRAW);_.isObject(b.textureCoordsBuffer)&&a.deleteBuffer(b.textureCoordsBuffer);b.textureCoordsBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b.textureCoordsBuffer);a.enableVertexAttribArray(c.textureCoords);a.bufferData(a.ARRAY_BUFFER,this.uv,a.STATIC_DRAW)},program:{create:function(a,b){var c=a.createProgram();_.each(b,function(b){a.attachShader(c,b)});a.linkProgram(c);if(!a.getProgramParameter(c,
a.LINK_STATUS))throw error=a.getProgramInfoLog(c),a.deleteProgram(c),new Two.Utils.Error("unable to link program: "+error);return c}},shaders:{create:function(a,b,c){c=a.createShader(a[c]);a.shaderSource(c,b);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS))throw b=a.getShaderInfoLog(c),a.deleteShader(c),new Two.Utils.Error("unable to compile shader "+c+": "+b);return c},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",
fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"}};f.ctx=f.canvas.getContext("2d");var x=Two[Two.Types.webgl]=function(a){this.count=0;this.domElement=document.createElement("canvas");this.elements=[];this.stage=null;a=_.defaults(a||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!1});a=this.ctx=this.domElement.getContext("webgl",a)||this.domElement.getContext("experimental-webgl",
a);if(!this.ctx)throw new Two.Utils.Error("unable to create a webgl context. Try using another renderer.");var b=f.shaders.create(a,f.shaders.vertex,f.shaders.types.vertex),c=f.shaders.create(a,f.shaders.fragment,f.shaders.types.fragment);this.program=f.program.create(a,[b,c]);a.useProgram(this.program);this.program.position=a.getAttribLocation(this.program,"a_position");this.program.matrix=a.getUniformLocation(this.program,"u_matrix");this.program.textureCoords=a.getAttribLocation(this.program,"a_textureCoords");
a.disable(a.DEPTH_TEST);a.enable(a.BLEND);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)};_.extend(x,{Group:b,Element:c,getStyles:function(a){var b={},e=a.id,h=a._matrix,g=a.stroke,j=a.linewidth,n=a.fill,x=a.opacity,r=a.visible,v=a.cap,q=a.join,t=a.miter,d=a.curved,w=a.closed,z=a.vertices;e&&(b.id=e);_.isObject(h)&&(b.matrix=b._matrix=h.toArray(!0),b.scale=b._scale=1);g&&(b.stroke=g);n&&(b.fill=n);_.isNumber(x)&&(b.opacity=
x);v&&(b.cap=v);q&&(b.join=q);t&&(b.miter=t);j&&(b.linewidth=j);z&&(b.vertices=l(z,d,w),b.commands=b.vertices,b.rect=f.getBoundingClientRect(b.commands,b.linewidth,b.curved),b.triangles=f.getTriangles(b.rect));b.visible=!!r;b.curved=!!d;b.closed=!!w;a instanceof Two.Polygon&&(f.updateBuffer(this.ctx,b,this.program),c.prototype.updateTexture.call(b,this.ctx));return b},setStyles:function(a,b,c,e,g,h){var j=!1;/matrix/.test(b)?(a[b]=c.toArray(!0),_.isNumber(e)&&(j=a.scale!==e,a.scale=e),a.updateMatrix()):
/(stroke|fill|opacity|cap|join|miter|linewidth)/.test(b)?(a[b]=c,a.rect=n(f.getBoundingClientRect(a.commands,a.linewidth,a.curved),a.rect),a.triangles=f.getTriangles(a.rect),f.updateBuffer(this.ctx,a,this.program),j=!0):"vertices"===b?(_.isUndefined(e)||(a.closed=e),_.isUndefined(g)||(a.curved=g),h?a.commands=l(c,a.curved,a.closed):(a.vertices=l(c,a.curved,a.closed),a.commands=a.vertices),a.rect=n(f.getBoundingClientRect(a.vertices,a.linewidth,a.curved),a.rect),a.triangles=f.getTriangles(a.rect),
f.updateBuffer(this.ctx,a,this.program),j=!0):a[b]=c;j&&a.updateTexture(this.ctx)}});_.extend(x.prototype,Backbone.Events,e.prototype,{setSize:function(a,b){e.prototype.setSize.apply(this,arguments);this.ratio=1;this.domElement.width=a;this.domElement.height=b;this.ctx.viewport(0,0,a,b);var c=this.ctx.getUniformLocation(this.program,"u_resolution");this.ctx.uniform2f(c,a,b);return this},render:function(){if(_.isNull(this.stage))return this;this.stage.render(this.ctx,this.program);return this}})})();(function(){var n=Two.Shape=function(e){this._matrix=new Two.Matrix;var j=_.debounce(_.bind(function(){var e=this._matrix.identity().translate(this.translation.x,this.translation.y).scale(this.scale).rotate(this.rotation);this.trigger(Two.Events.change,this.id,"matrix",e,this.scale)},this),0);this._rotation=0;Object.defineProperty(this,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e;j()}});this._scale="scale";Object.defineProperty(this,"scale",{get:function(){return this._scale},
set:function(e){this._scale=e;j()}});this.translation=new Two.Vector;this.rotation=0;this.scale=1;this.translation.bind(Two.Events.change,j);if(e)return this;n.MakeGetterSetter(this,n.Properties);this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.join=this.cap="round";this.miter=1};_.extend(n,{Properties:"fill stroke linewidth opacity visible cap join miter".split(" "),MakeGetterSetter:function(e,j){_.isArray(j)||(j=[j]);_.each(j,function(j){var h="_"+j;Object.defineProperty(e,
j,{get:function(){return this[h]},set:function(b){this[h]=b;this.trigger(Two.Events.change,this.id,j,b,this)}})})}});_.extend(n.prototype,Backbone.Events,{addTo:function(e){e.add(this);return this},noFill:function(){this.fill="transparent";return this},noStroke:function(){this.stroke="transparent";return this},clone:function(){var e=new n;e.translation.copy(this.translation);_.each(n.Properties,function(j){e[j]=this[j]},this);return this}})})();(function(){var n=Two.Group=function(){Two.Shape.call(this,!0);delete this.stroke;delete this.fill;delete this.linewidth;delete this.opacity;delete this.cap;delete this.join;delete this.miter;n.MakeGetterSetter(this,Two.Shape.Properties);this.children={}};_.extend(n,{MakeGetterSetter:function(e,j){_.isArray(j)||(j=[j]);_.each(j,function(j){var h="_"+j;Object.defineProperty(e,j,{get:function(){return this[h]},set:function(b){this[h]=b;_.each(this.children,function(c){c[j]=b})}})})}});_.extend(n.prototype,
Two.Shape.prototype,{clone:function(e){e=e||this.parent;var j=_.map(this.children,function(h){return h.clone(e)}),l=new n;e.add(l);l.add(j);l.translation.copy(this.translation);l.rotation=this.rotation;l.scale=this.scale;return l},corner:function(){var e=this.getBoundingClientRect(!0),j={x:e.left,y:e.top};_.each(this.children,function(e){e.translation.subSelf(j)});return this},center:function(){var e=this.getBoundingClientRect(!0);e.centroid={x:e.left+e.width/2,y:e.top+e.height/2};_.each(this.children,
function(j){j.translation.subSelf(e.centroid)});return this},add:function(e){var j=e,l=this.children,h=this.parent,b=[];_.isArray(e)||(j=_.toArray(arguments));var c=_.bind(function(b,c,a,e,h,j){this.trigger(Two.Events.change,b,c,a,e,h,j)},this);_.each(j,function(f){if(f){var e=f.id,a=f.parent;_.isUndefined(e)&&(h.add(f),e=f.id);_.isUndefined(l[e])&&(a&&delete a.children[e],l[e]=f,f.parent=this,f.unbind(Two.Events.change).bind(Two.Events.change,c),b.push(e))}},this);0<b.length&&this.trigger(Two.Events.change,
this.id,Two.Properties.hierarchy,b);return this},remove:function(e){var j=e,l=this.children,h=this.parent,b=[];if(0>=arguments.length&&h)return h.remove(this),this;_.isArray(e)||(j=_.toArray(arguments));_.each(j,function(c){var f=c.id;f in l&&(delete l[f],delete c.parent,c.unbind(Two.Events.change),b.push(f))});0<b.length&&this.trigger(Two.Events.change,this.id,Two.Properties.demotion,b);return this},getBoundingClientRect:function(e){var j=Infinity,l=-Infinity,h=Infinity,b=-Infinity;_.each(this.children,
function(c){c=c.getBoundingClientRect(!0);h&&(j&&l&&b)&&(h=Math.min(c.top,h),j=Math.min(c.left,j),l=Math.max(c.right,l),b=Math.max(c.bottom,b))},this);var c=e?this._matrix:Two.Utils.getComputedMatrix(this);e=c.multiply(j,h,1);c=c.multiply(l,b,1);return{top:e.y,left:e.x,right:c.x,bottom:c.y,width:c.x-e.x,height:c.y-e.y}},noFill:function(){_.each(this.children,function(e){e.noFill()});return this},noStroke:function(){_.each(this.children,function(e){e.noStroke()});return this}})})();(function(){var n=Math.min,e=Math.max,j=Math.round,l=Two.Polygon=function(h,b,c){Two.Shape.call(this);b=!!b;c=!!c;var f=0,l=1,a=!1,m=!1,p,s=[],g=_.debounce(_.bind(function(){var e,g;if(a||m){e=p.length;g=e-1;e=j(f*g);g=j(l*g);for(s.length=0;e<g+1;e++)s.push(p[e])}this.trigger(Two.Events.change,this.id,"vertices",s,b,c,a);m=a=!1},this),0);Object.defineProperty(this,"closed",{get:function(){return b},set:function(a){b=!!a;g()}});Object.defineProperty(this,"curved",{get:function(){return c},set:function(a){c=
!!a;g()}});Object.defineProperty(this,"beginning",{get:function(){return f},set:function(b){f=n(e(b,0),1);a=!0;g()}});Object.defineProperty(this,"ending",{get:function(){return l},set:function(b){l=n(e(b,0),1);a=!0;g()}});Object.defineProperty(this,"vertices",{get:function(){return p},set:function(a){var b=_.bind(function(a){_.each(a,function(a){a.bind(Two.Events.change,g)},this);m=!0;g()},this),c=_.bind(function(a){_.each(a,function(a){a.unbind(Two.Events.change,g)},this);m=!0;g()},this);p&&p.unbind();
p=new Two.Utils.Collection(a.slice(0));p.bind(Two.Events.insert,b);p.bind(Two.Events.remove,c);m=!0;b(p)}});this.vertices=h};_.extend(l.prototype,Two.Shape.prototype,{clone:function(){var e=_.map(this.vertices,function(b){return new Two.Vector(b.x,b.y)}),b=new l(e,this.closed,this.curved);_.each(Two.Shape.Properties,function(c){b[c]=this[c]},this);b.translation.copy(this.translation);b.rotation=this.rotation;b.scale=this.scale;return b},corner:function(){var e=this.getBoundingClientRect(!0),b={x:e.left,
y:e.top};_.each(this.vertices,function(c){c.subSelf(b)});return this},center:function(){var e=this.getBoundingClientRect(!0);e.centroid={x:e.left+e.width/2,y:e.top+e.height/2};_.each(this.vertices,function(b){b.subSelf(e.centroid)});return this},remove:function(){if(!this.parent)return this;this.parent.remove(this);return this},getBoundingClientRect:function(e){var b=this.linewidth,c=Infinity,f=-Infinity,j=Infinity,a=-Infinity;_.each(this.vertices,function(b){var e=b.x;b=b.y;j=Math.min(b,j);c=Math.min(e,
c);f=Math.max(e,f);a=Math.max(b,a)});j-=b;c-=b;f+=b;a+=b;b=e?this._matrix:Two.Utils.getComputedMatrix(this);e=b.multiply(c,j,1);b=b.multiply(f,a,1);return{top:e.y,left:e.x,right:b.x,bottom:b.y,width:b.x-e.x,height:b.y-e.y}}})})();
