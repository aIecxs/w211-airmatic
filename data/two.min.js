(function(){var y=this,m=y._,t={},k=Array.prototype,n=Object.prototype,c=k.push,f=k.slice,q=k.concat,s=n.toString,p=n.hasOwnProperty,B=k.forEach,r=k.map,w=k.reduce,u=k.reduceRight,h=k.filter,E=k.every,z=k.some,v=k.indexOf,A=k.lastIndexOf,n=Array.isArray,D=Object.keys,b=Function.prototype.bind,a=function(e){if(e instanceof a)return e;if(!(this instanceof a))return new a(e);this._wrapped=e};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=a),exports._=
a):y._=a;a.VERSION="1.5.1";var d=a.each=a.forEach=function(e,l,x){if(null!=e)if(B&&e.forEach===B)e.forEach(l,x);else if(e.length===+e.length)for(var b=0,d=e.length;b<d&&l.call(x,e[b],b,e)!==t;b++);else for(b in e)if(a.has(e,b)&&l.call(x,e[b],b,e)===t)break};a.map=a.collect=function(e,a,x){var b=[];if(null==e)return b;if(r&&e.map===r)return e.map(a,x);d(e,function(e,d,g){b.push(a.call(x,e,d,g))});return b};a.reduce=a.foldl=a.inject=function(e,l,x,b){var g=2<arguments.length;null==e&&(e=[]);if(w&&e.reduce===
w)return b&&(l=a.bind(l,b)),g?e.reduce(l,x):e.reduce(l);d(e,function(e,a,d){g?x=l.call(b,x,e,a,d):(x=e,g=!0)});if(!g)throw new TypeError("Reduce of empty array with no initial value");return x};a.reduceRight=a.foldr=function(e,l,x,b){var g=2<arguments.length;null==e&&(e=[]);if(u&&e.reduceRight===u)return b&&(l=a.bind(l,b)),g?e.reduceRight(l,x):e.reduceRight(l);var h=e.length;if(h!==+h)var s=a.keys(e),h=s.length;d(e,function(a,d,f){d=s?s[--h]:--h;g?x=l.call(b,x,e[d],d,f):(x=e[d],g=!0)});if(!g)throw new TypeError("Reduce of empty array with no initial value");
return x};a.find=a.detect=function(a,l,x){var b;g(a,function(a,e,d){if(l.call(x,a,e,d))return b=a,!0});return b};a.filter=a.select=function(a,l,x){var b=[];if(null==a)return b;if(h&&a.filter===h)return a.filter(l,x);d(a,function(a,e,d){l.call(x,a,e,d)&&b.push(a)});return b};a.reject=function(e,l,x){return a.filter(e,function(a,e,b){return!l.call(x,a,e,b)},x)};a.every=a.all=function(e,l,x){l||(l=a.identity);var b=!0;if(null==e)return b;if(E&&e.every===E)return e.every(l,x);d(e,function(a,e,d){if(!(b=
b&&l.call(x,a,e,d)))return t});return!!b};var g=a.some=a.any=function(e,l,x){l||(l=a.identity);var b=!1;if(null==e)return b;if(z&&e.some===z)return e.some(l,x);d(e,function(a,e,d){if(b||(b=l.call(x,a,e,d)))return t});return!!b};a.contains=a.include=function(a,l){return null==a?!1:v&&a.indexOf===v?-1!=a.indexOf(l):g(a,function(a){return a===l})};a.invoke=function(e,l){var x=f.call(arguments,2),b=a.isFunction(l);return a.map(e,function(a){return(b?l:a[l]).apply(a,x)})};a.pluck=function(e,l){return a.map(e,
function(a){return a[l]})};a.where=function(e,l,x){return a.isEmpty(l)?x?void 0:[]:a[x?"find":"filter"](e,function(a){for(var e in l)if(l[e]!==a[e])return!1;return!0})};a.findWhere=function(e,l){return a.where(e,l,!0)};a.max=function(e,l,x){if(!l&&a.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!l&&a.isEmpty(e))return-Infinity;var b={computed:-Infinity,value:-Infinity};d(e,function(a,e,d){e=l?l.call(x,a,e,d):a;e>b.computed&&(b={value:a,computed:e})});return b.value};a.min=
function(e,l,b){if(!l&&a.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!l&&a.isEmpty(e))return Infinity;var g={computed:Infinity,value:Infinity};d(e,function(a,e,d){e=l?l.call(b,a,e,d):a;e<g.computed&&(g={value:a,computed:e})});return g.value};a.shuffle=function(e){var l,b=0,g=[];d(e,function(e){l=a.random(b++);g[b-1]=g[l];g[l]=e});return g};var H=function(e){return a.isFunction(e)?e:function(a){return a[e]}};a.sortBy=function(e,l,b){var d=H(l);return a.pluck(a.map(e,function(a,
e,l){return{value:a,index:e,criteria:d.call(b,a,e,l)}}).sort(function(a,e){var l=a.criteria,b=e.criteria;if(l!==b){if(l>b||void 0===l)return 1;if(l<b||void 0===b)return-1}return a.index<e.index?-1:1}),"value")};var I=function(e,l,b,g){var h={},s=H(null==l?a.identity:l);d(e,function(a,l){var d=s.call(b,a,l,e);g(h,d,a)});return h};a.groupBy=function(e,l,b){return I(e,l,b,function(e,l,b){(a.has(e,l)?e[l]:e[l]=[]).push(b)})};a.countBy=function(e,l,b){return I(e,l,b,function(e,l){a.has(e,l)||(e[l]=0);
e[l]++})};a.sortedIndex=function(e,l,b,d){b=null==b?a.identity:H(b);l=b.call(d,l);for(var g=0,h=e.length;g<h;){var s=g+h>>>1;b.call(d,e[s])<l?g=s+1:h=s}return g};a.toArray=function(e){return e?a.isArray(e)?f.call(e):e.length===+e.length?a.map(e,a.identity):a.values(e):[]};a.size=function(e){return null==e?0:e.length===+e.length?e.length:a.keys(e).length};a.first=a.head=a.take=function(a,l,b){return null==a?void 0:null==l||b?a[0]:f.call(a,0,l)};a.initial=function(a,l,b){return f.call(a,0,a.length-
(null==l||b?1:l))};a.last=function(a,l,b){return null==a?void 0:null==l||b?a[a.length-1]:f.call(a,Math.max(a.length-l,0))};a.rest=a.tail=a.drop=function(a,l,b){return f.call(a,null==l||b?1:l)};a.compact=function(e){return a.filter(e,a.identity)};var C=function(e,l,b){if(l&&a.every(e,a.isArray))return q.apply(b,e);d(e,function(e){a.isArray(e)||a.isArguments(e)?l?c.apply(b,e):C(e,l,b):b.push(e)});return b};a.flatten=function(a,l){return C(a,l,[])};a.without=function(e){return a.difference(e,f.call(arguments,
1))};a.uniq=a.unique=function(e,l,b,g){a.isFunction(l)&&(g=b,b=l,l=!1);b=b?a.map(e,b,g):e;var h=[],s=[];d(b,function(b,d){(l?d&&s[s.length-1]===b:a.contains(s,b))||(s.push(b),h.push(e[d]))});return h};a.union=function(){return a.uniq(a.flatten(arguments,!0))};a.intersection=function(e){var l=f.call(arguments,1);return a.filter(a.uniq(e),function(e){return a.every(l,function(l){return 0<=a.indexOf(l,e)})})};a.difference=function(e){var l=q.apply(k,f.call(arguments,1));return a.filter(e,function(e){return!a.contains(l,
e)})};a.zip=function(){for(var e=a.max(a.pluck(arguments,"length").concat(0)),l=Array(e),b=0;b<e;b++)l[b]=a.pluck(arguments,""+b);return l};a.object=function(a,l){if(null==a)return{};for(var b={},d=0,g=a.length;d<g;d++)l?b[a[d]]=l[d]:b[a[d][0]]=a[d][1];return b};a.indexOf=function(e,l,b){if(null==e)return-1;var d=0,g=e.length;if(b)if("number"==typeof b)d=0>b?Math.max(0,g+b):b;else return d=a.sortedIndex(e,l),e[d]===l?d:-1;if(v&&e.indexOf===v)return e.indexOf(l,b);for(;d<g;d++)if(e[d]===l)return d;
return-1};a.lastIndexOf=function(a,l,b){if(null==a)return-1;var d=null!=b;if(A&&a.lastIndexOf===A)return d?a.lastIndexOf(l,b):a.lastIndexOf(l);for(b=d?b:a.length;b--;)if(a[b]===l)return b;return-1};a.range=function(a,l,b){1>=arguments.length&&(l=a||0,a=0);b=arguments[2]||1;for(var d=Math.max(Math.ceil((l-a)/b),0),g=0,h=Array(d);g<d;)h[g++]=a,a+=b;return h};var F=function(){};a.bind=function(e,l){var d,g;if(b&&e.bind===b)return b.apply(e,f.call(arguments,1));if(!a.isFunction(e))throw new TypeError;
d=f.call(arguments,2);return g=function(){if(!(this instanceof g))return e.apply(l,d.concat(f.call(arguments)));F.prototype=e.prototype;var a=new F;F.prototype=null;var b=e.apply(a,d.concat(f.call(arguments)));return Object(b)===b?b:a}};a.partial=function(a){var b=f.call(arguments,1);return function(){return a.apply(this,b.concat(f.call(arguments)))}};a.bindAll=function(e){var b=f.call(arguments,1);if(0===b.length)throw Error("bindAll must be passed function names");d(b,function(b){e[b]=a.bind(e[b],
e)});return e};a.memoize=function(e,b){var d={};b||(b=a.identity);return function(){var g=b.apply(this,arguments);return a.has(d,g)?d[g]:d[g]=e.apply(this,arguments)}};a.delay=function(a,b){var d=f.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};a.defer=function(e){return a.delay.apply(a,[e,1].concat(f.call(arguments,1)))};a.throttle=function(a,b,d){var g,h,s,f=null,c=0;d||(d={});var k=function(){c=!1===d.leading?0:new Date;f=null;s=a.apply(g,h)};return function(){var p=
new Date;c||!1!==d.leading||(c=p);var H=b-(p-c);g=this;h=arguments;0>=H?(clearTimeout(f),f=null,c=p,s=a.apply(g,h)):f||!1===d.trailing||(f=setTimeout(k,H));return s}};a.debounce=function(a,b,d){var g,h=null;return function(){var s=this,f=arguments,c=d&&!h;clearTimeout(h);h=setTimeout(function(){h=null;d||(g=a.apply(s,f))},b);c&&(g=a.apply(s,f));return g}};a.once=function(a){var b=!1,d;return function(){if(b)return d;b=!0;d=a.apply(this,arguments);a=null;return d}};a.wrap=function(a,b){return function(){var d=
[a];c.apply(d,arguments);return b.apply(this,d)}};a.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;0<=d;d--)b=[a[d].apply(this,b)];return b[0]}};a.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};a.keys=D||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var b=[],d;for(d in e)a.has(e,d)&&b.push(d);return b};a.values=function(e){var b=[],d;for(d in e)a.has(e,d)&&b.push(e[d]);return b};a.pairs=function(e){var b=
[],d;for(d in e)a.has(e,d)&&b.push([d,e[d]]);return b};a.invert=function(e){var b={},d;for(d in e)a.has(e,d)&&(b[e[d]]=d);return b};a.functions=a.methods=function(e){var b=[],d;for(d in e)a.isFunction(e[d])&&b.push(d);return b.sort()};a.extend=function(a){d(f.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};a.pick=function(a){var b={},g=q.apply(k,f.call(arguments,1));d(g,function(d){d in a&&(b[d]=a[d])});return b};a.omit=function(e){var b={},d=q.apply(k,f.call(arguments,1)),
g;for(g in e)a.contains(d,g)||(b[g]=e[g]);return b};a.defaults=function(a){d(f.call(arguments,1),function(b){if(b)for(var d in b)void 0===a[d]&&(a[d]=b[d])});return a};a.clone=function(e){return a.isObject(e)?a.isArray(e)?e.slice():a.extend({},e):e};a.tap=function(a,b){b(a);return a};var K=function(b,d,g,h){if(b===d)return 0!==b||1/b==1/d;if(null==b||null==d)return b===d;b instanceof a&&(b=b._wrapped);d instanceof a&&(d=d._wrapped);var f=s.call(b);if(f!=s.call(d))return!1;switch(f){case "[object String]":return b==
String(d);case "[object Number]":return b!=+b?d!=+d:0==b?1/b==1/d:b==+d;case "[object Date]":case "[object Boolean]":return+b==+d;case "[object RegExp]":return b.source==d.source&&b.global==d.global&&b.multiline==d.multiline&&b.ignoreCase==d.ignoreCase}if("object"!=typeof b||"object"!=typeof d)return!1;for(var c=g.length;c--;)if(g[c]==b)return h[c]==d;var c=b.constructor,k=d.constructor;if(c!==k&&!(a.isFunction(c)&&c instanceof c&&a.isFunction(k)&&k instanceof k))return!1;g.push(b);h.push(d);c=0;
k=!0;if("[object Array]"==f){if(c=b.length,k=c==d.length)for(;c--&&(k=K(b[c],d[c],g,h)););}else{for(var p in b)if(a.has(b,p)&&(c++,!(k=a.has(d,p)&&K(b[p],d[p],g,h))))break;if(k){for(p in d)if(a.has(d,p)&&!c--)break;k=!c}}g.pop();h.pop();return k};a.isEqual=function(a,b){return K(a,b,[],[])};a.isEmpty=function(b){if(null==b)return!0;if(a.isArray(b)||a.isString(b))return 0===b.length;for(var d in b)if(a.has(b,d))return!1;return!0};a.isElement=function(a){return!(!a||1!==a.nodeType)};a.isArray=n||function(a){return"[object Array]"==
s.call(a)};a.isObject=function(a){return a===Object(a)};d("Arguments Function String Number Date RegExp".split(" "),function(b){a["is"+b]=function(a){return s.call(a)=="[object "+b+"]"}});a.isArguments(arguments)||(a.isArguments=function(b){return!(!b||!a.has(b,"callee"))});"function"!==typeof/./&&(a.isFunction=function(a){return"function"===typeof a});a.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};a.isNaN=function(b){return a.isNumber(b)&&b!=+b};a.isBoolean=function(a){return!0===
a||!1===a||"[object Boolean]"==s.call(a)};a.isNull=function(a){return null===a};a.isUndefined=function(a){return void 0===a};a.has=function(a,b){return p.call(a,b)};a.noConflict=function(){y._=m;return this};a.identity=function(a){return a};a.times=function(a,b,d){for(var g=Array(Math.max(0,a)),h=0;h<a;h++)g[h]=b.call(d,h);return g};a.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};var L={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};
L.unescape=a.invert(L.escape);var G={escape:RegExp("["+a.keys(L.escape).join("")+"]","g"),unescape:RegExp("("+a.keys(L.unescape).join("|")+")","g")};a.each(["escape","unescape"],function(b){a[b]=function(a){return null==a?"":(""+a).replace(G[b],function(a){return L[b][a]})}});a.result=function(b,d){if(null!=b){var g=b[d];return a.isFunction(g)?g.call(b):g}};a.mixin=function(b){d(a.functions(b),function(d){var g=a[d]=b[d];a.prototype[d]=function(){var b=[this._wrapped];c.apply(b,arguments);b=g.apply(a,
b);return this._chain?a(b).chain():b}})};var R=0;a.uniqueId=function(a){var b=++R+"";return a?a+b:b};a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\t|\u2028|\u2029/g;a.template=function(b,d,g){var h;g=a.defaults({},g,a.templateSettings);var s=RegExp([(g.escape||N).source,(g.interpolate||N).source,(g.evaluate||N).source].join("|")+
"|$","g"),c=0,f="__p+='";b.replace(s,function(a,d,g,h,l){f+=b.slice(c,l).replace(T,function(a){return"\\"+S[a]});d&&(f+="'+\n((__t=("+d+"))==null?'':_.escape(__t))+\n'");g&&(f+="'+\n((__t=("+g+"))==null?'':__t)+\n'");h&&(f+="';\n"+h+"\n__p+='");c=l+a.length;return a});f+="';\n";g.variable||(f="with(obj||{}){\n"+f+"}\n");f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{h=new Function(g.variable||"obj","_",f)}catch(k){throw k.source=
f,k;}if(d)return h(d,a);d=function(b){return h.call(this,b,a)};d.source="function("+(g.variable||"obj")+"){\n"+f+"}";return d};a.chain=function(b){return a(b).chain()};a.mixin(a);d("pop push reverse shift sort splice unshift".split(" "),function(b){var d=k[b];a.prototype[b]=function(){var g=this._wrapped;d.apply(g,arguments);"shift"!=b&&"splice"!=b||0!==g.length||delete g[0];return this._chain?a(g).chain():g}});d(["concat","join","slice"],function(b){var d=k[b];a.prototype[b]=function(){var b=d.apply(this._wrapped,
arguments);return this._chain?a(b).chain():b}});a.extend(a.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);var Backbone=Backbone||{};
(function(){var y=[].slice,m=function(k,n,c){var f;k=-1;var q=n.length;switch(c.length){case 0:for(;++k<q;)(f=n[k]).callback.call(f.ctx);break;case 1:for(;++k<q;)(f=n[k]).callback.call(f.ctx,c[0]);break;case 2:for(;++k<q;)(f=n[k]).callback.call(f.ctx,c[0],c[1]);break;case 3:for(;++k<q;)(f=n[k]).callback.call(f.ctx,c[0],c[1],c[2]);break;default:for(;++k<q;)(f=n[k]).callback.apply(f.ctx,c)}},t=Backbone.Events={on:function(k,n,c){this._events||(this._events={});(this._events[k]||(this._events[k]=[])).push({callback:n,
context:c,ctx:c||this});return this},once:function(k,n,c){var f=this,q=_.once(function(){f.off(k,q);n.apply(this,arguments)});q._callback=n;this.on(k,q,c);return this},off:function(k,n,c){var f,q,s,p,m,r,w,u;if(!this._events)return this;if(!k&&!n&&!c)return this._events={},this;p=k?[k]:_.keys(this._events);m=0;for(r=p.length;m<r;m++)if(k=p[m],f=this._events[k]){s=[];if(n||c)for(w=0,u=f.length;w<u;w++)q=f[w],(n&&n!==(q.callback._callback||q.callback)||c&&c!==q.context)&&s.push(q);this._events[k]=s}return this},
trigger:function(k){if(!this._events)return this;var n=y.call(arguments,1),c=this._events[k],f=this._events.all;c&&m(this,c,n);f&&m(this,f,arguments);return this},listenTo:function(k,n,c){var f=this._listeners||(this._listeners={}),q=k._listenerId||(k._listenerId=_.uniqueId("l"));f[q]=k;k.on(n,c||this,this);return this},stopListening:function(k,n,c){var f=this._listeners;if(f){if(k)k.off(n,c,this),n||c||delete f[k._listenerId];else{for(var q in f)f[q].off(null,null,this);this._listeners={}}return this}}};
t.bind=t.on;t.unbind=t.off;"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports&&(exports=module.exports=t),exports.Backbone=exports.Backbone||Backbone)})();(function(){function y(c,f){var k=(new Date).getTime(),s=Math.max(0,16-(k-t)),p=m.setTimeout(function(){c(k+s)},s);t=k+s;return p}var m=this,t=0,k=["ms","moz","webkit","o"];if("undefined"!==typeof exports)"undefined"!==typeof module&&module.exports&&(exports=module.exports=y),exports.requestAnimationFrame=y;else{for(var n=0;n<k.length&&!m.requestAnimationFrame;++n)m.requestAnimationFrame=m[k[n]+"RequestAnimationFrame"],m.cancelAnimationFrame=m[k[n]+"CancelAnimationFrame"]||m[k[n]+"CancelRequestAnimationFrame"];
m.requestAnimationFrame||(m.requestAnimationFrame=y);m.cancelAnimationFrame||(m.cancelAnimationFrame=function(c){clearTimeout(c)})}})();(function(){function y(){var b=document.body.getBoundingClientRect(),a=this.width=b.width,b=this.height=b.height;this.renderer.setSize(a,b,this.ratio);this.trigger(h.Events.resize,a,b)}var m=this,t=m.Two||{},k=Math.sin,n=Math.cos,c=Math.atan2,f=Math.sqrt,q=Math.abs,s=Math.PI,p=2*s,B=s/2,r=Math.pow,w=0,u={hasEventListeners:_.isFunction(m.addEventListener),bind:function(b,a,d,g){this.hasEventListeners?b.addEventListener(a,d,!!g):b.attachEvent("on"+a,d);return this},unbind:function(b,a,d,g){this.hasEventListeners?
b.removeEventListeners(a,d,!!g):b.detachEvent("on"+a,d);return this}},h=m.Two=function(b){b=_.defaults(b||{},{fullscreen:!1,width:640,height:480,type:h.Types.canvas,autostart:!1});_.each(b,function(a,b){"fullscreen"!==b&&("width"!==b&&"height"!==b&&"autostart"!==b)&&(this[b]=a)},this);_.isElement(b.domElement)&&(this.type=h.Types[b.domElement.tagName.toLowerCase()]);this.renderer=new h[this.type](this);h.Utils.setPlaying.call(this,b.autostart);this.frameCount=0;b.fullscreen?(b=_.bind(y,this),_.extend(document.body.style,
{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),_.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),u.bind(m,"resize",b),b()):_.isElement(b.domElement)||(this.renderer.setSize(b.width,b.height,this.ratio),this.width=b.width,this.height=b.height);this.scene=this.renderer.scene;h.Instances.push(this)};_.extend(h,{Array:m.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},
Version:"v0.3.0",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){m.Two=t;return this},uniqueId:function(){var b=w;w++;return b},Utils:{Curve:{CollinearityEpsilon:r(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:0.25,angle:0,epsilon:0.01}},setPlaying:function(b){this.playing=
!!b;return this},getComputedMatrix:function(b,a){a=a&&a.identity()||new h.Matrix;for(var d=b;d&&d._matrix;){var g=d._matrix.elements;a.multiply(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9]);d=d.parent}return a},getComputedScale:function(b){for(var a=1;b&&b._scale;)a*=b._scale,b=b.parent;return a},applySvgAttributes:function(b,a){a.cap="butt";a.join="bevel";_.each(b.attributes,function(b,g){switch(b.nodeName){case "visibility":a.visible=!!b.nodeValue;break;case "stroke-linecap":a.cap=b.nodeValue;
break;case "stroke-linejoin":a.join=b.nodeValue;break;case "stroke-miterlimit":a.miter=b.nodeValue;break;case "stroke-width":a.linewidth=parseFloat(b.nodeValue);break;case "stroke-opacity":case "fill-opacity":a.opacity=b.nodeValue;break;case "fill":a.fill=b.nodeValue;break;case "stroke":a.stroke=b.nodeValue}});return a},read:{svg:function(){return h.Utils.read.g.apply(this,arguments)},g:function(b){var a=new h.Group;this.add(a);_.each(b.childNodes,function(b){var g=b.nodeName;g&&(g=g.replace(/svg\:/ig,
"").toLowerCase(),g in h.Utils.read&&(b=h.Utils.read[g].call(this,b),a.add(b)))},this);return h.Utils.applySvgAttributes(b,a)},polygon:function(b,a){var d=[];b.getAttribute("points").replace(/([\d\.?]+),([\d\.?]+)/g,function(a,b,g){d.push(new h.Anchor(parseFloat(b),parseFloat(g)))});var g=(new h.Polygon(d,!a)).noStroke();return h.Utils.applySvgAttributes(b,g)},polyline:function(b){return h.Utils.read.polygon(b,!0)},path:function(b){var a,d,g,f=!1,s=!1,c=b.getAttribute("d").match(/[a-df-z][^a-df-z]*/ig),
k=c.length-1,c=_.flatten(_.map(c,function(b,c){var p,q,n=b[0],m=n.toLowerCase();g=b.slice(1).trim();g=g.replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(a,b,d){return parseFloat(b)*Math.pow(10,d)});g=g.split(/[\s,]+|(?=\s?[+\-])/);f=n===m;var C,e,l,x;switch(m){case "z":c>=k?s=!0:(q=a.x,p=a.y,p=new h.Anchor(q,p,void 0,void 0,void 0,void 0,h.Commands.close));break;case "m":case "l":q=parseFloat(g[0]);p=parseFloat(g[1]);p=new h.Anchor(q,p,void 0,void 0,void 0,void 0,"m"===m?h.Commands.move:h.Commands.line);
f&&p.addSelf(a);a=p;break;case "h":case "v":q="h"===m?"x":"y";n="x"===q?"y":"x";p=new h.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,h.Commands.line);p[q]=parseFloat(g[0]);p[n]=a[n];f&&(p[q]+=a[q]);a=p;break;case "s":case "c":p=a.x;n=a.y;d||(d=(new h.Vector).copy(a));"c"===m?(C=parseFloat(g[0]),q=parseFloat(g[1]),m=parseFloat(g[2]),e=parseFloat(g[3]),l=parseFloat(g[4]),x=parseFloat(g[5])):(e=h.Utils.getReflection(a,d,f),C=e.x,q=e.y,m=parseFloat(g[0]),e=parseFloat(g[1]),l=parseFloat(g[2]),x=parseFloat(g[3]));
f&&(C+=p,q+=n,m+=p,e+=n,l+=p,x+=n);_.isObject(a.controls)||h.Anchor.AppendCurveProperties(a);a.controls.right.set(C,q);a=p=new h.Anchor(l,x,m,e,void 0,void 0,h.Commands.curve);d=p.controls.left;break;case "t":case "q":p=a.x;n=a.y;d||(d=(new h.Vector).copy(a));d.isZero()?(C=p,q=n):(C=d.x,n=d.y);"q"===m?(m=parseFloat(g[0]),e=parseFloat(g[1]),l=parseFloat(g[1]),x=parseFloat(g[2])):(e=h.Utils.getReflection(a,d,f),m=e.x,e=e.y,l=parseFloat(g[0]),x=parseFloat(g[1]));f&&(C+=p,q+=n,m+=p,e+=n,l+=p,x+=n);_.isObject(a.controls)||
h.Anchor.AppendCurveProperties(a);a.controls.right.set(C,q);a=p=new h.Anchor(l,x,m,e,void 0,void 0,h.Commands.curve);d=p.controls.left;break;case "a":throw new h.Utils.Error("not yet able to interpret Elliptical Arcs.");}return p}));if(!(1>=c.length))return c=_.compact(c),c=(new h.Polygon(c,s,void 0,!0)).noStroke(),h.Utils.applySvgAttributes(b,c)},circle:function(b){var a=parseFloat(b.getAttribute("cx")),d=parseFloat(b.getAttribute("cy")),g=parseFloat(b.getAttribute("r")),f=h.Resolution,c=_.map(_.range(f),
function(a){var b=a/f*p;a=g*n(b);b=g*k(b);return new h.Anchor(a,b)},this),c=(new h.Polygon(c,!0,!0)).noStroke();c.translation.set(a,d);return h.Utils.applySvgAttributes(b,c)},ellipse:function(b){var a=parseFloat(b.getAttribute("cx")),d=parseFloat(b.getAttribute("cy")),g=parseFloat(b.getAttribute("rx")),c=parseFloat(b.getAttribute("ry")),f=h.Resolution,s=_.map(_.range(f),function(a){var b=a/f*p;a=g*n(b);b=c*k(b);return new h.Anchor(a,b)},this),s=(new h.Polygon(s,!0,!0)).noStroke();s.translation.set(a,
d);return h.Utils.applySvgAttributes(b,s)},rect:function(b){var a=parseFloat(b.getAttribute("x")),d=parseFloat(b.getAttribute("y")),g=parseFloat(b.getAttribute("width")),f=parseFloat(b.getAttribute("height")),g=g/2,f=f/2,c=[new h.Anchor(g,f),new h.Anchor(-g,f),new h.Anchor(-g,-f),new h.Anchor(g,-f)],c=(new h.Polygon(c,!0)).noStroke();c.translation.set(a+g,d+f);return h.Utils.applySvgAttributes(b,c)},line:function(b){var a=parseFloat(b.getAttribute("x1")),d=parseFloat(b.getAttribute("y1")),g=parseFloat(b.getAttribute("x2")),
f=parseFloat(b.getAttribute("y2")),g=(g-a)/2,f=(f-d)/2,c=[new h.Anchor(-g,-f),new h.Anchor(g,f)],c=(new h.Polygon(c)).noFill();c.translation.set(a+g,d+f);return h.Utils.applySvgAttributes(b,c)}},subdivide:function(b,a,d,g,f,k,n,m,u){var r=h.Utils.Curve.CollinearityEpsilon,v=h.Utils.Curve.RecursionLimit,w=h.Utils.Curve.CuspLimit,B=h.Utils.Curve.Tolerance,t;u=u||0;if(u>v)return[];var v=(b+d)/2,z=(a+g)/2,e=(d+f)/2,l=(g+k)/2,x=(f+n)/2,A=(k+m)/2,y=(v+e)/2,E=(z+l)/2,e=(e+x)/2,l=(l+A)/2,D=(y+e)/2,O=(E+l)/
2;t=n-b;var M=m-a,P=q((d-n)*M-(g-m)*t),Q=q((f-n)*M-(k-m)*t);if(0<u){if(P>r&&Q>r&&(P+Q)*(P+Q)<=B.distance*(t*t+M*M)){if(B.angle<B.epsilon)return[new h.Anchor(D,O)];t=c(k-g,f-d);r=q(t-c(g-a,d-b));t=q(c(m-k,n-f)-t);r>=s&&(r=p-r);t>=s&&(t=p-t);if(r+t<B.angle)return[new h.Anchor(D,O)];if(0!==w){if(r>w)return[new h.Anchor(d,g)];if(t>w)return[new h.Anchor(f,k)]}}}else if(P>r)if(P*P<=B.distance*(t*t+M*M)){if(B.angle<B.epsilon)return[new h.Anchor(D,O)];r=q(c(k-g,f-d)-c(g-a,d-b));r>=s&&(r=p-r);if(r<B.angle)return[new h.Anchor(d,
g),new h.Anchor(f,k)];if(0!==w&&r>w)return[new h.Anchor(d,g)]}else if(Q>r){if(Q*Q<=B.distance*(t*t+M*M)){if(B.angle<B.epsilon)return[new h.Anchor(D,O)];r=q(c(m-k,n-f)-c(k-g,f-d));r>=s&&(r=p-r);if(r<B.angle)return[new h.Anchor(d,g),new h.Anchor(f,k)];if(0!==w&&r>w)return[new h.Anchor(f,k)]}}else if(t=D-(b+n)/2,M=O-(a+m)/2,t*t+M*M<=B.distance)return[new h.Anchor(D,O)];return h.Utils.subdivide(b,a,v,z,y,E,D,O,u+1).concat(h.Utils.subdivide(D,O,e,l,x,A,n,m,u+1))},getCurveFromPoints:function(b,a){for(var d=
b.length,g=d-1,f=0;f<d;f++){var c=b[f];_.isObject(c.controls)||h.Anchor.AppendCurveProperties(c);var s=a?D(f-1,d):Math.max(f-1,0),k=a?D(f+1,d):Math.min(f+1,g);A(b[s],c,b[k]);c._command=0===f?h.Commands.move:h.Commands.curve;c.controls.left.x=_.isNumber(c.controls.left.x)?c.controls.left.x:c.x;c.controls.left.y=_.isNumber(c.controls.left.y)?c.controls.left.y:c.y;c.controls.right.x=_.isNumber(c.controls.right.x)?c.controls.right.x:c.x;c.controls.right.y=_.isNumber(c.controls.right.y)?c.controls.right.y:
c.y}},getControlPoints:function(b,a,d){var g=v(b,a),f=v(d,a);b=E(b,a);d=E(d,a);var c=(g+f)/2;a.u=_.isObject(a.controls.left)?a.controls.left:new h.Vector(a.x,a.y);a.v=_.isObject(a.controls.right)?a.controls.right:new h.Vector(a.x,a.y);if(1E-4>b||1E-4>d)return a.controls.left.copy(a),a.controls.right.copy(a),a;b*=0.33;d*=0.33;c=f<g?c+B:c-B;a.controls.left.x=a.x+n(c)*b;a.controls.left.y=a.y+k(c)*b;c-=s;a.controls.right.x=a.x+n(c)*d;a.controls.right.y=a.y+k(c)*d;return a},getReflection:function(b,a,
d){var g=b.distanceTo(a);if(1E-4>=g)return d?new h.Vector:b.clone();a=v(b,a);return new h.Vector(g*Math.cos(a)+(d?0:b.x),g*Math.sin(a)+(d?0:b.y))},angleBetween:function(b,a){return c(b.y-a.y,b.x-a.x)},distanceBetweenSquared:function(b,a){var d=b.x-a.x,g=b.y-a.y;return d*d+g*g},distanceBetween:function(b,a){return f(z(b,a))},mod:function(b,a){for(;0>b;)b+=a;return b%a},Collection:function(){Array.call(this);1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&
Array.prototype.push.apply(this,arguments[0])},Error:function(b){this.name="two.js";this.message=b}}});h.Utils.Error.prototype=Error();h.Utils.Error.prototype.constructor=h.Utils.Error;h.Utils.Collection.prototype=[];h.Utils.Collection.constructor=h.Utils.Collection;_.extend(h.Utils.Collection.prototype,Backbone.Events,{pop:function(){var b=Array.prototype.pop.apply(this,arguments);this.trigger(h.Events.remove,[b]);return b},shift:function(){var b=Array.prototype.shift.apply(this,arguments);this.trigger(h.Events.remove,
[b]);return b},push:function(){var b=Array.prototype.push.apply(this,arguments);this.trigger(h.Events.insert,arguments);return b},unshift:function(){var b=Array.prototype.unshift.apply(this,arguments);this.trigger(h.Events.insert,arguments);return b},splice:function(){var b=Array.prototype.splice.apply(this,arguments),a;this.trigger(h.Events.remove,b);2<arguments.length&&(a=this.slice(arguments[0],arguments.length-2),this.trigger(h.Events.insert,a));return b}});var E=h.Utils.distanceBetween,z=h.Utils.distanceBetweenSquared,
v=h.Utils.angleBetween,A=h.Utils.getControlPoints,D=h.Utils.mod;_.extend(h.prototype,Backbone.Events,{appendTo:function(b){b.appendChild(this.renderer.domElement);return this},play:function(){h.Utils.setPlaying.call(this,!0);return this.trigger(h.Events.play)},pause:function(){this.playing=!1;return this.trigger(h.Events.pause)},update:function(){var b=!!this._lastFrame,a=(m.performance&&m.performance.now?m.performance:Date).now();this.frameCount++;b&&(this.timeDelta=parseFloat((a-this._lastFrame).toFixed(3)));
this._lastFrame=a;var b=this.width,a=this.height,d=this.renderer;b===d.width&&a===d.height||d.setSize(b,a,this.ratio);return this.trigger(h.Events.update,this.frameCount,this.timeDelta)},render:function(){this.renderer.render();return this.trigger(h.Events.render,this.frameCount)},add:function(b){var a=b;_.isArray(b)||(a=_.toArray(arguments));this.scene.add(a);return this},remove:function(b){var a=b;_.isArray(b)||(a=_.toArray(arguments));this.scene.remove(a);return this},clear:function(){this.scene.remove(_.toArray(this.scene.children));
return this},makeLine:function(b,a,d,g){d=(d-b)/2;g=(g-a)/2;var c=[new h.Anchor(-d,-g),new h.Anchor(d,g)],c=(new h.Polygon(c)).noFill();c.translation.set(b+d,a+g);this.scene.add(c);return c},makeRectangle:function(b,a,d,g){d/=2;g/=2;g=[new h.Anchor(d,g),new h.Anchor(-d,g),new h.Anchor(-d,-g),new h.Anchor(d,-g)];g=new h.Polygon(g,!0);g.translation.set(b,a);this.scene.add(g);return g},makeCircle:function(b,a,d){return this.makeEllipse(b,a,d,d)},makeEllipse:function(b,a,d,g){var c=h.Resolution,f=_.map(_.range(c),
function(a){var b=a/c*p;a=d*n(b);b=g*k(b);return new h.Anchor(a,b)},this),f=new h.Polygon(f,!0,!0);f.translation.set(b,a);this.scene.add(f);return f},makeCurve:function(b){var a=arguments.length,d=b;if(!_.isArray(b))for(var d=[],g=0;g<a;g+=2){var c=arguments[g];if(!_.isNumber(c))break;d.push(new h.Anchor(c,arguments[g+1]))}var a=arguments[a-1],d=new h.Polygon(d,!(_.isBoolean(a)&&a),!0),a=d.getBoundingClientRect(),f=a.left+a.width/2,s=a.top+a.height/2;_.each(d.vertices,function(a){a.x-=f;a.y-=s});
d.translation.set(f,s);this.scene.add(d);return d},makePolygon:function(b){var a=arguments.length,d=b;if(!_.isArray(b))for(var d=[],g=0;g<a;g+=2){var c=arguments[g];if(!_.isNumber(c))break;d.push(new h.Anchor(c,arguments[g+1]))}a=arguments[a-1];d=new h.Polygon(d,!(_.isBoolean(a)&&a));a=d.getBoundingClientRect();d.center().translation.set(a.left+a.width/2,a.top+a.height/2);this.scene.add(d);return d},makeGroup:function(b){var a=b;_.isArray(b)||(a=_.toArray(arguments));var d=new h.Group;this.scene.add(d);
d.add(a);return d},interpret:function(b){var a=b.tagName.toLowerCase();if(!(a in h.Utils.read))return null;b=h.Utils.read[a].call(this,b);this.add(b);return b}});(function(){requestAnimationFrame(arguments.callee);_.each(h.Instances,function(b){b.playing&&b.update().render()})})();"function"===typeof define&&define.amd?define(function(){return h}):"undefined"!=typeof module&&module.exports&&(module.exports=h)})();(function(){var y,m,t,k,n=Two.Vector=function(c,f){this.x=c||0;this.y=f||0};_.extend(n.prototype,Backbone.Events,{set:function(c,f){this.x=c;this.y=f;return this},copy:function(c){this.x=c.x;this.y=c.y;return this},clear:function(){this.y=this.x=0;return this},clone:function(){return new n(this.x,this.y)},add:function(c,f){this.x=c.x+f.x;this.y=c.y+f.y;return this},addSelf:function(c){this.x+=c.x;this.y+=c.y;return this},sub:function(c,f){this.x=c.x-f.x;this.y=c.y-f.y;return this},subSelf:function(c){this.x-=
c.x;this.y-=c.y;return this},multiplySelf:function(c){this.x*=c.x;this.y*=c.y;return this},multiplyScalar:function(c){this.x*=c;this.y*=c;return this},divideScalar:function(c){c?(this.x/=c,this.y/=c):this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(c){return this.x*c.x+this.y*c.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},
distanceTo:function(c){return Math.sqrt(this.distanceToSquared(c))},distanceToSquared:function(c){t=this.x-c.x;k=this.y-c.y;return t*t+k*k},setLength:function(c){return this.normalize().multiplyScalar(c)},equals:function(c){return 1E-4>this.distanceTo(c)},lerp:function(c,f){y=(c.x-this.x)*f+this.x;m=(c.y-this.y)*f+this.y;return this.set(y,m)},isZero:function(){return 1E-4>this.length()},toString:function(){return this.x+","+this.y},toObject:function(){return{x:this.x,y:this.y}}});var c={set:function(c,
f){this._x=c;this._y=f;return this.trigger(Two.Events.change)},copy:function(c){this._x=c.x;this._y=c.y;return this.trigger(Two.Events.change)},clear:function(){this._y=this._x=0;return this.trigger(Two.Events.change)},clone:function(){return new n(this._x,this._y)},add:function(c,f){this._x=c.x+f.x;this._y=c.y+f.y;return this.trigger(Two.Events.change)},addSelf:function(c){this._x+=c.x;this._y+=c.y;return this.trigger(Two.Events.change)},sub:function(c,f){this._x=c.x-f.x;this._y=c.y-f.y;return this.trigger(Two.Events.change)},
subSelf:function(c){this._x-=c.x;this._y-=c.y;return this.trigger(Two.Events.change)},multiplySelf:function(c){this._x*=c.x;this._y*=c.y;return this.trigger(Two.Events.change)},multiplyScalar:function(c){this._x*=c;this._y*=c;return this.trigger(Two.Events.change)},divideScalar:function(c){return c?(this._x/=c,this._y/=c,this.trigger(Two.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(c){return this._x*c.x+this._y*c.y},lengthSquared:function(){return this._x*
this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(c){return Math.sqrt(this.distanceToSquared(c))},distanceToSquared:function(c){t=this._x-c.x;k=this._y-c.y;return t*t+k*k},setLength:function(c){return this.normalize().multiplyScalar(c)},equals:function(c){return 1E-4>this.distanceTo(c)},lerp:function(c,f){y=(c.x-this._x)*f+this._x;m=(c.y-this._y)*f+this._y;return this.set(y,m)},isZero:function(){return 1E-4>
this.length()},toString:function(){return this._x+","+this._y},toObject:function(){return{x:this._x,y:this._y}}},f={get:function(){return this._x},set:function(c){this._x=c;this.trigger(Two.Events.change,"x")}},q={get:function(){return this._y},set:function(c){this._y=c;this.trigger(Two.Events.change,"y")}};Two.Vector.prototype.bind=Two.Vector.prototype.on=function(){this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",f),Object.defineProperty(this,"y",q),_.extend(this,c),this._bound=
!0);Backbone.Events.bind.apply(this,arguments);return this}})();(function(){var y=Two.Commands,m,t,k,n=Two.Anchor=function(c,f,k,m,p,t,r){Two.Vector.call(this,c,f);this._broadcast=_.bind(function(){this.trigger(Two.Events.change)},this);Object.defineProperty(this,"command",{get:function(){return this._command},set:function(c){this._command=c;this._command!==y.curve||_.isObject(this.controls)||n.AppendCurveProperties(this);return this.trigger(Two.Events.change)}});this._command=r||y.move;if(!r)return this;n.AppendCurveProperties(this);_.isNumber(k)&&(this.controls.left.x=
k);_.isNumber(m)&&(this.controls.left.y=m);_.isNumber(p)&&(this.controls.right.x=p);_.isNumber(t)&&(this.controls.right.y=t)};_.extend(n,{AppendCurveProperties:function(c){m=c._x||c.x;t=c._y||c.y;c.controls={left:new Two.Vector(m,t),right:new Two.Vector(m,t)}}});_.extend(n.prototype,Two.Vector.prototype,{listen:function(){_.isObject(this.controls)||n.AppendCurveProperties(this);_.each(this.controls,function(c){c.bind(Two.Events.change,this._broadcast)},this);return this},ignore:function(){_.each(this.controls,
function(c){c.unbind(Two.Events.change,this._broadcast)},this);return this},clone:function(){k=this.controls;return new Two.Anchor(this.x,this.y,k&&k.left.x,k&&k.left.y,k&&k.right.x,k&&k.right.y,this.command)}})})();(function(){_.range(6);var y=Math.cos,m=Math.sin,t=Math.tan,k,n,c,f,q,s,p,B,r,w,u,h,E,z,v,A,D,b,a,d,g,H,I,C,F,K,L,G,R,N,S,T,e,l,x,ea,W,X,aa,O,M,P,Q,Z,ba,ca,da,$,U,Y=Two.Matrix=function(a,b,d,c,e,g){this.elements=new Two.Array(9);var f=a;_.isArray(f)||(f=_.toArray(arguments));this.identity().set(f)};_.extend(Y,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(e,f,l){if(3>=f.length)return h,E,z,k=f[0]||0,n=f[1]||0,c=f[2]||0,q=e,h=q[0]*k+q[1]*n+q[2]*c,E=q[3]*k+q[4]*n+q[5]*c,z=q[6]*k+q[7]*n+q[8]*c,{x:h,
y:E,z:z};v=e[0];A=e[1];D=e[2];b=e[3];a=e[4];d=e[5];g=e[6];H=e[7];I=e[8];C=f[0];F=f[1];K=f[2];L=f[3];G=f[4];R=f[5];N=f[6];S=f[7];T=f[8];l=l||new Two.Array(9);l[0]=v*C+A*L+D*N;l[1]=v*F+A*G+D*S;l[2]=v*K+A*R+D*T;l[3]=b*C+a*L+d*N;l[4]=b*F+a*G+d*S;l[5]=b*K+a*R+d*T;l[6]=g*C+H*L+I*N;l[7]=g*F+H*G+I*S;l[8]=g*K+H*R+I*T;return l}});_.extend(Y.prototype,Backbone.Events,{set:function(a,b,d,c,e,g){u=a;x=arguments.length;_.isArray(u)||(u=_.toArray(arguments));_.each(u,function(a,b){_.isNumber(a)&&(this.elements[b]=
a)},this);return this.trigger(Two.Events.change)},identity:function(){this.set(Y.Identity);return this},multiply:function(c,f,k,p,q,m,n,s,r){u=arguments;x=u.length;if(1>=x)return _.each(this.elements,function(a,b){this.elements[b]=a*c},this),this.trigger(Two.Events.change);if(3>=x)return h,E,z,c=c||0,f=f||0,k=k||0,q=this.elements,h=q[0]*c+q[1]*f+q[2]*k,E=q[3]*c+q[4]*f+q[5]*k,z=q[6]*c+q[7]*f+q[8]*k,{x:h,y:E,z:z};e=this.elements;l=u;v=e[0];A=e[1];D=e[2];b=e[3];a=e[4];d=e[5];g=e[6];H=e[7];I=e[8];C=l[0];
F=l[1];K=l[2];L=l[3];G=l[4];R=l[5];N=l[6];S=l[7];T=l[8];this.elements[0]=v*C+A*L+D*N;this.elements[1]=v*F+A*G+D*S;this.elements[2]=v*K+A*R+D*T;this.elements[3]=b*C+a*L+d*N;this.elements[4]=b*F+a*G+d*S;this.elements[5]=b*K+a*R+d*T;this.elements[6]=g*C+H*L+I*N;this.elements[7]=g*F+H*G+I*S;this.elements[8]=g*K+H*R+I*T;return this.trigger(Two.Events.change)},inverse:function(a){k=this.elements;a=a||new Two.Matrix;W=k[0];X=k[1];aa=k[2];O=k[3];M=k[4];P=k[5];Q=k[6];Z=k[7];ba=k[8];ca=ba*M-P*Z;da=-ba*O+P*
Q;$=Z*O-M*Q;U=W*ca+X*da+aa*$;if(!U)return null;U=1/U;a.elements[0]=ca*U;a.elements[1]=(-ba*X+aa*Z)*U;a.elements[2]=(P*X-aa*M)*U;a.elements[3]=da*U;a.elements[4]=(ba*W-aa*Q)*U;a.elements[5]=(-P*W+aa*O)*U;a.elements[6]=$*U;a.elements[7]=(-Z*W+X*Q)*U;a.elements[8]=(M*W-X*O)*U;return a},scale:function(a,b){x=arguments.length;1>=x&&(b=a);return this.multiply(a,0,0,0,b,0,0,0,1)},rotate:function(a){c=y(a);ea=m(a);return this.multiply(c,-ea,0,ea,c,0,0,0,1)},translate:function(a,b){return this.multiply(1,
0,a,0,1,b,0,0,1)},skewX:function(a){k=t(a);return this.multiply(1,k,0,0,1,0,0,0,1)},skewY:function(a){k=t(a);return this.multiply(1,0,0,k,1,0,0,0,1)},toString:function(){return this.toArray().join(" ")},toArray:function(a,b){u=this.elements;w=!!b;k=parseFloat(u[0].toFixed(3));n=parseFloat(u[1].toFixed(3));c=parseFloat(u[2].toFixed(3));f=parseFloat(u[3].toFixed(3));q=parseFloat(u[4].toFixed(3));s=parseFloat(u[5].toFixed(3));if(a){p=parseFloat(u[6].toFixed(3));B=parseFloat(u[7].toFixed(3));r=parseFloat(u[8].toFixed(3));
if(w){b[0]=k;b[1]=f;b[2]=p;b[3]=n;b[4]=q;b[5]=B;b[6]=c;b[7]=s;b[8]=r;return}return[k,f,p,n,q,B,c,s,r]}if(w)b[0]=k,b[1]=f,b[2]=n,b[3]=q,b[4]=c,b[5]=s;else return[k,f,n,q,c,s]},clone:function(){k=this.elements[0];n=this.elements[1];c=this.elements[2];f=this.elements[3];q=this.elements[4];s=this.elements[5];p=this.elements[6];B=this.elements[7];r=this.elements[8];return new Two.Matrix(k,n,c,f,q,s,p,B,r)}})})();(function(){function y(c){var f={},q=c.id,m=c.translation,p=c.rotation,t=c.scale,r=c.stroke,w=c.linewidth,u=c.fill,h=c.opacity,y=c.visible,z=c.cap,v=c.join,A=c.miter,D=c.closed,b=c.vertices;q&&(f.id=n.Identifier+q);m&&(_.isNumber(t)&&_.isNumber(p))&&(f.transform="matrix("+c._matrix.toString()+")");r&&(f.stroke=r);u&&(f.fill=u);h&&(f["stroke-opacity"]=f["fill-opacity"]=h);f.visibility=y?"visible":"hidden";z&&(f["stroke-linecap"]=z);v&&(f["stroke-linejoin"]=v);A&&(f["stroke-miterlimit"]=A);w&&(f["stroke-width"]=
w);b&&(f.d=k.toString(b,D));return f}function m(c,f,q,m){switch(f){case "matrix":f="transform";q="matrix("+q.toString()+")";break;case "visible":f="visibility";q=q?"visible":"hidden";break;case "cap":f="stroke-linecap";break;case "join":f="stroke-linejoin";break;case "miter":f="stroke-miterlimit";break;case "linewidth":f="stroke-width";break;case "vertices":f="d";q=k.toString(q,m);break;case "opacity":k.setAttributes(c,{"stroke-opacity":q,"fill-opacity":q});return}c.setAttribute(f,q)}var t=Two.Utils.mod,
k={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(c,f){var k=document.createElementNS(this.ns,c);"svg"===c&&(f=_.defaults(f||{},{version:this.version}));_.isObject(f)&&this.setAttributes(k,f);return k},setAttributes:function(c,f){_.each(f,function(c,f){this.setAttribute(f,c)},c);return this},removeAttributes:function(c,f){_.each(f,function(c){this.removeAttribute(c)},c);return this},toString:function(c,f){var k=c.length,m=k-1;return _.map(c,
function(p,n){var r,w=f?t(n-1,k):Math.max(n-1,0),u=f?t(n+1,k):Math.min(n+1,m),w=c[w],u=c[u],h,y,z,v,A;A=p.x.toFixed(3);v=p.y.toFixed(3);switch(p._command){case Two.Commands.close:r=p._command;break;case Two.Commands.curve:h=w.controls&&w.controls.right||w;r=p.controls&&p.controls.left||p;w=h.x.toFixed(3);h=h.y.toFixed(3);y=r.x.toFixed(3);z=r.y.toFixed(3);r=p._command+" "+w+" "+h+" "+y+" "+z+" "+A+" "+v;break;default:r=(p._command||(0===n?Two.Commands.move:Two.Commands.line))+" "+A+" "+v}n>=m&&f&&
(p._command===Two.Commands.curve&&(v=p.controls&&p.controls.right||p,A=u.controls&&u.controls.left||u,w=v.x.toFixed(3),h=v.y.toFixed(3),y=A.x.toFixed(3),z=A.y.toFixed(3),A=u.x.toFixed(3),v=u.y.toFixed(3),r+=" C "+w+" "+h+" "+y+" "+z+" "+A+" "+v),r+=" Z");return r}).join(" ")}},n=Two[Two.Types.svg]=function(c){this.count=0;this.domElement=c.domElement||k.createElement("svg");this.elements=[];this.domElement.style.visibility="hidden";this.unveil=_.once(_.bind(function(){this.domElement.style.visibility=
"visible"},this))};_.extend(n,{Identifier:"two-",Utils:k});_.extend(n.prototype,Backbone.Events,{setSize:function(c,f){this.width=c;this.height=f;k.setAttributes(this.domElement,{width:c,height:f});return this},add:function(c){var f=c,m=this.elements,n=this.domElement;_.isArray(c)||(f=_.map(arguments,function(c){return c}));_.each(f,function(c){var f;f=c instanceof Two.Group;if(_.isUndefined(c.id)){var r=this.count;this.count++;c.id=r}f?(f="g",_.isUndefined(c.parent)&&(c.parent=this,c.unbind(Two.Events.change).bind(Two.Events.change,
_.bind(this.update,this))),c=y(c),delete c.stroke,delete c.fill,delete c["fill-opacity"],delete c["stroke-opacity"],delete c["stroke-linecap"],delete c["stroke-linejoin"],delete c["stroke-miterlimit"],delete c["stroke-width"]):(f="path",c=y(c));c=k.createElement(f,c);n.appendChild(c);m.push(c)},this);return this},update:function(c,f,k,n){var p=this.elements,t=p[c];switch(f){case Two.Properties.hierarchy:_.each(k,function(c){t.appendChild(p[c])});break;case Two.Properties.demotion:_.each(k,function(c){t.removeChild(p[c])});
break;default:m(t,f,k,n)}return this},render:function(){this.unveil();return this}})})();(function(){var y=Two.Utils.mod,m,t,k,n,c,f,q,s,p,B,r,w,u,h,E,z,v,A,D,b,a,d,g,H,I,C,F,K={devicePixelRatio:this.devicePixelRatio||1,getBackingStoreRatio:function(a){return a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1},getRatio:function(a){return this.devicePixelRatio/this.getBackingStoreRatio(a)},group:{render:function(a){this.update();m=this._matrix.elements;a.save();a.transform(m[0],m[3],m[1],m[4],
m[2],m[5]);_.each(this.children,function(b){K.polygon.render.call(b,a)});a.restore();return this.flagReset()}},polygon:{render:function(G){this.update();m=this._matrix.elements;t=this.stroke;k=this.linewidth;n=this.fill;c=this.opacity;f=this.visible;q=this.cap;s=this.join;p=this.miter;B=this.closed;r=this._vertices;w=r.length;u=w-1;if(!f)return this;G.save();m&&G.transform(m[0],m[3],m[1],m[4],m[2],m[5]);n&&(G.fillStyle=n);t&&(G.strokeStyle=t);k&&(G.lineWidth=k);p&&(G.miterLimit=p);s&&(G.lineJoin=
s);q&&(G.lineCap=q);_.isNumber(c)&&(G.globalAlpha=c);G.beginPath();_.each(r,function(c,f){C=c.x.toFixed(3);F=c.y.toFixed(3);switch(c._command){case Two.Commands.close:G.closePath();break;case Two.Commands.curve:E=B?y(f-1,w):Math.max(f-1,0);h=B?y(f+1,w):Math.min(f+1,u);z=r[E];v=r[h];d=z.controls&&z.controls.right||z;g=c.controls&&c.controls.left||c;b=d.x.toFixed(3);a=d.y.toFixed(3);A=g.x.toFixed(3);D=g.y.toFixed(3);G.bezierCurveTo(b,a,A,D,C,F);f>=u&&B&&(H=c.controls&&c.controls.right||c,I=v.controls&&
v.controls.left||v,b=H.x.toFixed(3),a=H.y.toFixed(3),A=I.x.toFixed(3),D=I.y.toFixed(3),C=v.x.toFixed(3),F=v.y.toFixed(3),G.bezierCurveTo(b,a,A,D,C,F));break;case Two.Commands.line:G.lineTo(C,F);break;case Two.Commands.move:G.moveTo(C,F)}});B&&G.closePath();G.fill();G.stroke();G.restore();return this.flagReset()}}},L=Two[Two.Types.canvas]=function(a){this.count=0;this.domElement=a.domElement||document.createElement("canvas");this.ctx=this.domElement.getContext("2d");this.overdraw=!1;this.scene=new Two.Group;
this.scene.parent=this};_.extend(L,{Utils:K});_.extend(L.prototype,Backbone.Events,{setSize:function(a,b,c){this.width=a;this.height=b;this.ratio=_.isUndefined(c)?K.getRatio(this.ctx):c;this.domElement.width=a*this.ratio;this.domElement.height=b*this.ratio;_.extend(this.domElement.style,{width:a+"px",height:b+"px"});return this},render:function(){var a=1===this.ratio;a||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio));this.overdraw||this.ctx.clearRect(0,0,this.width,this.height);K.group.render.call(this.scene,
this.ctx);a||this.ctx.restore();return this}})})();(function(){var y=Two[Two.Types.canvas],m=Two.Matrix.Multiply,t=Two.Utils.mod,k=[1,0,0,0,1,0,0,0,1],n=new Two.Array(9),c,f,q,s,p,B,r,w,u,h,E,z,v,A,D,b,a,d,g,H,I,C,F,K,L,G,R,N,S,T,e,l,x,ea,W,X,aa,O,M,P,Q,Z,ba,ca,da,$,U,Y,ha,fa,J,ia,ja,ka,ga,V={canvas:document.createElement("canvas"),uv:new Two.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{render:function(a,b){this.update();c=this.parent;f=c._matrix&&c._matrix.manual||c._flagMatrix;q=this._matrix.manual||this._flagMatrix;if(f||q)this._renderer.matrix||(this._renderer.matrix=
new Two.Array(9)),this._matrix.toArray(!0,n),m(n,c._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*c._renderer.scale,f&&(this._flagMatrix=!0);_.each(this.children,function(c){V.polygon.render.call(c,a,b)});return this.flagReset()}},polygon:{render:function(a,b){if(!this._visible||!this._opacity)return this;c=this.parent;f=c._matrix.manual||c._flagMatrix;q=this._matrix.manual||this._flagMatrix;s=this._flagVertices||this._flagFill||this._flagStroke||this._flagLinewidth||this._flagOpacity||
this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter;this.update();if(f||q)this._renderer.matrix||(this._renderer.matrix=new Two.Array(9)),this._matrix.toArray(!0,n),m(n,c._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*c._renderer.scale;s&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new Two.Array(12)),V.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect),V.getTriangles(this._renderer.rect,
this._renderer.triangles),V.updateBuffer(a,this,b),V.updateTexture(a,this));a.bindBuffer(a.ARRAY_BUFFER,this._renderer.textureCoordsBuffer);a.vertexAttribPointer(b.textureCoords,2,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,this._renderer.texture);a.uniformMatrix3fv(b.matrix,!1,this._renderer.matrix);a.bindBuffer(a.ARRAY_BUFFER,this._renderer.buffer);a.vertexAttribPointer(b.position,2,a.FLOAT,!1,0,0);a.drawArrays(a.TRIANGLES,0,6);return this.flagReset()}},getBoundingClientRect:function(c,f,e){p=Infinity;
B=-Infinity;r=Infinity;w=-Infinity;_.each(c,function(c,d){u=c.x;h=c.y;E;z;v;A;D=c.controls;r=Math.min(h,r);p=Math.min(u,p);B=Math.max(u,B);w=Math.max(h,w);c.controls&&(b=D.left,a=D.right,b&&a&&(E=b.x,z=b.y,v=a.x,A=a.y,E&&(z&&v&&A)&&(r=Math.min(z,A,r),p=Math.min(E,v,p),B=Math.max(E,v,B),w=Math.max(z,A,w))))});_.isNumber(f)&&(r-=f,p-=f,B+=f,w+=f);d=B-p;g=w-r;e.top=r;e.left=p;e.right=B;e.bottom=w;e.width=d;e.height=g;e.centroid||(e.centroid={});e.centroid.x=-p;e.centroid.y=-r},getTriangles:function(a,
b){r=a.top;p=a.left;B=a.right;w=a.bottom;b[0]=p;b[1]=r;b[2]=B;b[3]=r;b[4]=p;b[5]=w;b[6]=p;b[7]=w;b[8]=B;b[9]=r;b[10]=B;b[11]=w},updateCanvas:function(a){H=a._vertices;I=this.canvas;C=this.ctx;F=a._renderer.scale;K=a._stroke;L=a._linewidth*F;G=a._fill;R=a._opacity;N=a._cap;S=a._join;T=a._miter;e=a._closed;l=H.length;x=l-1;I.width=Math.max(Math.ceil(a._renderer.rect.width*F),1);I.height=Math.max(Math.ceil(a._renderer.rect.height*F),1);ea=a._renderer.rect.centroid;W=ea.x*F;X=ea.y*F;C.clearRect(0,0,I.width,
I.height);G&&(C.fillStyle=G);K&&(C.strokeStyle=K);L&&(C.lineWidth=L);T&&(C.miterLimit=T);S&&(C.lineJoin=S);N&&(C.lineCap=N);_.isNumber(R)&&(C.globalAlpha=R);C.beginPath();_.each(H,function(a,c){aa;O;E;v;M;P;Q;Z;ba;ca;da;b;u=(a.x*F+W).toFixed(3);h=(a.y*F+X).toFixed(3);switch(a._command){case Two.Commands.close:C.closePath();break;case Two.Commands.curve:O=e?t(c-1,l):Math.max(c-1,0);aa=e?t(c+1,l):Math.min(c+1,x);E=H[O];v=H[aa];ba=E.controls&&E.controls.right||E;ca=a.controls&&a.controls.left||a;Q=(ba.x*
F+W).toFixed(3);Z=(ba.y*F+X).toFixed(3);M=(ca.x*F+W).toFixed(3);P=(ca.y*F+X).toFixed(3);C.bezierCurveTo(Q,Z,M,P,u,h);c>=x&&e&&(da=a.controls&&a.controls.right||a,b=v.controls&&v.controls.left||v,Q=(da.x*F+W).toFixed(3),Z=(da.y*F+X).toFixed(3),M=(b.x*F+W).toFixed(3),P=(b.y*F+X).toFixed(3),u=(v.x*F+W).toFixed(3),h=(v.y*F+X).toFixed(3),C.bezierCurveTo(Q,Z,M,P,u,h));break;case Two.Commands.line:C.lineTo(u,h);break;case Two.Commands.move:C.moveTo(u,h)}});e&&C.closePath();C.fill();C.stroke()},updateTexture:function(a,
b){this.updateCanvas(b);b._renderer.texture&&a.deleteTexture(b._renderer.texture);a.bindBuffer(a.ARRAY_BUFFER,b._renderer.textureCoordsBuffer);b._renderer.texture=a.createTexture();a.bindTexture(a.TEXTURE_2D,b._renderer.texture);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);0>=this.canvas.width||0>=this.canvas.height||a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,
a.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(a,b,c){_.isObject(b._renderer.buffer)&&a.deleteBuffer(b._renderer.buffer);b._renderer.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b._renderer.buffer);a.enableVertexAttribArray(c.position);a.bufferData(a.ARRAY_BUFFER,b._renderer.triangles,a.STATIC_DRAW);_.isObject(b._renderer.textureCoordsBuffer)&&a.deleteBuffer(b._renderer.textureCoordsBuffer);b._renderer.textureCoordsBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b._renderer.textureCoordsBuffer);
a.enableVertexAttribArray(c.textureCoords);a.bufferData(a.ARRAY_BUFFER,this.uv,a.STATIC_DRAW)},program:{create:function(a,b){$=a.createProgram();_.each(b,function(b){a.attachShader($,b)});a.linkProgram($);U=a.getProgramParameter($,a.LINK_STATUS);if(!U)throw fa=a.getProgramInfoLog($),a.deleteProgram($),new Two.Utils.Error("unable to link program: "+fa);return $}},shaders:{create:function(a,b,c){Y=a.createShader(a[c]);a.shaderSource(Y,b);a.compileShader(Y);ha=a.getShaderParameter(Y,a.COMPILE_STATUS);
if(!ha)throw fa=a.getShaderInfoLog(Y),a.deleteShader(Y),new Two.Utils.Error("unable to compile shader "+Y+": "+fa);return Y},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",
fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"}};V.ctx=V.canvas.getContext("2d");var la=Two[Two.Types.webgl]=function(a){this.count=0;this.domElement=a.domElement||document.createElement("canvas");this.scene=new Two.Group;this.scene.parent=this;this._renderer={matrix:new Two.Array(k),scale:1};this._flagMatrix=!0;ga=_.defaults(a||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,
stencil:!0,preserveDrawingBuffer:!0,overdraw:!1});this.overdraw=ga.overdraw;J=this.ctx=this.domElement.getContext("webgl",ga)||this.domElement.getContext("experimental-webgl",ga);if(!this.ctx)throw new Two.Utils.Error("unable to create a webgl context. Try using another renderer.");ka=V.shaders.create(J,V.shaders.vertex,V.shaders.types.vertex);ja=V.shaders.create(J,V.shaders.fragment,V.shaders.types.fragment);this.program=V.program.create(J,[ka,ja]);J.useProgram(this.program);this.program.position=
J.getAttribLocation(this.program,"a_position");this.program.matrix=J.getUniformLocation(this.program,"u_matrix");this.program.textureCoords=J.getAttribLocation(this.program,"a_textureCoords");J.disable(J.DEPTH_TEST);J.enable(J.BLEND);J.blendEquationSeparate(J.FUNC_ADD,J.FUNC_ADD);J.blendFuncSeparate(J.SRC_ALPHA,J.ONE_MINUS_SRC_ALPHA,J.ONE,J.ONE_MINUS_SRC_ALPHA)};_.extend(la.prototype,Backbone.Events,y.prototype,{setSize:function(a,b,c){y.prototype.setSize.apply(this,arguments);a*=this.ratio;b*=this.ratio;
this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio;this._flagMatrix=!0;this.ctx.viewport(0,0,a,b);ia=this.ctx.getUniformLocation(this.program,"u_resolution");this.ctx.uniform2f(ia,a,b);return this},render:function(){J=this.ctx;this.overdraw||J.clear(J.COLOR_BUFFER_BIT|J.DEPTH_BUFFER_BIT);V.group.render.call(this.scene,J,this.program);this._flagMatrix=!1;return this}})})();(function(){new Two.Vector;var y,m=Two.Shape=function(t){this._renderer={};this.id=Two.uniqueId();this._matrix=new Two.Matrix;this.translation=new Two.Vector;this.translation.bind(Two.Events.change,_.bind(m.FlagMatrix,this));this.rotation=0;this.scale=1};_.extend(m,Backbone.Events,{FlagMatrix:function(){this._flagMatrix=!0},MakeGetterSetter:function(m){Object.defineProperty(m,"rotation",{get:function(){return this._rotation},set:function(k){this._rotation=k;this._flagMatrix=!0}});Object.defineProperty(m,
"scale",{get:function(){return this._scale},set:function(k){this._scale=k;this._flagMatrix=!0}})}});_.extend(m.prototype,{_flagMatrix:!0,_rotation:0,_scale:1,addTo:function(m){m.add(this);return this},clone:function(){y=new m;y.translation.copy(this.translation);y.rotation=this.rotation;y.scale=this.scale;_.each(m.Properties,function(m){y[m]=this[m]},this);return y.update()},update:function(){!this._matrix.manual&&this._flagMatrix&&this._matrix.identity().translate(this.translation.x,this.translation.y).scale(this.scale).rotate(this.rotation);
return this},flagReset:function(){this._flagMatrix=!1;return this}});m.MakeGetterSetter(m.prototype)})();(function(){var y=Math.min,m=Math.max,t=Math.round,k=Two.Utils.getComputedMatrix,n,c,f,q,s,p,B,r,w,u,h,E,z,v,A,D,b,a,d,g,H,I,C,F,K,L,G,R,N,S,T,e=Two.Polygon=function(a,b,c,d){Two.Shape.call(this);this._closed=!!b;this._curved=!!c;this._automatic=!d;this.beginning=0;this.ending=1;this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.join=this.cap="round";this.miter=4;this._vertices=[];this.vertices=a.slice()};_.extend(e,{Properties:"fill stroke linewidth opacity visible cap join miter closed curved automatic beginning ending".split(" "),
FlagVertices:function(){this._flagVertices=!0}});_.extend(e.prototype,Two.Shape.prototype,{_flagVertices:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,clone:function(a){a=a||this.parent;r=_.map(this.vertices,function(a){return a.clone()});w=new e(r,this.closed,this.curved,
!this.automatic);_.each(Two.Shape.Properties,function(a){w[a]=this[a]},this);w.translation.copy(this.translation);w.rotation=this.rotation;w.scale=this.scale;a.add(w);return w},noFill:function(){this.fill="transparent";return this},noStroke:function(){this.stroke="transparent";return this},corner:function(){u=this.getBoundingClientRect(!0);h={x:u.left,y:u.top};_.each(this.vertices,function(a){a.subSelf(h)});return this},center:function(){u=this.getBoundingClientRect(!0);u.centroid={x:u.left+u.width/
2,y:u.top+u.height/2};_.each(this.vertices,function(a){a.subSelf(u.centroid)});return this},remove:function(){if(!this.parent)return this;this.parent.remove(this);return this},getBoundingClientRect:function(c){E=this.linewidth/2;void 0;z=Infinity;v=-Infinity;A=Infinity;D=-Infinity;_.each(this.vertices,function(c){b=c.x;a=c.y;A=y(a,A);z=y(b,z);v=m(b,v);D=m(a,D)});A-=E;z-=E;v+=E;D+=E;C=c?this._matrix:k(this);d=C.multiply(z,A,1);g=C.multiply(v,A,1);H=C.multiply(v,D,1);I=C.multiply(z,D,1);A=y(d.y,g.y,
H.y,I.y);z=y(d.x,g.x,H.x,I.x);v=m(d.x,g.x,H.x,I.x);D=m(d.y,g.y,H.y,I.y);return{top:A,left:z,right:v,bottom:D,width:v-z,height:D-A}},plot:function(){if(this.curved)return Two.Utils.getCurveFromPoints(this.vertices,this.closed),this;_.each(this.vertices,function(a,b){a._command=0===b?Two.Commands.move:Two.Commands.line},this);return this},subdivide:function(){q=this.vertices.length-1;s=this._closed||this.vertices[q].command===Two.Commands.close;r=[];_.each(this.vertices,function(a,b){0>=b&&!s||(v=g.controls&&
g.controls.right,z=a.controls&&a.controls.left,F=g.x,K=g.y,L=(v||g).x,G=(v||g).y,R=(z||a).x,N=(z||a).y,S=a.x,T=a.y,r.push(Two.Utils.subdivide(F,K,L,G,R,N,S,T)));g=a},this);this._curved=this._automatic=!1;this.vertices=_.flatten(r);this.plot();return this},update:function(){if(this._flagVertices)for(this._automatic&&this.plot(),n=this.vertices.length,q=n-1,c=t(this._beginning*q),f=t(this._ending*q),this._vertices.length=0,B=c;B<f+1;B++)p=this.vertices[B],this._vertices.push(p);Two.Shape.prototype.update.call(this);
return this},flagReset:function(){this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=!1;Two.Shape.prototype.flagReset.call(this);return this}});_.each(e.Properties.slice(0,8),function(a){var b="_"+a,c="_flag"+a.charAt(0).toUpperCase()+a.slice(1);Object.defineProperty(e.prototype,a,{get:function(){return this[b]},set:function(a){this[b]=a;this[c]=!0}})});Object.defineProperty(e.prototype,"closed",{get:function(){return this._closed},
set:function(a){this._closed=!!a}});Object.defineProperty(e.prototype,"curved",{get:function(){return this._curved},set:function(a){this._curved=!!a}});Object.defineProperty(e.prototype,"automatic",{get:function(){return this._automatic},set:function(a){a!==this._automatic&&(this._automatic=!!a)}});Object.defineProperty(e.prototype,"beginning",{get:function(){return this._beginning},set:function(a){this._beginning=y(m(a,0),1);this._flagVertices=!0}});Object.defineProperty(e.prototype,"ending",{get:function(){return this._ending},
set:function(a){this._ending=y(m(a,0),1);this._flagVertices=!0}});Two.Shape.MakeGetterSetter(e.prototype)})();(function(){var y=Math.min,m=Math.max,t,k,n,c,f,q,s,p,B,r,w,u,h,E,z,v,A,D,b,a,d=Two.Group=function(a){Two.Shape.call(this,!0);this.children={}};_.extend(d,{MakeGetterSetter:function(a,b){_.isArray(b)||(b=[b]);_.each(b,function(b){t="_"+b;Object.defineProperty(a,b,{get:function(){return this[t]},set:function(a){this[t]=a;_.each(this.children,function(c){c[b]=a})}})})}});_.extend(d.prototype,Two.Shape.prototype,{_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",
_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,clone:function(a){a=a||this.parent;n=_.map(this.children,function(a){return a.clone()});c=new d;a.add(c);c.add(n);c.translation.copy(this.translation);c.rotation=this.rotation;c.scale=this.scale;return c},corner:function(){f=this.getBoundingClientRect(!0);q={x:f.left,y:f.top};_.each(this.children,function(a){a.translation.subSelf(q)});return this},center:function(){f=this.getBoundingClientRect(!0);f.centroid={x:f.left+f.width/2,y:f.top+
f.height/2};_.each(this.children,function(a){a.translation.subSelf(f.centroid)});return this},add:function(a){s=arguments.length;p=a;n=this.children;B=this.parent;r=[];_.isArray(a)||(p=_.toArray(arguments));_.each(p,function(a){a&&(w=a.id,k=a.parent,_.isUndefined(n[w])&&(k&&delete k.children[w],n[w]=a,a.parent=this,r.push(w)))},this);return this},remove:function(a){s=arguments.length;p=a;n=this.children;B=this.parent;r=[];if(0>=s&&B)return B.remove(this),this;_.isArray(a)||(p=_.toArray(arguments));
_.each(p,function(a){w=a.id;grandchildren=a.children;w in n&&(delete n[w],delete a.parent,r.push(w))});return this},getBoundingClientRect:function(c){u=Infinity;h=-Infinity;E=Infinity;z=-Infinity;_.each(this.children,function(a){f=a.getBoundingClientRect(!0);_.isNumber(f.top)&&(_.isNumber(f.left)&&_.isNumber(f.right)&&_.isNumber(f.bottom))&&(E=y(f.top,E),u=y(f.left,u),h=m(f.right,h),z=m(f.bottom,z))},this);v=c?this._matrix:Two.Utils.getComputedMatrix(this);A=v.multiply(u,E,1);D=v.multiply(h,E,1);
b=v.multiply(h,z,1);a=v.multiply(u,z,1);E=y(A.y,D.y,b.y,a.y);u=y(A.x,D.x,b.x,a.x);h=m(A.x,D.x,b.x,a.x);z=m(A.y,D.y,b.y,a.y);return{top:E,left:u,right:h,bottom:z,width:h-u,height:z-E}},noFill:function(){_.each(this.children,function(a){a.noFill()});return this},noStroke:function(){_.each(this.children,function(a){a.noStroke()});return this},subdivide:function(){_.each(this.children,function(a){a.subdivide()});return this}});d.MakeGetterSetter(d.prototype,Two.Polygon.Properties);Two.Shape.MakeGetterSetter(d.prototype)})();
