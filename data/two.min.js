(function(){var A=this,n=A._,h={},g=Array.prototype,p=Object.prototype,k=g.push,e=g.slice,q=g.concat,s=p.toString,z=p.hasOwnProperty,J=g.forEach,E=g.map,w=g.reduce,r=g.reduceRight,m=g.filter,f=g.every,C=g.some,u=g.indexOf,x=g.lastIndexOf,p=Array.isArray,H=Object.keys,M=Function.prototype.bind,d=function(b){if(b instanceof d)return b;if(!(this instanceof d))return new d(b);this._wrapped=b};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports._=
d):A._=d;d.VERSION="1.5.1";var y=d.each=d.forEach=function(b,v,a){if(null!=b)if(J&&b.forEach===J)b.forEach(v,a);else if(b.length===+b.length)for(var c=0,f=b.length;c<f&&v.call(a,b[c],c,b)!==h;c++);else for(c in b)if(d.has(b,c)&&v.call(a,b[c],c,b)===h)break};d.map=d.collect=function(b,v,a){var d=[];if(null==b)return d;if(E&&b.map===E)return b.map(v,a);y(b,function(b,c,l){d.push(v.call(a,b,c,l))});return d};d.reduce=d.foldl=d.inject=function(b,v,a,c){var f=2<arguments.length;null==b&&(b=[]);if(w&&b.reduce===
w)return c&&(v=d.bind(v,c)),f?b.reduce(v,a):b.reduce(v);y(b,function(b,d,j){f?a=v.call(c,a,b,d,j):(a=b,f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return a};d.reduceRight=d.foldr=function(b,v,a,c){var f=2<arguments.length;null==b&&(b=[]);if(r&&b.reduceRight===r)return c&&(v=d.bind(v,c)),f?b.reduceRight(v,a):b.reduceRight(v);var L=b.length;if(L!==+L)var l=d.keys(b),L=l.length;y(b,function(d,j,t){j=l?l[--L]:--L;f?a=v.call(c,a,b[j],j,t):(a=b[j],f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");
return a};d.find=d.detect=function(b,v,a){var c;F(b,function(b,d,l){if(v.call(a,b,d,l))return c=b,!0});return c};d.filter=d.select=function(b,v,a){var c=[];if(null==b)return c;if(m&&b.filter===m)return b.filter(v,a);y(b,function(b,d,l){v.call(a,b,d,l)&&c.push(b)});return c};d.reject=function(b,v,a){return d.filter(b,function(b,c,d){return!v.call(a,b,c,d)},a)};d.every=d.all=function(b,v,a){v||(v=d.identity);var c=!0;if(null==b)return c;if(f&&b.every===f)return b.every(v,a);y(b,function(b,d,l){if(!(c=
c&&v.call(a,b,d,l)))return h});return!!c};var F=d.some=d.any=function(b,v,a){v||(v=d.identity);var c=!1;if(null==b)return c;if(C&&b.some===C)return b.some(v,a);y(b,function(b,d,l){if(c||(c=v.call(a,b,d,l)))return h});return!!c};d.contains=d.include=function(b,v){return null==b?!1:u&&b.indexOf===u?-1!=b.indexOf(v):F(b,function(b){return b===v})};d.invoke=function(b,v){var a=e.call(arguments,2),c=d.isFunction(v);return d.map(b,function(b){return(c?v:b[v]).apply(b,a)})};d.pluck=function(b,v){return d.map(b,
function(b){return b[v]})};d.where=function(b,v,a){return d.isEmpty(v)?a?void 0:[]:d[a?"find":"filter"](b,function(b){for(var a in v)if(v[a]!==b[a])return!1;return!0})};d.findWhere=function(b,a){return d.where(b,a,!0)};d.max=function(b,a,c){if(!a&&d.isArray(b)&&b[0]===+b[0]&&65535>b.length)return Math.max.apply(Math,b);if(!a&&d.isEmpty(b))return-Infinity;var f={computed:-Infinity,value:-Infinity};y(b,function(b,d,l){d=a?a.call(c,b,d,l):b;d>f.computed&&(f={value:b,computed:d})});return f.value};d.min=
function(b,a,c){if(!a&&d.isArray(b)&&b[0]===+b[0]&&65535>b.length)return Math.min.apply(Math,b);if(!a&&d.isEmpty(b))return Infinity;var f={computed:Infinity,value:Infinity};y(b,function(b,d,l){d=a?a.call(c,b,d,l):b;d<f.computed&&(f={value:b,computed:d})});return f.value};d.shuffle=function(b){var a,c=0,f=[];y(b,function(b){a=d.random(c++);f[c-1]=f[a];f[a]=b});return f};var a=function(b){return d.isFunction(b)?b:function(a){return a[b]}};d.sortBy=function(b,c,f){var j=a(c);return d.pluck(d.map(b,function(b,
a,c){return{value:b,index:a,criteria:j.call(f,b,a,c)}}).sort(function(b,a){var c=b.criteria,d=a.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return b.index<a.index?-1:1}),"value")};var c=function(b,c,f,j){var t={},L=a(null==c?d.identity:c);y(b,function(a,c){var d=L.call(f,a,c,b);j(t,d,a)});return t};d.groupBy=function(b,a,f){return c(b,a,f,function(b,a,c){(d.has(b,a)?b[a]:b[a]=[]).push(c)})};d.countBy=function(b,a,f){return c(b,a,f,function(b,a){d.has(b,a)||(b[a]=0);
b[a]++})};d.sortedIndex=function(b,c,f,j){f=null==f?d.identity:a(f);c=f.call(j,c);for(var t=0,L=b.length;t<L;){var l=t+L>>>1;f.call(j,b[l])<c?t=l+1:L=l}return t};d.toArray=function(b){return!b?[]:d.isArray(b)?e.call(b):b.length===+b.length?d.map(b,d.identity):d.values(b)};d.size=function(b){return null==b?0:b.length===+b.length?b.length:d.keys(b).length};d.first=d.head=d.take=function(b,a,c){return null==b?void 0:null!=a&&!c?e.call(b,0,a):b[0]};d.initial=function(b,a,c){return e.call(b,0,b.length-
(null==a||c?1:a))};d.last=function(b,a,c){return null==b?void 0:null!=a&&!c?e.call(b,Math.max(b.length-a,0)):b[b.length-1]};d.rest=d.tail=d.drop=function(b,a,c){return e.call(b,null==a||c?1:a)};d.compact=function(b){return d.filter(b,d.identity)};var t=function(b,a,c){if(a&&d.every(b,d.isArray))return q.apply(c,b);y(b,function(b){d.isArray(b)||d.isArguments(b)?a?k.apply(c,b):t(b,a,c):c.push(b)});return c};d.flatten=function(b,a){return t(b,a,[])};d.without=function(b){return d.difference(b,e.call(arguments,
1))};d.uniq=d.unique=function(b,a,c,f){d.isFunction(a)&&(f=c,c=a,a=!1);c=c?d.map(b,c,f):b;var j=[],t=[];y(c,function(c,f){if(a?!f||t[t.length-1]!==c:!d.contains(t,c))t.push(c),j.push(b[f])});return j};d.union=function(){return d.uniq(d.flatten(arguments,!0))};d.intersection=function(b){var a=e.call(arguments,1);return d.filter(d.uniq(b),function(b){return d.every(a,function(a){return 0<=d.indexOf(a,b)})})};d.difference=function(b){var a=q.apply(g,e.call(arguments,1));return d.filter(b,function(b){return!d.contains(a,
b)})};d.zip=function(){for(var b=d.max(d.pluck(arguments,"length").concat(0)),a=Array(b),c=0;c<b;c++)a[c]=d.pluck(arguments,""+c);return a};d.object=function(b,a){if(null==b)return{};for(var c={},d=0,f=b.length;d<f;d++)a?c[b[d]]=a[d]:c[b[d][0]]=b[d][1];return c};d.indexOf=function(b,a,c){if(null==b)return-1;var f=0,j=b.length;if(c)if("number"==typeof c)f=0>c?Math.max(0,j+c):c;else return f=d.sortedIndex(b,a),b[f]===a?f:-1;if(u&&b.indexOf===u)return b.indexOf(a,c);for(;f<j;f++)if(b[f]===a)return f;
return-1};d.lastIndexOf=function(b,a,c){if(null==b)return-1;var d=null!=c;if(x&&b.lastIndexOf===x)return d?b.lastIndexOf(a,c):b.lastIndexOf(a);for(c=d?c:b.length;c--;)if(b[c]===a)return c;return-1};d.range=function(b,a,c){1>=arguments.length&&(a=b||0,b=0);c=arguments[2]||1;for(var d=Math.max(Math.ceil((a-b)/c),0),f=0,j=Array(d);f<d;)j[f++]=b,b+=c;return j};var j=function(){};d.bind=function(b,a){var c,f;if(M&&b.bind===M)return M.apply(b,e.call(arguments,1));if(!d.isFunction(b))throw new TypeError;
c=e.call(arguments,2);return f=function(){if(!(this instanceof f))return b.apply(a,c.concat(e.call(arguments)));j.prototype=b.prototype;var d=new j;j.prototype=null;var t=b.apply(d,c.concat(e.call(arguments)));return Object(t)===t?t:d}};d.partial=function(b){var a=e.call(arguments,1);return function(){return b.apply(this,a.concat(e.call(arguments)))}};d.bindAll=function(b){var a=e.call(arguments,1);if(0===a.length)throw Error("bindAll must be passed function names");y(a,function(a){b[a]=d.bind(b[a],
b)});return b};d.memoize=function(b,a){var c={};a||(a=d.identity);return function(){var f=a.apply(this,arguments);return d.has(c,f)?c[f]:c[f]=b.apply(this,arguments)}};d.delay=function(b,a){var c=e.call(arguments,2);return setTimeout(function(){return b.apply(null,c)},a)};d.defer=function(b){return d.delay.apply(d,[b,1].concat(e.call(arguments,1)))};d.throttle=function(b,a,c){var d,f,j,l=null,t=0;c||(c={});var s=function(){t=!1===c.leading?0:new Date;l=null;j=b.apply(d,f)};return function(){var g=
new Date;!t&&!1===c.leading&&(t=g);var e=a-(g-t);d=this;f=arguments;0>=e?(clearTimeout(l),l=null,t=g,j=b.apply(d,f)):!l&&!1!==c.trailing&&(l=setTimeout(s,e));return j}};d.debounce=function(b,a,c){var d,f=null;return function(){var j=this,l=arguments,t=c&&!f;clearTimeout(f);f=setTimeout(function(){f=null;c||(d=b.apply(j,l))},a);t&&(d=b.apply(j,l));return d}};d.once=function(b){var a=!1,c;return function(){if(a)return c;a=!0;c=b.apply(this,arguments);b=null;return c}};d.wrap=function(b,a){return function(){var c=
[b];k.apply(c,arguments);return a.apply(this,c)}};d.compose=function(){var b=arguments;return function(){for(var a=arguments,c=b.length-1;0<=c;c--)a=[b[c].apply(this,a)];return a[0]}};d.after=function(b,a){return function(){if(1>--b)return a.apply(this,arguments)}};d.keys=H||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var a=[],c;for(c in b)d.has(b,c)&&a.push(c);return a};d.values=function(b){var a=[],c;for(c in b)d.has(b,c)&&a.push(b[c]);return a};d.pairs=function(b){var a=
[],c;for(c in b)d.has(b,c)&&a.push([c,b[c]]);return a};d.invert=function(b){var a={},c;for(c in b)d.has(b,c)&&(a[b[c]]=c);return a};d.functions=d.methods=function(b){var a=[],c;for(c in b)d.isFunction(b[c])&&a.push(c);return a.sort()};d.extend=function(b){y(e.call(arguments,1),function(a){if(a)for(var c in a)b[c]=a[c]});return b};d.pick=function(b){var a={},c=q.apply(g,e.call(arguments,1));y(c,function(c){c in b&&(a[c]=b[c])});return a};d.omit=function(b){var a={},c=q.apply(g,e.call(arguments,1)),
f;for(f in b)d.contains(c,f)||(a[f]=b[f]);return a};d.defaults=function(b){y(e.call(arguments,1),function(a){if(a)for(var c in a)void 0===b[c]&&(b[c]=a[c])});return b};d.clone=function(b){return!d.isObject(b)?b:d.isArray(b)?b.slice():d.extend({},b)};d.tap=function(b,a){a(b);return b};var I=function(b,a,c,f){if(b===a)return 0!==b||1/b==1/a;if(null==b||null==a)return b===a;b instanceof d&&(b=b._wrapped);a instanceof d&&(a=a._wrapped);var j=s.call(b);if(j!=s.call(a))return!1;switch(j){case "[object String]":return b==
String(a);case "[object Number]":return b!=+b?a!=+a:0==b?1/b==1/a:b==+a;case "[object Date]":case "[object Boolean]":return+b==+a;case "[object RegExp]":return b.source==a.source&&b.global==a.global&&b.multiline==a.multiline&&b.ignoreCase==a.ignoreCase}if("object"!=typeof b||"object"!=typeof a)return!1;for(var t=c.length;t--;)if(c[t]==b)return f[t]==a;var t=b.constructor,l=a.constructor;if(t!==l&&(!d.isFunction(t)||!(t instanceof t&&d.isFunction(l)&&l instanceof l)))return!1;c.push(b);f.push(a);t=
0;l=!0;if("[object Array]"==j){if(t=b.length,l=t==a.length)for(;t--&&(l=I(b[t],a[t],c,f)););}else{for(var g in b)if(d.has(b,g)&&(t++,!(l=d.has(a,g)&&I(b[g],a[g],c,f))))break;if(l){for(g in a)if(d.has(a,g)&&!t--)break;l=!t}}c.pop();f.pop();return l};d.isEqual=function(b,a){return I(b,a,[],[])};d.isEmpty=function(b){if(null==b)return!0;if(d.isArray(b)||d.isString(b))return 0===b.length;for(var a in b)if(d.has(b,a))return!1;return!0};d.isElement=function(b){return!!(b&&1===b.nodeType)};d.isArray=p||
function(b){return"[object Array]"==s.call(b)};d.isObject=function(b){return b===Object(b)};y("Arguments Function String Number Date RegExp".split(" "),function(b){d["is"+b]=function(a){return s.call(a)=="[object "+b+"]"}});d.isArguments(arguments)||(d.isArguments=function(b){return!(!b||!d.has(b,"callee"))});"function"!==typeof/./&&(d.isFunction=function(b){return"function"===typeof b});d.isFinite=function(b){return isFinite(b)&&!isNaN(parseFloat(b))};d.isNaN=function(b){return d.isNumber(b)&&b!=
+b};d.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"==s.call(b)};d.isNull=function(b){return null===b};d.isUndefined=function(b){return void 0===b};d.has=function(b,a){return z.call(b,a)};d.noConflict=function(){A._=n;return this};d.identity=function(b){return b};d.times=function(b,a,c){for(var f=Array(Math.max(0,b)),d=0;d<b;d++)f[d]=a.call(c,d);return f};d.random=function(b,a){null==a&&(a=b,b=0);return b+Math.floor(Math.random()*(a-b+1))};var B={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",
'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};B.unescape=d.invert(B.escape);var N={escape:RegExp("["+d.keys(B.escape).join("")+"]","g"),unescape:RegExp("("+d.keys(B.unescape).join("|")+")","g")};d.each(["escape","unescape"],function(b){d[b]=function(a){return null==a?"":(""+a).replace(N[b],function(a){return B[b][a]})}});d.result=function(a,c){if(null!=a){var f=a[c];return d.isFunction(f)?f.call(a):f}};d.mixin=function(a){y(d.functions(a),function(c){var f=d[c]=a[c];d.prototype[c]=function(){var a=[this._wrapped];
k.apply(a,arguments);a=f.apply(d,a);return this._chain?d(a).chain():a}})};var K=0;d.uniqueId=function(a){var c=++K+"";return a?a+c:c};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\t|\u2028|\u2029/g;d.template=function(a,c,f){var t;f=d.defaults({},f,d.templateSettings);var j=RegExp([(f.escape||O).source,(f.interpolate||O).source,(f.evaluate||
O).source].join("|")+"|$","g"),g=0,l="__p+='";a.replace(j,function(c,f,d,t,j){l+=a.slice(g,j).replace(G,function(a){return"\\"+P[a]});f&&(l+="'+\n((__t=("+f+"))==null?'':_.escape(__t))+\n'");d&&(l+="'+\n((__t=("+d+"))==null?'':__t)+\n'");t&&(l+="';\n"+t+"\n__p+='");g=j+c.length;return c});l+="';\n";f.variable||(l="with(obj||{}){\n"+l+"}\n");l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n";try{t=new Function(f.variable||"obj","_",l)}catch(s){throw s.source=
l,s;}if(c)return t(c,d);c=function(a){return t.call(this,a,d)};c.source="function("+(f.variable||"obj")+"){\n"+l+"}";return c};d.chain=function(a){return d(a).chain()};d.mixin(d);y("pop push reverse shift sort splice unshift".split(" "),function(a){var c=g[a];d.prototype[a]=function(){var f=this._wrapped;c.apply(f,arguments);("shift"==a||"splice"==a)&&0===f.length&&delete f[0];return this._chain?d(f).chain():f}});y(["concat","join","slice"],function(a){var c=g[a];d.prototype[a]=function(){var a=c.apply(this._wrapped,
arguments);return this._chain?d(a).chain():a}});d.extend(d.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);var Backbone=Backbone||{};
(function(){var A=[].slice,n=function(g,p,k){var e;g=-1;var h=p.length;switch(k.length){case 0:for(;++g<h;)(e=p[g]).callback.call(e.ctx);break;case 1:for(;++g<h;)(e=p[g]).callback.call(e.ctx,k[0]);break;case 2:for(;++g<h;)(e=p[g]).callback.call(e.ctx,k[0],k[1]);break;case 3:for(;++g<h;)(e=p[g]).callback.call(e.ctx,k[0],k[1],k[2]);break;default:for(;++g<h;)(e=p[g]).callback.apply(e.ctx,k)}},h=Backbone.Events={on:function(g,h,k){this._events||(this._events={});(this._events[g]||(this._events[g]=[])).push({callback:h,
context:k,ctx:k||this});return this},once:function(g,h,k){var e=this,q=_.once(function(){e.off(g,q);h.apply(this,arguments)});q._callback=h;this.on(g,q,k);return this},off:function(g,h,k){var e,q,s,z,n,E,w,r;if(!this._events)return this;if(!g&&!h&&!k)return this._events={},this;z=g?[g]:_.keys(this._events);n=0;for(E=z.length;n<E;n++)if(g=z[n],e=this._events[g]){s=[];if(h||k){w=0;for(r=e.length;w<r;w++)q=e[w],(h&&h!==(q.callback._callback||q.callback)||k&&k!==q.context)&&s.push(q)}this._events[g]=
s}return this},trigger:function(g){if(!this._events)return this;var h=A.call(arguments,1),k=this._events[g],e=this._events.all;k&&n(this,k,h);e&&n(this,e,arguments);return this},listenTo:function(g,h,k){var e=this._listeners||(this._listeners={}),q=g._listenerId||(g._listenerId=_.uniqueId("l"));e[q]=g;g.on(h,k||this,this);return this},stopListening:function(g,h,k){var e=this._listeners;if(e){if(g)g.off(h,k,this),!h&&!k&&delete e[g._listenerId];else{for(var q in e)e[q].off(null,null,this);this._listeners=
{}}return this}}};h.bind=h.on;h.unbind=h.off;"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports&&(exports=module.exports=h),exports.Backbone=exports.Backbone||Backbone)})();(function(){function A(g){var e=(new Date).getTime(),q=Math.max(0,16-(e-h)),s=n.setTimeout(function(){g(e+q)},q);h=e+q;return s}var n=this,h=0,g=["ms","moz","webkit","o"];if("undefined"!==typeof exports)"undefined"!==typeof module&&module.exports&&(exports=module.exports=A),exports.requestAnimationFrame=A;else{for(var p=0;p<g.length&&!n.requestAnimationFrame;++p)n.requestAnimationFrame=n[g[p]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[g[p]+"CancelAnimationFrame"]||n[g[p]+"CancelRequestAnimationFrame"];
n.requestAnimationFrame||(n.requestAnimationFrame=A);n.cancelAnimationFrame||(n.cancelAnimationFrame=function(g){clearTimeout(g)})}})();(function(){function A(){var a=document.body.getBoundingClientRect(),c=this.width=a.width,a=this.height=a.height;this.renderer.setSize(c,a,this.ratio);this.trigger(f.Events.resize,c,a)}var n=this,h=n.Two||{},g=Math.sin,p=Math.cos,k=Math.atan2,e=Math.sqrt,q=Math.PI,s=2*q,z=q/2,J=Math.pow,E=Math.min,w=Math.max,r=0,m={hasEventListeners:_.isFunction(n.addEventListener),bind:function(a,c,f,d){this.hasEventListeners?a.addEventListener(c,f,!!d):a.attachEvent("on"+c,f);return this},unbind:function(a,c,f,
d){this.hasEventListeners?a.removeEventListeners(c,f,!!d):a.detachEvent("on"+c,f);return this}},f=n.Two=function(a){a=_.defaults(a||{},{fullscreen:!1,width:640,height:480,type:f.Types.svg,autostart:!1});_.each(a,function(a,f){"fullscreen"===f||("width"===f||"height"===f||"autostart"===f)||(this[f]=a)},this);_.isElement(a.domElement)&&(this.type=f.Types[a.domElement.tagName.toLowerCase()]);this.renderer=new f[this.type](this);f.Utils.setPlaying.call(this,a.autostart);this.frameCount=0;a.fullscreen?
(a=_.bind(A,this),_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),_.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),m.bind(n,"resize",a),a()):_.isElement(a.domElement)||(this.renderer.setSize(a.width,a.height,this.ratio),this.width=a.width,this.height=a.height);this.scene=this.renderer.scene;f.Instances.push(this)};_.extend(f,{Array:n.Float32Array||Array,Types:{webgl:"WebGLRenderer",
svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.4.0",Identifier:"two-",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){n.Two=h;return this},uniqueId:function(){var a=r;r++;return a},Utils:{release:function(a){_.isObject(a)&&(_.isFunction(a.unbind)&&a.unbind(),
a.vertices&&(_.isFunction(a.vertices.unbind)&&a.vertices.unbind(),_.each(a.vertices,function(a){_.isFunction(a.unbind)&&a.unbind()})),a.children&&_.each(a.children,function(a){f.Utils.release(a)}))},Curve:{CollinearityEpsilon:J(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:0.25,angle:0,epsilon:0.01},abscissas:[[0.5773502691896257],[0,0.7745966692414834],[0.33998104358485626,0.8611363115940526],[0,0.5384693101056831,0.906179845938664],[0.2386191860831969,0.6612093864662645,0.932469514203152],
[0,0.4058451513773972,0.7415311855993945,0.9491079123427585],[0.1834346424956498,0.525532409916329,0.7966664774136267,0.9602898564975363],[0,0.3242534234038089,0.6133714327005904,0.8360311073266358,0.9681602395076261],[0.14887433898163122,0.4333953941292472,0.6794095682990244,0.8650633666889845,0.9739065285171717],[0,0.26954315595234496,0.5190961292068118,0.7301520055740494,0.8870625997680953,0.978228658146057],[0.1252334085114689,0.3678314989981802,0.5873179542866175,0.7699026741943047,0.9041172563704749,
0.9815606342467192],[0,0.2304583159551348,0.44849275103644687,0.6423493394403402,0.8015780907333099,0.9175983992229779,0.9841830547185881],[0.10805494870734367,0.31911236892788974,0.5152486363581541,0.6872929048116855,0.827201315069765,0.9284348836635735,0.9862838086968123],[0,0.20119409399743451,0.3941513470775634,0.5709721726085388,0.7244177313601701,0.8482065834104272,0.937273392400706,0.9879925180204854],[0.09501250983763744,0.2816035507792589,0.45801677765722737,0.6178762444026438,0.755404408355003,
0.8656312023878318,0.9445750230732326,0.9894009349916499]],weights:[[1],[0.8888888888888888,0.5555555555555556],[0.6521451548625461,0.34785484513745385],[0.5688888888888889,0.47862867049936647,0.23692688505618908],[0.46791393457269104,0.3607615730481386,0.17132449237917036],[0.4179591836734694,0.3818300505051189,0.27970539148927664,0.1294849661688697],[0.362683783378362,0.31370664587788727,0.22238103445337448,0.10122853629037626],[0.3302393550012598,0.31234707704000286,0.26061069640293544,0.1806481606948574,
0.08127438836157441],[0.29552422471475287,0.26926671930999635,0.21908636251598204,0.1494513491505806,0.06667134430868814],[0.2729250867779006,0.26280454451024665,0.23319376459199048,0.18629021092773426,0.1255803694649046,0.05566856711617366],[0.24914704581340277,0.2334925365383548,0.20316742672306592,0.16007832854334622,0.10693932599531843,0.04717533638651183],[0.2325515532308739,0.22628318026289723,0.2078160475368885,0.17814598076194574,0.13887351021978725,0.09212149983772845,0.04048400476531588],
[0.2152638534631578,0.2051984637212956,0.18553839747793782,0.15720316715819355,0.12151857068790319,0.08015808715976021,0.03511946033175186],[0.2025782419255613,0.19843148532711158,0.1861610000155622,0.16626920581699392,0.13957067792615432,0.10715922046717194,0.07036604748810812,0.03075324199611727],[0.1894506104550685,0.18260341504492358,0.16915651939500254,0.14959598881657674,0.12462897125553388,0.09515851168249279,0.062253523938647894,0.027152459411754096]]},devicePixelRatio:n.devicePixelRatio||
1,getBackingStoreRatio:function(a){return a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1},getRatio:function(a){return f.Utils.devicePixelRatio/d(a)},setPlaying:function(a){this.playing=!!a;return this},getComputedMatrix:function(a,c){var d=[];c=c&&c.identity()||new f.Matrix;for(var j=a;j&&j._matrix;)d.push(j._matrix),j=j.parent;d.reverse();_.each(d,function(a){a=a.elements;c.multiply(a[0],a[1],a[2],a[3],
a[4],a[5],a[6],a[7],a[8],a[9])});return c},applySvgAttributes:function(a,c){_.each(a.attributes,function(a){var f=a.nodeName;switch(f){case "visibility":c.visible=!!a.nodeValue;break;case "stroke-linecap":c.cap=a.nodeValue;break;case "stroke-linejoin":c.join=a.nodeValue;break;case "stroke-miterlimit":c.miter=a.nodeValue;break;case "stroke-width":c.linewidth=parseFloat(a.nodeValue);break;case "stroke-opacity":case "fill-opacity":case "opacity":c.opacity=parseFloat(a.nodeValue);break;case "fill":case "stroke":c[f]=
"none"==a.nodeValue?"transparent":a.nodeValue;break;case "id":c.id=a.nodeValue;break;case "class":c.classList||(c.classList=[]),a.nodeValue.split(" ").forEach(function(a){c.classList.push(a)})}});return c},read:{svg:function(){return f.Utils.read.g.apply(this,arguments)},g:function(a){var c=new f.Group;this.add(c);_.each(a.childNodes,function(a){var d=a.nodeName;d&&(d=d.replace(/svg\:/ig,"").toLowerCase(),d in f.Utils.read&&(a=f.Utils.read[d].call(this,a),c.add(a)))},this);return f.Utils.applySvgAttributes(a,
c)},polygon:function(a,c){var d=[];a.getAttribute("points").replace(/(-?[\d\.?]+),(-?[\d\.?]+)/g,function(a,c,j){d.push(new f.Anchor(parseFloat(c),parseFloat(j)))});var j=(new f.Polygon(d,!c)).noStroke();j.fill="black";return f.Utils.applySvgAttributes(a,j)},polyline:function(a){return f.Utils.read.polygon(a,!0)},path:function(a){var c,d,j,g=!1,s=!1,e=a.getAttribute("d").match(/[a-df-z][^a-df-z]*/ig),h=e.length-1,e=_.flatten(_.map(e,function(a,e){var m,b,k=a[0],q=k.toLowerCase();j=a.slice(1).trim();
j=j.replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(a,b,c){return parseFloat(b)*J(10,c)});j=j.split(/[\s,]+|(?=\s?[+\-])/);g=k===q;var u,D,L,l;switch(q){case "z":e>=h?s=!0:(b=c.x,m=c.y,m=new f.Anchor(b,m,void 0,void 0,void 0,void 0,f.Commands.close));break;case "m":case "l":b=parseFloat(j[0]);m=parseFloat(j[1]);m=new f.Anchor(b,m,void 0,void 0,void 0,void 0,"m"===q?f.Commands.move:f.Commands.line);g&&m.addSelf(c);c=m;break;case "h":case "v":b="h"===q?"x":"y";k="x"===b?"y":"x";m=new f.Anchor(void 0,
void 0,void 0,void 0,void 0,void 0,f.Commands.line);m[b]=parseFloat(j[0]);m[k]=c[k];g&&(m[b]+=c[b]);c=m;break;case "s":case "c":m=c.x;k=c.y;d||(d=(new f.Vector).copy(c));"c"===q?(u=parseFloat(j[0]),b=parseFloat(j[1]),q=parseFloat(j[2]),D=parseFloat(j[3]),L=parseFloat(j[4]),l=parseFloat(j[5])):(D=f.Utils.getReflection(c,d,g),u=D.x,b=D.y,q=parseFloat(j[0]),D=parseFloat(j[1]),L=parseFloat(j[2]),l=parseFloat(j[3]));g&&(u+=m,b+=k,q+=m,D+=k,L+=m,l+=k);_.isObject(c.controls)||f.Anchor.AppendCurveProperties(c);
c.controls.right.set(u-c.x,b-c.y);c=m=new f.Anchor(L,l,q-L,D-l,void 0,void 0,f.Commands.curve);d=m.controls.left;break;case "t":case "q":m=c.x;k=c.y;d||(d=(new f.Vector).copy(c));d.isZero()?(u=m,b=k):(u=d.x,k=d.y);"q"===q?(q=parseFloat(j[0]),D=parseFloat(j[1]),L=parseFloat(j[1]),l=parseFloat(j[2])):(D=f.Utils.getReflection(c,d,g),q=D.x,D=D.y,L=parseFloat(j[0]),l=parseFloat(j[1]));g&&(u+=m,b+=k,q+=m,D+=k,L+=m,l+=k);_.isObject(c.controls)||f.Anchor.AppendCurveProperties(c);c.controls.right.set(u-c.x,
b-c.y);c=m=new f.Anchor(L,l,q-L,D-l,void 0,void 0,f.Commands.curve);d=m.controls.left;break;case "a":throw new f.Utils.Error("not yet able to interpret Elliptical Arcs.");}return m}));if(!(1>=e.length))return e=_.compact(e),e=(new f.Polygon(e,s,void 0,!0)).noStroke(),e.fill="black",f.Utils.applySvgAttributes(a,e)},circle:function(a){var c=parseFloat(a.getAttribute("cx")),d=parseFloat(a.getAttribute("cy")),j=parseFloat(a.getAttribute("r")),e=f.Resolution,m=_.map(_.range(e),function(a){var c=a/e*s;
a=j*p(c);c=j*g(c);return new f.Anchor(a,c)},this),m=(new f.Polygon(m,!0,!0)).noStroke();m.translation.set(c,d);m.fill="black";return f.Utils.applySvgAttributes(a,m)},ellipse:function(a){var c=parseFloat(a.getAttribute("cx")),d=parseFloat(a.getAttribute("cy")),j=parseFloat(a.getAttribute("rx")),e=parseFloat(a.getAttribute("ry")),m=f.Resolution,h=_.map(_.range(m),function(a){var c=a/m*s;a=j*p(c);c=e*g(c);return new f.Anchor(a,c)},this),h=(new f.Polygon(h,!0,!0)).noStroke();h.translation.set(c,d);h.fill=
"black";return f.Utils.applySvgAttributes(a,h)},rect:function(a){var c=parseFloat(a.getAttribute("x")),d=parseFloat(a.getAttribute("y")),j=parseFloat(a.getAttribute("width")),g=parseFloat(a.getAttribute("height")),j=j/2,g=g/2,e=[new f.Anchor(j,g),new f.Anchor(-j,g),new f.Anchor(-j,-g),new f.Anchor(j,-g)],e=(new f.Polygon(e,!0)).noStroke();e.translation.set(c+j,d+g);e.fill="black";return f.Utils.applySvgAttributes(a,e)},line:function(a){var c=parseFloat(a.getAttribute("x1")),d=parseFloat(a.getAttribute("y1")),
j=parseFloat(a.getAttribute("x2")),g=parseFloat(a.getAttribute("y2")),j=(j-c)/2,g=(g-d)/2,e=[new f.Anchor(-j,-g),new f.Anchor(j,g)],e=(new f.Polygon(e)).noFill();e.translation.set(c+j,d+g);return f.Utils.applySvgAttributes(a,e)}},subdivide:function(a,c,d,j,g,e,s,m,h){h=h||f.Utils.Curve.RecursionLimit;var k=h+1;return a===s&&c===m?[new f.Anchor(s,m)]:_.map(_.range(0,k),function(h){var b=h/k;h=y(b,a,d,g,s);b=y(b,c,j,e,m);return new f.Anchor(h,b)})},getPointOnCubicBezier:function(a,c,f,d,g){var e=1-
a;return e*e*e*c+3*e*e*a*f+3*e*a*a*d+a*a*a*g},getCurveLength:function(a,c,d,j,g,s,m,h,k){if(a===d&&c===j&&g===m&&s===h)return a=m-a,c=h-c,e(a*a+c*c);var q=9*(d-g)+3*(m-a),u=6*(a+g)-12*d,b=3*(d-a),p=9*(j-s)+3*(h-c),r=6*(c+s)-12*j,z=3*(j-c);return F(function(a){var c=(q*a+u)*a+b;a=(p*a+r)*a+z;return e(c*c+a*a)},0,1,k||f.Utils.Curve.RecursionLimit)},integrate:function(a,c,d,j){var g=f.Utils.Curve.abscissas[j-2],e=f.Utils.Curve.weights[j-2];d=0.5*(d-c);c=d+c;var s=0,m=j+1>>1;for(j=j&1?e[s++]*a(c):0;s<
m;){var h=d*g[s];j+=e[s++]*(a(c+h)+a(c-h))}return d*j},getCurveFromPoints:function(a,c){for(var d=a.length,j=d-1,g=0;g<d;g++){var e=a[g];_.isObject(e.controls)||f.Anchor.AppendCurveProperties(e);var s=c?M(g-1,d):w(g-1,0),m=c?M(g+1,d):E(g+1,j);H(a[s],e,a[m]);e._command=0===g?f.Commands.move:f.Commands.curve;e.controls.left.x=_.isNumber(e.controls.left.x)?e.controls.left.x:e.x;e.controls.left.y=_.isNumber(e.controls.left.y)?e.controls.left.y:e.y;e.controls.right.x=_.isNumber(e.controls.right.x)?e.controls.right.x:
e.x;e.controls.right.y=_.isNumber(e.controls.right.y)?e.controls.right.y:e.y}},getControlPoints:function(a,c,d){var j=x(a,c),e=x(d,c);a=C(a,c);d=C(d,c);var s=(j+e)/2;c.u=_.isObject(c.controls.left)?c.controls.left:new f.Vector(0,0);c.v=_.isObject(c.controls.right)?c.controls.right:new f.Vector(0,0);if(1E-4>a||1E-4>d)return c._relative||(c.controls.left.copy(c),c.controls.right.copy(c)),c;a*=0.33;d*=0.33;s=e<j?s+z:s-z;c.controls.left.x=p(s)*a;c.controls.left.y=g(s)*a;s-=q;c.controls.right.x=p(s)*d;
c.controls.right.y=g(s)*d;c._relative||(c.controls.left.x+=c.x,c.controls.left.y+=c.y,c.controls.right.x+=c.x,c.controls.right.y+=c.y);return c},getReflection:function(a,c,d){var e=c.distanceTo(f.Vector.zero);c=x(f.Vector.zero,c);return new f.Vector(e*p(c)+(d?0:a.x),e*g(c)+(d?0:a.y))},angleBetween:function(a,c){var d,f;if(4<=arguments.length)return d=arguments[0]-arguments[2],f=arguments[1]-arguments[3],k(f,d);d=a.x-c.x;f=a.y-c.y;return k(f,d)},distanceBetweenSquared:function(a,c){var d=a.x-c.x,f=
a.y-c.y;return d*d+f*f},distanceBetween:function(a,c){return e(u(a,c))},mod:function(a,c){for(;0>a;)a+=c;return a%c},Collection:function(){Array.call(this);1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(a){this.name="two.js";this.message=a}}});f.Utils.Error.prototype=Error();f.Utils.Error.prototype.constructor=f.Utils.Error;f.Utils.Collection.prototype=[];f.Utils.Collection.constructor=
f.Utils.Collection;_.extend(f.Utils.Collection.prototype,Backbone.Events,{pop:function(){var a=Array.prototype.pop.apply(this,arguments);this.trigger(f.Events.remove,[a]);return a},shift:function(){var a=Array.prototype.shift.apply(this,arguments);this.trigger(f.Events.remove,[a]);return a},push:function(){var a=Array.prototype.push.apply(this,arguments);this.trigger(f.Events.insert,arguments);return a},unshift:function(){var a=Array.prototype.unshift.apply(this,arguments);this.trigger(f.Events.insert,
arguments);return a},splice:function(){var a=Array.prototype.splice.apply(this,arguments),c;this.trigger(f.Events.remove,a);2<arguments.length&&(c=this.slice(arguments[0],arguments.length-2),this.trigger(f.Events.insert,c));return a}});var C=f.Utils.distanceBetween,u=f.Utils.distanceBetweenSquared,x=f.Utils.angleBetween,H=f.Utils.getControlPoints,M=f.Utils.mod,d=f.Utils.getBackingStoreRatio,y=f.Utils.getPointOnCubicBezier,F=f.Utils.integrate;_.extend(f.prototype,Backbone.Events,{appendTo:function(a){a.appendChild(this.renderer.domElement);
return this},play:function(){f.Utils.setPlaying.call(this,!0);return this.trigger(f.Events.play)},pause:function(){this.playing=!1;return this.trigger(f.Events.pause)},update:function(){var a=!!this._lastFrame,c=(n.performance&&n.performance.now?n.performance:Date).now();this.frameCount++;a&&(this.timeDelta=parseFloat((c-this._lastFrame).toFixed(3)));this._lastFrame=c;var a=this.width,c=this.height,d=this.renderer;(a!==d.width||c!==d.height)&&d.setSize(a,c,this.ratio);this.trigger(f.Events.update,
this.frameCount,this.timeDelta);return this.render()},render:function(){this.renderer.render();return this.trigger(f.Events.render,this.frameCount)},add:function(a){var c=a;_.isArray(a)||(c=_.toArray(arguments));this.scene.add(c);return this},remove:function(a){var c=a;_.isArray(a)||(c=_.toArray(arguments));this.scene.remove(c);return this},clear:function(){this.scene.remove(_.toArray(this.scene.children));return this},makeLine:function(a,c,d,e){d=(d-a)/2;e=(e-c)/2;var g=[new f.Anchor(-d,-e),new f.Anchor(d,
e)],g=(new f.Polygon(g)).noFill();g.translation.set(a+d,c+e);this.scene.add(g);return g},makeRectangle:function(a,c,d,e){d/=2;e/=2;e=[new f.Anchor(-d,-e),new f.Anchor(d,-e),new f.Anchor(d,e),new f.Anchor(-d,e)];e=new f.Polygon(e,!0);e.translation.set(a,c);this.scene.add(e);return e},makeCircle:function(a,c,d){return this.makeEllipse(a,c,d,d)},makeEllipse:function(a,c,d,e){var m=f.Resolution,h=_.map(_.range(m),function(a){var c=a/m*s;a=d*p(c);c=e*g(c);return new f.Anchor(a,c)},this),h=new f.Polygon(h,
!0,!0);h.translation.set(a,c);this.scene.add(h);return h},makeCurve:function(a){var c=arguments.length,d=a;if(!_.isArray(a))for(var d=[],e=0;e<c;e+=2){var g=arguments[e];if(!_.isNumber(g))break;d.push(new f.Anchor(g,arguments[e+1]))}var c=arguments[c-1],d=new f.Polygon(d,!(_.isBoolean(c)&&c),!0),c=d.getBoundingClientRect(),s=c.left+c.width/2,m=c.top+c.height/2;_.each(d.vertices,function(a){a.x-=s;a.y-=m});d.translation.set(s,m);this.scene.add(d);return d},makePolygon:function(a){var c=arguments.length,
d=a;if(!_.isArray(a))for(var d=[],e=0;e<c;e+=2){var g=arguments[e];if(!_.isNumber(g))break;d.push(new f.Anchor(g,arguments[e+1]))}c=arguments[c-1];d=new f.Polygon(d,!(_.isBoolean(c)&&c));c=d.getBoundingClientRect();d.center().translation.set(c.left+c.width/2,c.top+c.height/2);this.scene.add(d);return d},makeGroup:function(a){var c=a;_.isArray(a)||(c=_.toArray(arguments));var d=new f.Group;this.scene.add(d);d.add(c);return d},interpret:function(a){var c=a.tagName.toLowerCase();if(!(c in f.Utils.read))return null;
a=f.Utils.read[c].call(this,a);this.add(a);return a}});(function(){requestAnimationFrame(arguments.callee);f.Instances.forEach(function(a){a.playing&&a.update()})})();"function"===typeof define&&define.amd?define(function(){return f}):"undefined"!=typeof module&&module.exports&&(module.exports=f)})();(function(){var A,n,h,g,p=Two.Vector=function(e,g){this.x=e||0;this.y=g||0};_.extend(p,{zero:new Two.Vector});_.extend(p.prototype,Backbone.Events,{set:function(e,g){this.x=e;this.y=g;return this},copy:function(e){this.x=e.x;this.y=e.y;return this},clear:function(){this.y=this.x=0;return this},clone:function(){return new p(this.x,this.y)},add:function(e,g){this.x=e.x+g.x;this.y=e.y+g.y;return this},addSelf:function(e){this.x+=e.x;this.y+=e.y;return this},sub:function(e,g){this.x=e.x-g.x;this.y=e.y-
g.y;return this},subSelf:function(e){this.x-=e.x;this.y-=e.y;return this},multiplySelf:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divideScalar:function(e){e?(this.x/=e,this.y/=e):this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},
distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){h=this.x-e.x;g=this.y-e.y;return h*h+g*g},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return 1E-4>this.distanceTo(e)},lerp:function(e,g){A=(e.x-this.x)*g+this.x;n=(e.y-this.y)*g+this.y;return this.set(A,n)},isZero:function(){return 1E-4>this.length()},toString:function(){return this.x+","+this.y},toObject:function(){return{x:this.x,y:this.y}}});var k={set:function(e,
g){this._x=e;this._y=g;return this.trigger(Two.Events.change)},copy:function(e){this._x=e.x;this._y=e.y;return this.trigger(Two.Events.change)},clear:function(){this._y=this._x=0;return this.trigger(Two.Events.change)},clone:function(){return new p(this._x,this._y)},add:function(e,g){this._x=e.x+g.x;this._y=e.y+g.y;return this.trigger(Two.Events.change)},addSelf:function(e){this._x+=e.x;this._y+=e.y;return this.trigger(Two.Events.change)},sub:function(e,g){this._x=e.x-g.x;this._y=e.y-g.y;return this.trigger(Two.Events.change)},
subSelf:function(e){this._x-=e.x;this._y-=e.y;return this.trigger(Two.Events.change)},multiplySelf:function(e){this._x*=e.x;this._y*=e.y;return this.trigger(Two.Events.change)},multiplyScalar:function(e){this._x*=e;this._y*=e;return this.trigger(Two.Events.change)},divideScalar:function(e){return e?(this._x/=e,this._y/=e,this.trigger(Two.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this._x*e.x+this._y*e.y},lengthSquared:function(){return this._x*
this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){h=this._x-e.x;g=this._y-e.y;return h*h+g*g},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return 1E-4>this.distanceTo(e)},lerp:function(e,g){A=(e.x-this._x)*g+this._x;n=(e.y-this._y)*g+this._y;return this.set(A,n)},isZero:function(){return 1E-4>
this.length()},toString:function(){return this._x+","+this._y},toObject:function(){return{x:this._x,y:this._y}}},e={get:function(){return this._x},set:function(e){this._x=e;this.trigger(Two.Events.change,"x")}},q={get:function(){return this._y},set:function(e){this._y=e;this.trigger(Two.Events.change,"y")}};Two.Vector.prototype.bind=Two.Vector.prototype.on=function(){this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",e),Object.defineProperty(this,"y",q),_.extend(this,k),this._bound=
!0);Backbone.Events.bind.apply(this,arguments);return this}})();(function(){var A=Two.Commands,n,h,g,p=Two.Anchor=function(e,g,h,k,n,E,w){Two.Vector.call(this,e,g);this._broadcast=_.bind(function(){this.trigger(Two.Events.change)},this);this._command=w||A.move;this._relative=!0;if(!w)return this;p.AppendCurveProperties(this);_.isNumber(h)&&(this.controls.left.x=h);_.isNumber(k)&&(this.controls.left.y=k);_.isNumber(n)&&(this.controls.right.x=n);_.isNumber(E)&&(this.controls.right.y=E)};_.extend(p,{AppendCurveProperties:function(e){e.controls={left:new Two.Vector(0,
0),right:new Two.Vector(0,0)}}});var k={listen:function(){_.isObject(this.controls)||p.AppendCurveProperties(this);_.each(this.controls,function(e){e.bind(Two.Events.change,this._broadcast)},this);return this},ignore:function(){_.each(this.controls,function(e){e.unbind(Two.Events.change,this._broadcast)},this);return this},clone:function(){h=this.controls;g=new Two.Anchor(this.x,this.y,h&&h.left.x,h&&h.left.y,h&&h.right.x,h&&h.right.y,this.command);g.relative=this._relative;return g},toObject:function(){n=
{x:this.x,y:this.y};this._command&&(n.command=this._command);this._relative&&(n.relative=this._relative);this.controls&&(n.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()});return n}};Object.defineProperty(p.prototype,"command",{get:function(){return this._command},set:function(e){this._command=e;this._command===A.curve&&!_.isObject(this.controls)&&p.AppendCurveProperties(this);return this.trigger(Two.Events.change)}});Object.defineProperty(p.prototype,"relative",
{get:function(){return this._relative},set:function(e){if(this._relative==e)return this;this._relative=!!e;return this.trigger(Two.Events.change)}});_.extend(p.prototype,Two.Vector.prototype,k);Two.Anchor.prototype.bind=Two.Anchor.prototype.on=function(){Two.Vector.prototype.bind.apply(this,arguments);_.extend(this,k)};Two.Anchor.prototype.unbind=Two.Anchor.prototype.off=function(){Two.Vector.prototype.unbind.apply(this,arguments);_.extend(this,k)}})();(function(){_.range(6);var A=Math.cos,n=Math.sin,h=Math.tan,g,p,k,e,q,s,z,J,E,w,r,m,f,C,u,x,H,M,d,y,F,a,c,t,j,I,B,N,K,O,P,G,b,v,R,Q,D,L,l,T,U,V,W,X,Y,Z,$,aa,S,ca=[],ba=Two.Matrix=function(a,c,b,d,f,e){this.elements=new Two.Array(9);var g=a;_.isArray(g)||(g=_.toArray(arguments));this.identity().set(g)};_.extend(ba,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(b,e,l){if(3>=e.length)return m,f,C,g=e[0]||0,p=e[1]||0,k=e[2]||0,q=b,m=q[0]*g+q[1]*p+q[2]*k,f=q[3]*g+q[4]*p+q[5]*k,C=q[6]*g+q[7]*p+q[8]*k,
{x:m,y:f,z:C};u=b[0];x=b[1];H=b[2];M=b[3];d=b[4];y=b[5];F=b[6];a=b[7];c=b[8];t=e[0];j=e[1];I=e[2];B=e[3];N=e[4];K=e[5];O=e[6];P=e[7];G=e[8];l=l||new Two.Array(9);l[0]=u*t+x*B+H*O;l[1]=u*j+x*N+H*P;l[2]=u*I+x*K+H*G;l[3]=M*t+d*B+y*O;l[4]=M*j+d*N+y*P;l[5]=M*I+d*K+y*G;l[6]=F*t+a*B+c*O;l[7]=F*j+a*N+c*P;l[8]=F*I+a*K+c*G;return l}});_.extend(ba.prototype,Backbone.Events,{set:function(a,b,c,d,f,e){r=a;R=arguments.length;_.isArray(r)||(r=_.toArray(arguments));_.each(r,function(a,b){_.isNumber(a)&&(this.elements[b]=
a)},this);return this.trigger(Two.Events.change)},identity:function(){this.set(ba.Identity);return this},multiply:function(e,l,g,h,k,L,q,D,T){r=arguments;R=r.length;if(1>=R)return _.each(this.elements,function(a,b){this.elements[b]=a*e},this),this.trigger(Two.Events.change);if(3>=R)return m,f,C,e=e||0,l=l||0,g=g||0,k=this.elements,m=k[0]*e+k[1]*l+k[2]*g,f=k[3]*e+k[4]*l+k[5]*g,C=k[6]*e+k[7]*l+k[8]*g,{x:m,y:f,z:C};b=this.elements;v=r;u=b[0];x=b[1];H=b[2];M=b[3];d=b[4];y=b[5];F=b[6];a=b[7];c=b[8];t=
v[0];j=v[1];I=v[2];B=v[3];N=v[4];K=v[5];O=v[6];P=v[7];G=v[8];this.elements[0]=u*t+x*B+H*O;this.elements[1]=u*j+x*N+H*P;this.elements[2]=u*I+x*K+H*G;this.elements[3]=M*t+d*B+y*O;this.elements[4]=M*j+d*N+y*P;this.elements[5]=M*I+d*K+y*G;this.elements[6]=F*t+a*B+c*O;this.elements[7]=F*j+a*N+c*P;this.elements[8]=F*I+a*K+c*G;return this.trigger(Two.Events.change)},inverse:function(a){g=this.elements;a=a||new Two.Matrix;D=g[0];L=g[1];l=g[2];T=g[3];U=g[4];V=g[5];W=g[6];X=g[7];Y=g[8];Z=Y*U-V*X;$=-Y*T+V*W;
aa=X*T-U*W;S=D*Z+L*$+l*aa;if(!S)return null;S=1/S;a.elements[0]=Z*S;a.elements[1]=(-Y*L+l*X)*S;a.elements[2]=(V*L-l*U)*S;a.elements[3]=$*S;a.elements[4]=(Y*D-l*W)*S;a.elements[5]=(-V*D+l*T)*S;a.elements[6]=aa*S;a.elements[7]=(-X*D+L*W)*S;a.elements[8]=(U*D-L*T)*S;return a},scale:function(a,b){R=arguments.length;1>=R&&(b=a);return this.multiply(a,0,0,0,b,0,0,0,1)},rotate:function(a){k=A(a);Q=n(a);return this.multiply(k,-Q,0,Q,k,0,0,0,1)},translate:function(a,b){return this.multiply(1,0,a,0,1,b,0,0,
1)},skewX:function(a){g=h(a);return this.multiply(1,g,0,0,1,0,0,0,1)},skewY:function(a){g=h(a);return this.multiply(1,0,0,g,1,0,0,0,1)},toString:function(a){this.toArray(a,ca);return ca.join(" ")},toArray:function(a,b){r=this.elements;w=!!b;g=parseFloat(r[0].toFixed(3));p=parseFloat(r[1].toFixed(3));k=parseFloat(r[2].toFixed(3));e=parseFloat(r[3].toFixed(3));q=parseFloat(r[4].toFixed(3));s=parseFloat(r[5].toFixed(3));if(a){z=parseFloat(r[6].toFixed(3));J=parseFloat(r[7].toFixed(3));E=parseFloat(r[8].toFixed(3));
if(w){b[0]=g;b[1]=e;b[2]=z;b[3]=p;b[4]=q;b[5]=J;b[6]=k;b[7]=s;b[8]=E;return}return[g,e,z,p,q,J,k,s,E]}if(w)b[0]=g,b[1]=e,b[2]=p,b[3]=q,b[4]=k,b[5]=s;else return[g,e,p,q,k,s]},clone:function(){g=this.elements[0];p=this.elements[1];k=this.elements[2];e=this.elements[3];q=this.elements[4];s=this.elements[5];z=this.elements[6];J=this.elements[7];E=this.elements[8];return new Two.Matrix(g,p,k,e,q,s,z,J,E)}})})();(function(){var A=Two.Utils.mod,n,h,g,p={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(e,k){g=e;h=document.createElementNS(this.ns,g);"svg"===g&&(k=_.defaults(k||{},{version:this.version}));_.isObject(k)&&p.setAttributes(h,k);return h},setAttribute:function(e,g){this.setAttribute(g,e)},setAttributes:function(e,g){_.each(g,p.setAttribute,e);return this},removeAttribute:function(e,g){this.removeAttribute(g)},removeAttributes:function(e,g){_.each(g,
p.removeAttribute,e);return this},toString:function(e,g){var h=e.length,k=h-1,p;return _.map(e,function(n,w){var r,m=g?A(w-1,h):Math.max(w-1,0),f=g?A(w+1,h):Math.min(w+1,k);r=e[m];var C=e[f],u,x,H,m=n.x.toFixed(3),C=n.y.toFixed(3);switch(n._command){case Two.Commands.close:r=Two.Commands.close;break;case Two.Commands.curve:u=r.controls&&r.controls.right||r;H=n.controls&&n.controls.left||n;r._relative?(f=(u.x+r.x).toFixed(3),u=(u.y+r.y).toFixed(3)):(f=u.x.toFixed(3),u=u.y.toFixed(3));n._relative?(x=
(H.x+n.x).toFixed(3),H=(H.y+n.y).toFixed(3)):(x=H.x.toFixed(3),H=H.y.toFixed(3));r=(0===w?Two.Commands.move:Two.Commands.curve)+" "+f+" "+u+" "+x+" "+H+" "+m+" "+C;break;case Two.Commands.move:p=n;r=Two.Commands.move+" "+m+" "+C;break;default:r=n._command+" "+m+" "+C}w>=k&&g&&(n._command===Two.Commands.curve&&(C=p,u=n.controls&&n.controls.right||n,m=C.controls&&C.controls.left||C,n._relative?(f=(u.x+n.x).toFixed(3),u=(u.y+n.y).toFixed(3)):(f=u.x.toFixed(3),u=u.y.toFixed(3)),C._relative?(x=(m.x+C.x).toFixed(3),
H=(m.y+C.y).toFixed(3)):(x=m.x.toFixed(3),H=m.y.toFixed(3)),m=C.x.toFixed(3),C=C.y.toFixed(3),r+=" C "+f+" "+u+" "+x+" "+H+" "+m+" "+C),r+=" Z");return r}).join(" ")},group:{appendChild:function(e){(h=this.domElement.querySelector("#"+e))&&this.elem.appendChild(h)},removeChild:function(e){(h=this.domElement.querySelector("#"+e))&&this.elem.removeChild(h)},renderChild:function(e){p[e._renderer.type].render.call(e,this)},render:function(e){this._update();this._renderer.elem||(this._renderer.elem=p.createElement("g",
{id:this.id}),e.appendChild(this._renderer.elem));n=this._matrix.manual||this._flagMatrix;var g={domElement:e,elem:this._renderer.elem};n&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var h in this.children)p.group.renderChild.call(e,this.children[h]);this._flagAdditions&&_.each(this.additions,p.group.appendChild,g);this._flagSubtractions&&_.each(this.subtractions,p.group.removeChild,g);return this.flagReset()}},polygon:{render:function(e){this._update();
this._renderer.elem||(this._renderer.elem=p.createElement("path",{id:this.id}),e.appendChild(this._renderer.elem));h=this._renderer.elem;(n=this._matrix.manual||this._flagMatrix)&&h.setAttribute("transform","matrix("+this._matrix.toString()+")");this._flagVertices&&(vertices=p.toString(this._vertices,this._closed),h.setAttribute("d",vertices));this._flagFill&&h.setAttribute("fill",this._fill);this._flagStroke&&h.setAttribute("stroke",this._stroke);this._flagLinewidth&&h.setAttribute("stroke-width",
this._linewidth);this._flagOpacity&&(h.setAttribute("stroke-opacity",this._opacity),h.setAttribute("fill-opacity",this._opacity));this._flagVisible&&h.setAttribute("visibility",this._visible?"visible":"hidden");this._flagCap&&h.setAttribute("stroke-linecap",this._cap);this._flagJoin&&h.setAttribute("stroke-linejoin",this._join);this._flagMiter&&h.setAttribute("stroke-miterlimit",this.miter);return this.flagReset()}}},k=Two[Two.Types.svg]=function(e){this.domElement=e.domElement||p.createElement("svg");
this.scene=new Two.Group;this.scene.parent=this};_.extend(k,{Utils:p});_.extend(k.prototype,Backbone.Events,{setSize:function(e,g){this.width=e;this.height=g;p.setAttributes(this.domElement,{width:e,height:g});return this},render:function(){p.group.render.call(this.scene,this.domElement);return this}})})();(function(){var A=Two.Utils.mod,n=Two.Utils.getRatio,h,g,p,k,e,q,s,z,J,E,w,r,m,f,C,u,x,H,M,d,y,F,a,c,t,j,I,B,N={group:{renderChild:function(a){N[a._renderer.type].render.call(a,this)},render:function(a){this._update();h=this._matrix.elements;a.save();a.transform(h[0],h[3],h[1],h[4],h[2],h[5]);_.each(this.children,N.group.renderChild,a);a.restore();return this.flagReset()}},polygon:{render:function(n){this._update();h=this._matrix.elements;g=this.stroke;p=this.linewidth;k=this.fill;e=this.opacity;
q=this.visible;s=this.cap;z=this.join;J=this.miter;E=this.closed;w=this._vertices;r=w.length;m=r-1;if(!q)return this;n.save();h&&n.transform(h[0],h[3],h[1],h[4],h[2],h[5]);k&&(n.fillStyle=k);g&&(n.strokeStyle=g);p&&(n.lineWidth=p);J&&(n.miterLimit=J);z&&(n.lineJoin=z);s&&(n.lineCap=s);_.isNumber(e)&&(n.globalAlpha=e);n.beginPath();w.forEach(function(e,g){I=e.x.toFixed(3);B=e.y.toFixed(3);switch(e._command){case Two.Commands.close:n.closePath();break;case Two.Commands.curve:C=E?A(g-1,r):Math.max(g-
1,0);f=E?A(g+1,r):Math.min(g+1,m);u=w[C];x=w[f];a=u.controls&&u.controls.right||u;c=e.controls&&e.controls.left||e;u._relative?(y=(a.x+u.x).toFixed(3),F=(a.y+u.y).toFixed(3)):(y=a.x.toFixed(3),F=a.y.toFixed(3));e._relative?(M=(c.x+e.x).toFixed(3),d=(c.y+e.y).toFixed(3)):(M=c.x.toFixed(3),d=c.y.toFixed(3));n.bezierCurveTo(y,F,M,d,I,B);g>=m&&E&&(x=H,t=e.controls&&e.controls.right||e,j=x.controls&&x.controls.left||x,e._relative?(y=(t.x+e.x).toFixed(3),F=(t.y+e.y).toFixed(3)):(y=t.x.toFixed(3),F=t.y.toFixed(3)),
x._relative?(M=(j.x+x.x).toFixed(3),d=(j.y+x.y).toFixed(3)):(M=j.x.toFixed(3),d=j.y.toFixed(3)),I=x.x.toFixed(3),B=x.y.toFixed(3),n.bezierCurveTo(y,F,M,d,I,B));break;case Two.Commands.line:n.lineTo(I,B);break;case Two.Commands.move:H=e,n.moveTo(I,B)}});E&&n.closePath();n.fill();n.stroke();n.restore();return this.flagReset()}}},K=Two[Two.Types.canvas]=function(a){this.domElement=a.domElement||document.createElement("canvas");this.ctx=this.domElement.getContext("2d");this.overdraw=a.overdraw||!1;this.scene=
new Two.Group;this.scene.parent=this};_.extend(K,{Utils:N});_.extend(K.prototype,Backbone.Events,{setSize:function(a,c,d){this.width=a;this.height=c;this.ratio=_.isUndefined(d)?n(this.ctx):d;this.domElement.width=a*this.ratio;this.domElement.height=c*this.ratio;_.extend(this.domElement.style,{width:a+"px",height:c+"px"});return this},render:function(){var a=1===this.ratio;a||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio));this.overdraw||this.ctx.clearRect(0,0,this.width,this.height);N.group.render.call(this.scene,
this.ctx);a||this.ctx.restore();return this}})})();(function(){var A=Two.Matrix.Multiply,n=Two.Utils.mod,h=[1,0,0,0,1,0,0,0,1],g=new Two.Array(9),p=Two.Utils.getRatio,k,e,q,s,z,J,E,w,r,m,f,C,u,x,H,M,d,y,F,a,c,t,j,I,B,N,K,O,P,G,b,v,R,Q,D={canvas:document.createElement("canvas"),uv:new Two.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{renderChild:function(a){D[a._renderer.type].render.call(a,this.gl,this.program)},render:function(a,b){this._update();k=this.parent;e=k._matrix&&k._matrix.manual||k._flagMatrix;q=this._matrix.manual||this._flagMatrix;if(e||q)this._renderer.matrix||
(this._renderer.matrix=new Two.Array(9)),this._matrix.toArray(!0,g),A(g,k._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*k._renderer.scale,e&&(this._flagMatrix=!0);_.each(this.children,D.group.renderChild,{gl:a,program:b});return this.flagReset()}},polygon:{render:function(a,b){if(!this._visible||!this._opacity)return this;k=this.parent;e=k._matrix.manual||k._flagMatrix;q=this._matrix.manual||this._flagMatrix;s=this._flagVertices||this._flagFill||this._flagStroke||this._flagLinewidth||
this._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale;this._update();if(e||q)this._renderer.matrix||(this._renderer.matrix=new Two.Array(9)),this._matrix.toArray(!0,g),A(g,k._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*k._renderer.scale;s&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new Two.Array(12)),D.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect),
D.getTriangles(this._renderer.rect,this._renderer.triangles),D.updateBuffer(a,this,b),D.updateTexture(a,this));a.bindBuffer(a.ARRAY_BUFFER,this._renderer.textureCoordsBuffer);a.vertexAttribPointer(b.textureCoords,2,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,this._renderer.texture);a.uniformMatrix3fv(b.matrix,!1,this._renderer.matrix);a.bindBuffer(a.ARRAY_BUFFER,this._renderer.buffer);a.vertexAttribPointer(b.position,2,a.FLOAT,!1,0,0);a.drawArrays(a.TRIANGLES,0,6);return this.flagReset()}},getBoundingClientRect:function(a,
b,c){var d=Infinity,e=-Infinity,f=Infinity,g=-Infinity;a.forEach(function(a){var b=a.x,c=a.y,l=a.controls,h,j;f=Math.min(c,f);d=Math.min(b,d);e=Math.max(b,e);g=Math.max(c,g);a.controls&&(h=l.left,j=l.right,h&&j&&(l=a._relative?h.x+b:h.x,h=a._relative?h.y+c:h.y,b=a._relative?j.x+b:j.x,a=a._relative?j.y+c:j.y,l&&(h&&b&&a)&&(f=Math.min(h,a,f),d=Math.min(l,b,d),e=Math.max(l,b,e),g=Math.max(h,a,g))))});_.isNumber(b)&&(f-=b,d-=b,e+=b,g+=b);c.top=f;c.left=d;c.right=e;c.bottom=g;c.width=e-d;c.height=g-f;
c.centroid||(c.centroid={});c.centroid.x=-d;c.centroid.y=-f},getTriangles:function(a,b){var c=a.top,d=a.left,f=a.right,e=a.bottom;b[0]=d;b[1]=c;b[2]=f;b[3]=c;b[4]=d;b[5]=e;b[6]=d;b[7]=e;b[8]=f;b[9]=c;b[10]=f;b[11]=e},updateCanvas:function(b){w=b._vertices;r=this.canvas;m=this.ctx;f=b._renderer.scale;C=b._stroke;u=b._linewidth*f;x=b._fill;H=b._opacity;M=b._cap;d=b._join;y=b._miter;F=b._closed;a=w.length;c=a-1;r.width=Math.max(Math.ceil(b._renderer.rect.width*f),1);r.height=Math.max(Math.ceil(b._renderer.rect.height*
f),1);t=b._renderer.rect.centroid;j=t.x*f;I=t.y*f;m.clearRect(0,0,r.width,r.height);x&&(m.fillStyle=x);C&&(m.strokeStyle=C);u&&(m.lineWidth=u);y&&(m.miterLimit=y);d&&(m.lineJoin=d);M&&(m.lineCap=M);_.isNumber(H)&&(m.globalAlpha=H);m.beginPath();w.forEach(function(b,d){var e,g,l,h,k;z=(b.x*f+j).toFixed(3);J=(b.y*f+I).toFixed(3);switch(b._command){case Two.Commands.close:m.closePath();break;case Two.Commands.curve:e=F?n(d-1,a):Math.max(d-1,0);F?n(d+1,a):Math.min(d+1,c);g=w[e];k=g.controls&&g.controls.right||
g;l=b.controls&&b.controls.left||b;g._relative?(e=((k.x+g.x)*f+j).toFixed(3),k=((k.y+g.y)*f+I).toFixed(3)):(e=(k.x*f+j).toFixed(3),k=(k.y*f+I).toFixed(3));b._relative?(g=((l.x+b.x)*f+j).toFixed(3),h=((l.y+b.y)*f+I).toFixed(3)):(g=(l.x*f+j).toFixed(3),h=(l.y*f+I).toFixed(3));m.bezierCurveTo(e,k,g,h,z,J);d>=c&&F&&(l=E,g=b.controls&&b.controls.right||b,h=l.controls&&l.controls.left||l,b._relative?(e=((g.x+b.x)*f+j).toFixed(3),k=((g.y+b.y)*f+I).toFixed(3)):(e=(g.x*f+j).toFixed(3),k=(g.y*f+I).toFixed(3)),
l._relative?(g=((h.x+l.x)*f+j).toFixed(3),h=((h.y+l.y)*f+j).toFixed(3)):(g=(h.x*f+j).toFixed(3),h=(h.y*f+I).toFixed(3)),z=(l.x*f+j).toFixed(3),J=(l.y*f+I).toFixed(3),m.bezierCurveTo(e,k,g,h,z,J));break;case Two.Commands.line:m.lineTo(z,J);break;case Two.Commands.move:E=b,m.moveTo(z,J)}});F&&m.closePath();m.fill();m.stroke()},updateTexture:function(a,b){this.updateCanvas(b);b._renderer.texture&&a.deleteTexture(b._renderer.texture);a.bindBuffer(a.ARRAY_BUFFER,b._renderer.textureCoordsBuffer);b._renderer.texture=
a.createTexture();a.bindTexture(a.TEXTURE_2D,b._renderer.texture);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);0>=this.canvas.width||0>=this.canvas.height||a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(a,b,c){_.isObject(b._renderer.buffer)&&a.deleteBuffer(b._renderer.buffer);b._renderer.buffer=a.createBuffer();
a.bindBuffer(a.ARRAY_BUFFER,b._renderer.buffer);a.enableVertexAttribArray(c.position);a.bufferData(a.ARRAY_BUFFER,b._renderer.triangles,a.STATIC_DRAW);_.isObject(b._renderer.textureCoordsBuffer)&&a.deleteBuffer(b._renderer.textureCoordsBuffer);b._renderer.textureCoordsBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b._renderer.textureCoordsBuffer);a.enableVertexAttribArray(c.textureCoords);a.bufferData(a.ARRAY_BUFFER,this.uv,a.STATIC_DRAW)},program:{create:function(a,b){B=a.createProgram();_.each(b,
function(b){a.attachShader(B,b)});a.linkProgram(B);N=a.getProgramParameter(B,a.LINK_STATUS);if(!N)throw P=a.getProgramInfoLog(B),a.deleteProgram(B),new Two.Utils.Error("unable to link program: "+P);return B}},shaders:{create:function(a,b,c){K=a.createShader(a[c]);a.shaderSource(K,b);a.compileShader(K);O=a.getShaderParameter(K,a.COMPILE_STATUS);if(!O)throw P=a.getShaderInfoLog(K),a.deleteShader(K),new Two.Utils.Error("unable to compile shader "+K+": "+P);return K},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},
vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"}};
D.ctx=D.canvas.getContext("2d");var L=Two[Two.Types.webgl]=function(a){this.domElement=a.domElement||document.createElement("canvas");this.scene=new Two.Group;this.scene.parent=this;this._renderer={matrix:new Two.Array(h),scale:1};this._flagMatrix=!0;Q=_.defaults(a||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1});this.overdraw=Q.overdraw;G=this.ctx=this.domElement.getContext("webgl",Q)||this.domElement.getContext("experimental-webgl",Q);if(!this.ctx)throw new Two.Utils.Error("unable to create a webgl context. Try using another renderer.");
R=D.shaders.create(G,D.shaders.vertex,D.shaders.types.vertex);v=D.shaders.create(G,D.shaders.fragment,D.shaders.types.fragment);this.program=D.program.create(G,[R,v]);G.useProgram(this.program);this.program.position=G.getAttribLocation(this.program,"a_position");this.program.matrix=G.getUniformLocation(this.program,"u_matrix");this.program.textureCoords=G.getAttribLocation(this.program,"a_textureCoords");G.disable(G.DEPTH_TEST);G.enable(G.BLEND);G.blendEquationSeparate(G.FUNC_ADD,G.FUNC_ADD);G.blendFuncSeparate(G.SRC_ALPHA,
G.ONE_MINUS_SRC_ALPHA,G.ONE,G.ONE_MINUS_SRC_ALPHA)};_.extend(L.prototype,Backbone.Events,{setSize:function(a,c,d){this.width=a;this.height=c;this.ratio=_.isUndefined(d)?p(this.ctx):d;this.domElement.width=a*this.ratio;this.domElement.height=c*this.ratio;_.extend(this.domElement.style,{width:a+"px",height:c+"px"});a*=this.ratio;c*=this.ratio;this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio;this._flagMatrix=!0;this.ctx.viewport(0,0,a,c);b=this.ctx.getUniformLocation(this.program,
"u_resolution");this.ctx.uniform2f(b,a,c);return this},render:function(){var a=this.ctx;this.overdraw||a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);D.group.render.call(this.scene,a,this.program);this._flagMatrix=!1;return this}})})();(function(){var A,n=Two.Shape=function(){this._renderer={};this.id=Two.Identifier+Two.uniqueId();this.classList=[];this._matrix=new Two.Matrix;this.translation=new Two.Vector;this.translation.bind(Two.Events.change,_.bind(n.FlagMatrix,this));this.rotation=0;this.scale=1};_.extend(n,Backbone.Events,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(h){Object.defineProperty(h,"rotation",{get:function(){return this._rotation},set:function(g){this._rotation=g;this._flagMatrix=!0}});Object.defineProperty(h,
"scale",{get:function(){return this._scale},set:function(g){this._scale=g;this._flagScale=this._flagMatrix=!0}})}});_.extend(n.prototype,{_flagMatrix:!0,_rotation:0,_scale:1,addTo:function(h){h.add(this);return this},clone:function(){A=new n;A.translation.copy(this.translation);A.rotation=this.rotation;A.scale=this.scale;_.each(n.Properties,function(h){A[h]=this[h]},this);return A._update()},_update:function(){!this._matrix.manual&&this._flagMatrix&&this._matrix.identity().translate(this.translation.x,
this.translation.y).scale(this.scale).rotate(this.rotation);this.parent&&this.parent._update&&this.parent._update();return this},flagReset:function(){this._flagScale=this._flagMatrix=!1;return this}});n.MakeObservable(n.prototype)})();(function(){function A(a,b,c){x=b.controls&&b.controls.right;u=a.controls&&a.controls.left;j=b.x;I=b.y;B=(x||b).x;N=(x||b).y;K=(u||a).x;O=(u||a).y;P=a.x;G=a.y;x&&b._relative&&(B+=b.x,N+=b.y);u&&a._relative&&(K+=a.x,O+=a.y);return Two.Utils.getCurveLength(j,I,B,N,K,O,P,G,c)}function n(a,b,c){x=b.controls&&b.controls.right;u=a.controls&&a.controls.left;j=b.x;I=b.y;B=(x||b).x;N=(x||b).y;K=(u||a).x;O=(u||a).y;P=a.x;G=a.y;x&&b._relative&&(B+=b.x,N+=b.y);u&&a._relative&&(K+=a.x,O+=a.y);return Two.Utils.subdivide(j,
I,B,N,K,O,P,G,c)}var h=Math.min,g=Math.max,p=Math.round,k=Two.Utils.getComputedMatrix,e,q,s,z,J,E,w,r,m,f,C,u,x,H,M,d,y,F,a,c,t,j,I,B,N,K,O,P,G,b,v,R;_.each(Two.Commands,function(){});var Q=Two.Polygon=function(a,b,c,d){Two.Shape.call(this);this._renderer.type="polygon";this._closed=!!b;this._curved=!!c;this.beginning=0;this.ending=1;this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.cap="butt";this.join="miter";this.miter=4;this._vertices=[];this.vertices=a;this.automatic=
!d};_.extend(Q,{Properties:"fill stroke linewidth opacity visible cap join miter closed curved automatic beginning ending".split(" "),FlagVertices:function(){this._flagLength=this._flagVertices=!0},MakeObservable:function(a){Two.Shape.MakeObservable(a);_.each(Q.Properties.slice(0,8),function(b){var c="_"+b,d="_flag"+b.charAt(0).toUpperCase()+b.slice(1);Object.defineProperty(a,b,{get:function(){return this[c]},set:function(a){this[c]=a;this[d]=!0}})});Object.defineProperty(a,"length",{get:function(){this._flagLength&&
this._updateLength();return this._length},set:function(){}});Object.defineProperty(a,"closed",{get:function(){return this._closed},set:function(a){this._closed=!!a;this._flagVertices=!0}});Object.defineProperty(a,"curved",{get:function(){return this._curved},set:function(a){this._curved=!!a;this._flagVertices=!0}});Object.defineProperty(Q.prototype,"automatic",{get:function(){return this._automatic},set:function(a){a!==this._automatic&&(method=(this._automatic=!!a)?"ignore":"listen",_.each(this.vertices,
function(a){a[method]()}))}});Object.defineProperty(a,"beginning",{get:function(){return this._beginning},set:function(a){this._beginning=h(g(a,0),this._ending);this._flagVertices=!0}});Object.defineProperty(a,"ending",{get:function(){return this._ending},set:function(a){this._ending=h(g(a,this._beginning),1);this._flagVertices=!0}});Object.defineProperty(a,"vertices",{get:function(){return this._collection},set:function(a){var b=_.bind(Q.FlagVertices,this),c=_.bind(function(a){_.each(a,function(a){a.bind(Two.Events.change,
b)},this);b()},this),d=_.bind(function(a){_.each(a,function(a){a.unbind(Two.Events.change,b)},this);b()},this);this._collection&&this._collection.unbind();this._collection=new Two.Utils.Collection(a.slice(0));this._collection.bind(Two.Events.insert,c);this._collection.bind(Two.Events.remove,d);verticesChanged=!0;c(this._collection)}})}});_.extend(Q.prototype,Two.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,
_flagJoin:!0,_flagMiter:!0,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,clone:function(a){a=a||this.parent;r=_.map(this.vertices,function(a){return a.clone()});m=new Q(r,this.closed,this.curved,!this.automatic);_.each(Two.Shape.Properties,function(a){m[a]=this[a]},this);m.translation.copy(this.translation);m.rotation=this.rotation;m.scale=this.scale;a.add(m);return m},toObject:function(){var a=
{vertices:_.map(this.vertices,function(a){return a.toObject()})};_.each(Two.Shape.Properties,function(b){a[b]=this[b]},this);a.translation=this.translation.toObject;a.rotation=this.rotation;a.scale=this.scale;return a},noFill:function(){this.fill="transparent";return this},noStroke:function(){this.stroke="transparent";return this},corner:function(){f=this.getBoundingClientRect(!0);f.centroid={x:f.left+f.width/2,y:f.top+f.height/2};_.each(this.vertices,function(a){a.addSelf(f.centroid)});return this},
center:function(){f=this.getBoundingClientRect(!0);f.centroid={x:f.left+f.width/2,y:f.top+f.height/2};_.each(this.vertices,function(a){a.subSelf(f.centroid)});return this},remove:function(){if(!this.parent)return this;this.parent.remove(this);return this},getBoundingClientRect:function(a){this._update();t=a?this._matrix:k(this);C=this.linewidth/2;void 0;u=Infinity;x=-Infinity;H=Infinity;M=-Infinity;_.each(this._vertices,function(a){d=a.x;y=a.y;a=t.multiply(d,y,1);H=h(a.y-C,H);u=h(a.x-C,u);x=g(a.x+
C,x);M=g(a.y+C,M)});return{top:H,left:u,right:x,bottom:M,width:x-u,height:M-H}},getPointAt:function(c,f){v=this.length*Math.min(Math.max(c,0),1);R=this.vertices.length;z=R-1;a=F=null;w=0;e=this._lengths.length;for(b=0;w<e;w++){if(b+this._lengths[w]>v){F=this.vertices[this.closed?Two.Utils.mod(w,R):w];a=this.vertices[Math.min(Math.max(w-1,0),z)];v-=b;c=v/this._lengths[w];break}b+=this._lengths[w]}if(_.isNull(F)||_.isNull(a))return null;x=a.controls&&a.controls.right;u=F.controls&&F.controls.left;j=
a.x;I=a.y;B=(x||a).x;N=(x||a).y;K=(u||F).x;O=(u||F).y;P=F.x;G=F.y;x&&a._relative&&(B+=a.x,N+=a.y);u&&F._relative&&(K+=F.x,O+=F.y);d=Two.Utils.getPointOnCubicBezier(c,j,B,K,P);y=Two.Utils.getPointOnCubicBezier(c,I,N,O,G);return _.isObject(f)?(f.x=d,f.y=y,f):new Two.Vector(d,y)},plot:function(){if(this.curved)return Two.Utils.getCurveFromPoints(this._vertices,this.closed),this;_.each(this._vertices,function(a,b){a._command=0===b?Two.Commands.move:Two.Commands.line},this);return this},subdivide:function(b){this._update();
z=this.vertices.length-1;a=this.vertices[z];J=this._closed||this.vertices[z]._command===Two.Commands.close;r=[];_.each(this.vertices,function(d,e){if(0>=e&&!J)a=d;else if(d.command===Two.Commands.move)r.push(new Two.Anchor(a.x,a.y)),0<e&&(r[r.length-1].command=Two.Commands.line),a=c=d;else{var f=n(d,a,b);r=r.concat(f);_.each(f,function(b,c){b.command=0>=c&&a.command===Two.Commands.move?Two.Commands.move:Two.Commands.line});e>=z&&(this._closed&&this._automatic?(a=d,d=c,f=n(d,a,b),r=r.concat(f),_.each(f,
function(b,c){b.command=0>=c&&a.command===Two.Commands.move?Two.Commands.move:Two.Commands.line})):J&&r.push(new Two.Anchor(d.x,d.y)),r[r.length-1].command=J?Two.Commands.close:Two.Commands.line);a=d}},this);this._curved=this._automatic=!1;this.vertices=r;return this},_updateLength:function(d){this._update();z=this.vertices.length-1;a=this.vertices[z];J=this._closed||this.vertices[z]._command===Two.Commands.close;b=0;_.isUndefined(this._lengths)&&(this._lengths=[]);_.each(this.vertices,function(e,
f){0>=f&&!J||e.command===Two.Commands.move?(a=c=e,this._lengths[f]=0):(this._lengths[f]=A(e,a,d),b+=this._lengths[f],f>=z&&J&&(a=e,e=c,this._lengths[f+1]=A(e,a,d),b+=this._lengths[f+1]),a=e)},this);this._length=b;return this},_update:function(){if(this._flagVertices){e=this.vertices.length;z=e-1;q=p(this._beginning*z);s=p(this._ending*z);this._vertices.length=0;for(w=q;w<s+1;w++)E=this.vertices[w],this._vertices.push(E);this._automatic&&this.plot()}Two.Shape.prototype._update.call(this);return this},
flagReset:function(){this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=!1;Two.Shape.prototype.flagReset.call(this);return this}});Q.MakeObservable(Q.prototype)})();(function(){var A=Math.min,n=Math.max,h,g,p,k,e,q,s,z,J,E,w,r=Two.Group=function(){Two.Shape.call(this,!0);this._renderer.type="group";this.additions=[];this.subtractions=[];this.children={}};_.extend(r,{MakeObservable:function(e){Two.Shape.MakeObservable(e);r.MakeGetterSetters(e,Two.Polygon.Properties)},MakeGetterSetters:function(e,f){_.isArray(f)||(f=[f]);_.each(f,function(f){r.MakeGetterSetter(e,f)})},MakeGetterSetter:function(e,f){var g="_"+f;Object.defineProperty(e,f,{get:function(){return this[g]},
set:function(e){this[g]=e;_.each(this.children,function(g){g[f]=e})}})}});_.extend(r.prototype,Two.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,clone:function(e){e=e||this.parent;p=new r;e.add(p);g=_.map(this.children,function(e){return e.clone(p)});p.translation.copy(this.translation);p.rotation=this.rotation;p.scale=this.scale;
return p},toObject:function(){var e={children:{},translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};_.each(this.children,function(f,g){e.children[g]=f.toObject()},this);return e},corner:function(){k=this.getBoundingClientRect(!0);e={x:k.left,y:k.top};_.each(this.children,function(g){g.translation.subSelf(e)});return this},center:function(){k=this.getBoundingClientRect(!0);k.centroid={x:k.left+k.width/2,y:k.top+k.height/2};_.each(this.children,function(e){e.translation.subSelf(k.centroid)});
return this},getById:function(e){var f,g=function(e,h){if(e.id==h)return f=e;for(var k in e.children){if(f)return f;g(e.children[k],h)}};return g(this,e)||null},getByClassName:function(e){var f=[],g=function(e,h){-1!=e.classList.indexOf(h)&&f.push(e);for(var k in e.children)g(e.children[k],h);return f};return g(this,e)},getByType:function(e){var f=[],g=function(e,h){for(var k in e.children)e.children[k]instanceof h?f.push(e.children[k]):e.children[k]instanceof Two.Group&&g(e.children[k],h);return f};
return g(this,e)},add:function(e){q=arguments.length;s=e;g=this.children;z=this.parent;J=this.additions;_.isArray(e)||(s=_.toArray(arguments));_.each(s,function(e){e&&(E=e.id,h=e.parent,_.isUndefined(g[E])&&(h&&(delete h.children[E],w=_.indexOf(h.additions,E),0<=w&&h.additions.splice(w,1)),g[E]=e,e.parent=this,J.push(E),this._flagAdditions=!0))},this);return this},remove:function(e){q=arguments.length;s=e;g=this.children;z=this.parent;J=this.subtractions;if(0>=q&&z)return z.remove(this),this;_.isArray(e)||
(s=_.toArray(arguments));_.each(s,function(e){E=e.id;grandchildren=e.children;h=e.parent;E in g&&(delete g[E],delete e.parent,w=_.indexOf(h.additions,E),0<=w&&h.additions.splice(w,1),J.push(E),this._flagSubtractions=!0)},this);return this},getBoundingClientRect:function(){this._update();var e=Infinity,f=-Infinity,g=Infinity,h=-Infinity;_.each(this.children,function(p){k=p.getBoundingClientRect();_.isNumber(k.top)&&(_.isNumber(k.left)&&_.isNumber(k.right)&&_.isNumber(k.bottom))&&(g=A(k.top,g),e=A(k.left,
e),f=n(k.right,f),h=n(k.bottom,h))},this);return{top:g,left:e,right:f,bottom:h,width:f-e,height:h-g}},noFill:function(){_.each(this.children,function(e){e.noFill()});return this},noStroke:function(){_.each(this.children,function(e){e.noStroke()});return this},subdivide:function(){var e=arguments;_.each(this.children,function(f){f.subdivide.apply(f,e)});return this},flagReset:function(){this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1);this._flagSubtractions&&(this.subtractions.length=
0,this._flagSubtractions=!1);Two.Shape.prototype.flagReset.call(this);return this}});r.MakeObservable(r.prototype)})();
