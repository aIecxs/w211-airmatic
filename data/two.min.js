(function(){function p(g,a,b){if(g===a)return 0!==g||1/g==1/a;if(null==g||null==a)return g===a;g._chain&&(g=g._wrapped);a._chain&&(a=a._wrapped);if(g.isEqual&&d.isFunction(g.isEqual))return g.isEqual(a);if(a.isEqual&&d.isFunction(a.isEqual))return a.isEqual(g);var f=q.call(g);if(f!=q.call(a))return!1;switch(f){case "[object String]":return g==String(a);case "[object Number]":return g!=+g?a!=+a:0==g?1/g==1/a:g==+a;case "[object Date]":case "[object Boolean]":return+g==+a;case "[object RegExp]":return g.source==
a.source&&g.global==a.global&&g.multiline==a.multiline&&g.ignoreCase==a.ignoreCase}if("object"!=typeof g||"object"!=typeof a)return!1;for(var c=b.length;c--;)if(b[c]==g)return!0;b.push(g);var c=0,r=!0;if("[object Array]"==f){if(c=g.length,r=c==a.length)for(;c--&&(r=c in g==c in a&&p(g[c],a[c],b)););}else{if("constructor"in g!="constructor"in a||g.constructor!=a.constructor)return!1;for(var h in g)if(d.has(g,h)&&(c++,!(r=d.has(a,h)&&p(g[h],a[h],b))))break;if(r){for(h in a)if(d.has(a,h)&&!c--)break;
r=!c}}b.pop();return r}var e=this,j=e._,m={},k=Array.prototype,c=Object.prototype,b=k.slice,h=k.unshift,q=c.toString,a=c.hasOwnProperty,l=k.forEach,n=k.map,x=k.reduce,f=k.reduceRight,y=k.filter,C=k.every,u=k.some,s=k.indexOf,v=k.lastIndexOf,c=Array.isArray,r=Object.keys,t=Function.prototype.bind,d=function(g){return new G(g)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports._=d):e._=d;d.VERSION="1.3.3";var w=d.each=d.forEach=function(g,
a,b){if(null!=g)if(l&&g.forEach===l)g.forEach(a,b);else if(g.length===+g.length)for(var f=0,c=g.length;f<c&&!(f in g&&a.call(b,g[f],f,g)===m);f++);else for(f in g)if(d.has(g,f)&&a.call(b,g[f],f,g)===m)break};d.map=d.collect=function(g,d,a){var b=[];if(null==g)return b;if(n&&g.map===n)return g.map(d,a);w(g,function(g,f,c){b[b.length]=d.call(a,g,f,c)});g.length===+g.length&&(b.length=g.length);return b};d.reduce=d.foldl=d.inject=function(g,a,b,f){var c=2<arguments.length;null==g&&(g=[]);if(x&&g.reduce===
x)return f&&(a=d.bind(a,f)),c?g.reduce(a,b):g.reduce(a);w(g,function(g,d,r){c?b=a.call(f,b,g,d,r):(b=g,c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");return b};d.reduceRight=d.foldr=function(g,a,b,c){var r=2<arguments.length;null==g&&(g=[]);if(f&&g.reduceRight===f)return c&&(a=d.bind(a,c)),r?g.reduceRight(a,b):g.reduceRight(a);var h=d.toArray(g).reverse();c&&!r&&(a=d.bind(a,c));return r?d.reduce(h,a,b,c):d.reduce(h,a)};d.find=d.detect=function(g,a,d){var b;z(g,function(g,
f,c){if(a.call(d,g,f,c))return b=g,!0});return b};d.filter=d.select=function(g,a,d){var b=[];if(null==g)return b;if(y&&g.filter===y)return g.filter(a,d);w(g,function(g,f,c){a.call(d,g,f,c)&&(b[b.length]=g)});return b};d.reject=function(g,a,d){var b=[];if(null==g)return b;w(g,function(g,f,c){a.call(d,g,f,c)||(b[b.length]=g)});return b};d.every=d.all=function(g,a,d){var b=!0;if(null==g)return b;if(C&&g.every===C)return g.every(a,d);w(g,function(g,f,c){if(!(b=b&&a.call(d,g,f,c)))return m});return!!b};
var z=d.some=d.any=function(g,a,b){a||(a=d.identity);var f=!1;if(null==g)return f;if(u&&g.some===u)return g.some(a,b);w(g,function(g,d,c){if(f||(f=a.call(b,g,d,c)))return m});return!!f};d.include=d.contains=function(g,a){var d=!1;return null==g?d:s&&g.indexOf===s?-1!=g.indexOf(a):d=z(g,function(g){return g===a})};d.invoke=function(g,a){var f=b.call(arguments,2);return d.map(g,function(g){return(d.isFunction(a)?a||g:g[a]).apply(g,f)})};d.pluck=function(g,a){return d.map(g,function(g){return g[a]})};
d.max=function(g,a,b){if(!a&&d.isArray(g)&&g[0]===+g[0])return Math.max.apply(Math,g);if(!a&&d.isEmpty(g))return-Infinity;var f={computed:-Infinity};w(g,function(g,d,c){d=a?a.call(b,g,d,c):g;d>=f.computed&&(f={value:g,computed:d})});return f.value};d.min=function(g,a,b){if(!a&&d.isArray(g)&&g[0]===+g[0])return Math.min.apply(Math,g);if(!a&&d.isEmpty(g))return Infinity;var f={computed:Infinity};w(g,function(g,d,c){d=a?a.call(b,g,d,c):g;d<f.computed&&(f={value:g,computed:d})});return f.value};d.shuffle=
function(g){var a=[],d;w(g,function(g,b){d=Math.floor(Math.random()*(b+1));a[b]=a[d];a[d]=g});return a};d.sortBy=function(g,a,b){var f=d.isFunction(a)?a:function(g){return g[a]};return d.pluck(d.map(g,function(g,a,d){return{value:g,criteria:f.call(b,g,a,d)}}).sort(function(g,a){var d=g.criteria,b=a.criteria;return void 0===d?1:void 0===b?-1:d<b?-1:d>b?1:0}),"value")};d.groupBy=function(g,a){var b={},f=d.isFunction(a)?a:function(g){return g[a]};w(g,function(g,a){var d=f(g,a);(b[d]||(b[d]=[])).push(g)});
return b};d.sortedIndex=function(g,a,b){b||(b=d.identity);for(var f=0,c=g.length;f<c;){var r=f+c>>1;b(g[r])<b(a)?f=r+1:c=r}return f};d.toArray=function(g){return!g?[]:d.isArray(g)||d.isArguments(g)?b.call(g):g.toArray&&d.isFunction(g.toArray)?g.toArray():d.values(g)};d.size=function(g){return d.isArray(g)?g.length:d.keys(g).length};d.first=d.head=d.take=function(g,a,d){return null!=a&&!d?b.call(g,0,a):g[0]};d.initial=function(g,a,d){return b.call(g,0,g.length-(null==a||d?1:a))};d.last=function(a,
d,f){return null!=d&&!f?b.call(a,Math.max(a.length-d,0)):a[a.length-1]};d.rest=d.tail=function(a,d,f){return b.call(a,null==d||f?1:d)};d.compact=function(a){return d.filter(a,function(a){return!!a})};d.flatten=function(a,b){return d.reduce(a,function(a,g){if(d.isArray(g))return a.concat(b?g:d.flatten(g));a[a.length]=g;return a},[])};d.without=function(a){return d.difference(a,b.call(arguments,1))};d.uniq=d.unique=function(a,b,f){f=f?d.map(a,f):a;var c=[];3>a.length&&(b=!0);d.reduce(f,function(f,r,
h){if(b?d.last(f)!==r||!f.length:!d.include(f,r))f.push(r),c.push(a[h]);return f},[]);return c};d.union=function(){return d.uniq(d.flatten(arguments,!0))};d.intersection=d.intersect=function(a){var f=b.call(arguments,1);return d.filter(d.uniq(a),function(a){return d.every(f,function(g){return 0<=d.indexOf(g,a)})})};d.difference=function(a){var f=d.flatten(b.call(arguments,1),!0);return d.filter(a,function(a){return!d.include(f,a)})};d.zip=function(){for(var a=b.call(arguments),f=d.max(d.pluck(a,"length")),
c=Array(f),r=0;r<f;r++)c[r]=d.pluck(a,""+r);return c};d.indexOf=function(a,b,f){if(null==a)return-1;var c;if(f)return f=d.sortedIndex(a,b),a[f]===b?f:-1;if(s&&a.indexOf===s)return a.indexOf(b);f=0;for(c=a.length;f<c;f++)if(f in a&&a[f]===b)return f;return-1};d.lastIndexOf=function(a,d){if(null==a)return-1;if(v&&a.lastIndexOf===v)return a.lastIndexOf(d);for(var b=a.length;b--;)if(b in a&&a[b]===d)return b;return-1};d.range=function(a,d,b){1>=arguments.length&&(d=a||0,a=0);b=arguments[2]||1;for(var f=
Math.max(Math.ceil((d-a)/b),0),c=0,r=Array(f);c<f;)r[c++]=a,a+=b;return r};var K=function(){};d.bind=function(a,f){var c,r;if(a.bind===t&&t)return t.apply(a,b.call(arguments,1));if(!d.isFunction(a))throw new TypeError;r=b.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(f,r.concat(b.call(arguments)));K.prototype=a.prototype;var d=new K,h=a.apply(d,r.concat(b.call(arguments)));return Object(h)===h?h:d}};d.bindAll=function(a){var f=b.call(arguments,1);0==f.length&&(f=d.functions(a));
w(f,function(b){a[b]=d.bind(a[b],a)});return a};d.memoize=function(a,b){var f={};b||(b=d.identity);return function(){var c=b.apply(this,arguments);return d.has(f,c)?f[c]:f[c]=a.apply(this,arguments)}};d.delay=function(a,d){var f=b.call(arguments,2);return setTimeout(function(){return a.apply(null,f)},d)};d.defer=function(a){return d.delay.apply(d,[a,1].concat(b.call(arguments,1)))};d.throttle=function(a,b){var f,c,r,h,k,l,t=d.debounce(function(){k=h=!1},b);return function(){f=this;c=arguments;r||
(r=setTimeout(function(){r=null;k&&a.apply(f,c);t()},b));h?k=!0:l=a.apply(f,c);t();h=!0;return l}};d.debounce=function(a,d,b){var f;return function(){var c=this,r=arguments;b&&!f&&a.apply(c,r);clearTimeout(f);f=setTimeout(function(){f=null;b||a.apply(c,r)},d)}};d.once=function(a){var d=!1,b;return function(){if(d)return b;d=!0;return b=a.apply(this,arguments)}};d.wrap=function(a,d){return function(){var f=[a].concat(b.call(arguments,0));return d.apply(this,f)}};d.compose=function(){var a=arguments;
return function(){for(var d=arguments,b=a.length-1;0<=b;b--)d=[a[b].apply(this,d)];return d[0]}};d.after=function(a,d){return 0>=a?d():function(){if(1>--a)return d.apply(this,arguments)}};d.keys=r||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],f;for(f in a)d.has(a,f)&&(b[b.length]=f);return b};d.values=function(a){return d.map(a,d.identity)};d.functions=d.methods=function(a){var b=[],f;for(f in a)d.isFunction(a[f])&&b.push(f);return b.sort()};d.extend=function(a){w(b.call(arguments,
1),function(d){for(var b in d)a[b]=d[b]});return a};d.pick=function(a){var f={};w(d.flatten(b.call(arguments,1)),function(d){d in a&&(f[d]=a[d])});return f};d.defaults=function(a){w(b.call(arguments,1),function(d){for(var b in d)null==a[b]&&(a[b]=d[b])});return a};d.clone=function(a){return!d.isObject(a)?a:d.isArray(a)?a.slice():d.extend({},a)};d.tap=function(a,d){d(a);return a};d.isEqual=function(a,d){return p(a,d,[])};d.isEmpty=function(a){if(null==a)return!0;if(d.isArray(a)||d.isString(a))return 0===
a.length;for(var b in a)if(d.has(a,b))return!1;return!0};d.isElement=function(a){return!!(a&&1==a.nodeType)};d.isArray=c||function(a){return"[object Array]"==q.call(a)};d.isObject=function(a){return a===Object(a)};d.isArguments=function(a){return"[object Arguments]"==q.call(a)};d.isArguments(arguments)||(d.isArguments=function(a){return!(!a||!d.has(a,"callee"))});d.isFunction=function(a){return"[object Function]"==q.call(a)};d.isString=function(a){return"[object String]"==q.call(a)};d.isNumber=function(a){return"[object Number]"==
q.call(a)};d.isFinite=function(a){return d.isNumber(a)&&isFinite(a)};d.isNaN=function(a){return a!==a};d.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==q.call(a)};d.isDate=function(a){return"[object Date]"==q.call(a)};d.isRegExp=function(a){return"[object RegExp]"==q.call(a)};d.isNull=function(a){return null===a};d.isUndefined=function(a){return void 0===a};d.has=function(d,b){return a.call(d,b)};d.noConflict=function(){e._=j;return this};d.identity=function(a){return a};d.times=
function(a,d,b){for(var f=0;f<a;f++)d.call(b,f)};d.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};d.result=function(a,b){if(null==a)return null;var f=a[b];return d.isFunction(f)?f.call(a):f};d.mixin=function(a){w(d.functions(a),function(f){var c=d[f]=a[f];G.prototype[f]=function(){var a=b.call(arguments);h.call(a,this._wrapped);return M(c.apply(d,a),this._chain)}})};var F=0;d.uniqueId=
function(a){var d=F++;return a?a+d:d};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/.^/,L={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},N;for(N in L)L[L[N]]=N;var T=/\\|'|\r|\n|\t|\u2028|\u2029/g,U=/\\(\\|'|r|n|t|u2028|u2029)/g,O=function(a){return a.replace(U,function(a,d){return L[d]})};d.template=function(a,b,f){f=d.defaults(f||{},d.templateSettings);a="__p+='"+a.replace(T,function(a){return"\\"+L[a]}).replace(f.escape||
B,function(a,d){return"'+\n_.escape("+O(d)+")+\n'"}).replace(f.interpolate||B,function(a,d){return"'+\n("+O(d)+")+\n'"}).replace(f.evaluate||B,function(a,d){return"';\n"+O(d)+"\n;__p+='"})+"';\n";f.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var c=new Function(f.variable||"obj","_",a);if(b)return c(b,d);b=function(a){return c.call(this,a,d)};b.source="function("+(f.variable||"obj")+"){\n"+a+"}";return b};
d.chain=function(a){return d(a).chain()};var G=function(a){this._wrapped=a};d.prototype=G.prototype;var M=function(a,b){return b?d(a).chain():a};d.mixin(d);w("pop push reverse shift sort splice unshift".split(" "),function(a){var d=k[a];G.prototype[a]=function(){var b=this._wrapped;d.apply(b,arguments);var f=b.length;("shift"==a||"splice"==a)&&0===f&&delete b[0];return M(b,this._chain)}});w(["concat","join","slice"],function(a){var d=k[a];G.prototype[a]=function(){return M(d.apply(this._wrapped,arguments),
this._chain)}});G.prototype.chain=function(){this._chain=!0;return this};G.prototype.value=function(){return this._wrapped}}).call(this);var Backbone=Backbone||{};
(function(){var p=[].slice,e=function(e,k,c){var b;e=-1;var h=k.length;switch(c.length){case 0:for(;++e<h;)(b=k[e]).callback.call(b.ctx);break;case 1:for(;++e<h;)(b=k[e]).callback.call(b.ctx,c[0]);break;case 2:for(;++e<h;)(b=k[e]).callback.call(b.ctx,c[0],c[1]);break;case 3:for(;++e<h;)(b=k[e]).callback.call(b.ctx,c[0],c[1],c[2]);break;default:for(;++e<h;)(b=k[e]).callback.apply(b.ctx,c)}},j=Backbone.Events={on:function(e,k,c){this._events||(this._events={});(this._events[e]||(this._events[e]=[])).push({callback:k,
context:c,ctx:c||this});return this},once:function(e,k,c){var b=this,h=_.once(function(){b.off(e,h);k.apply(this,arguments)});h._callback=k;this.on(e,h,c);return this},off:function(e,k,c){var b,h,q,a,l,n,x,f;if(!this._events)return this;if(!e&&!k&&!c)return this._events={},this;a=e?[e]:_.keys(this._events);l=0;for(n=a.length;l<n;l++)if(e=a[l],b=this._events[e]){q=[];if(k||c){x=0;for(f=b.length;x<f;x++)h=b[x],(k&&k!==(h.callback._callback||h.callback)||c&&c!==h.context)&&q.push(h)}this._events[e]=
q}return this},trigger:function(j){if(!this._events)return this;var k=p.call(arguments,1),c=this._events[j],b=this._events.all;c&&e(this,c,k);b&&e(this,b,arguments);return this},listenTo:function(e,k,c){var b=this._listeners||(this._listeners={}),h=e._listenerId||(e._listenerId=_.uniqueId("l"));b[h]=e;e.on(k,c||this,this);return this},stopListening:function(e,k,c){var b=this._listeners;if(b){if(e)e.off(k,c,this),!k&&!c&&delete b[e._listenerId];else{for(var h in b)b[h].off(null,null,this);this._listeners=
{}}return this}}};j.bind=j.on;j.unbind=j.off})();(function(){for(var p=0,e=["ms","moz","webkit","o"],j=0;j<e.length&&!window.requestAnimationFrame;++j)window.requestAnimationFrame=window[e[j]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[j]+"CancelAnimationFrame"]||window[e[j]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var k=(new Date).getTime(),c=Math.max(0,16-(k-p)),b=window.setTimeout(function(){e(k+c)},c);p=k+c;return b});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(e){clearTimeout(e)})})();(function(){function p(){var a=document.body.getBoundingClientRect(),b=this.width=a.width,a=this.height=a.height;this.renderer.setSize(b,a);this.trigger(f.Events.resize,b,a)}var e=this,j=e.Two||{},m=Math.sin,k=Math.cos,c=Math.atan2,b=Math.sqrt,h=Math.abs,q=Math.PI,a=2*q,l=q/2,n=Math.pow,x={hasEventListeners:_.isFunction(e.addEventListener),bind:function(a,b,d,f){this.hasEventListeners?a.addEventListener(b,d,!!f):a.attachEvent("on"+b,d);return this},unbind:function(a,b,d,f){this.hasEventListeners?
a.removeEventListeners(b,d,!!f):a.detachEvent("on"+b,d);return this}},f=e.Two=function(a){a=_.defaults(a||{},{fullscreen:!1,width:640,height:480,type:f.Types.svg,autostart:!1});this.type=a.type;this.renderer=new f[this.type](this);f.Utils.setPlaying.call(this,a.autostart);this.frameCount=0;a.fullscreen?(a=_.bind(p,this),_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),_.extend(this.renderer.domElement.style,{display:"block",top:0,
left:0,right:0,bottom:0,position:"fixed"}),x.bind(window,"resize",a),a()):(this.renderer.setSize(a.width,a.height),this.width=a.width,this.height=a.height);this.scene=new f.Group;this.renderer.add(this.scene);f.Instances.push(this)};_.extend(f,{Array:e.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.2.1",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",
remove:"remove",insert:"insert"},Resolution:8,Instances:[],noConflict:function(){e.Two=j;return this},Utils:{Curve:{CollinearityEpsilon:n(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:0.25,angle:0,epsilon:0.01}},setPlaying:function(a){_.defer(_.bind(function(){this.playing=!!a},this))},getComputedMatrix:function(a){for(var b=new f.Matrix;a&&a._matrix;){var d=a._matrix.elements;b.multiply(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9]);a=a.parent}return b},applySvgAttributes:function(a,
b){b.cap="butt";b.join="bevel";_.each(a.attributes,function(a){switch(a.nodeName){case "visibility":b.visible=!!a.nodeValue;break;case "stroke-linecap":b.cap=a.nodeValue;break;case "stroke-linejoin":b.join=a.nodeValue;break;case "stroke-miterlimit":b.miter=a.nodeValue;break;case "stroke-width":b.linewidth=parseFloat(a.nodeValue);break;case "stroke-opacity":case "fill-opacity":b.opacity=a.nodeValue;break;case "fill":b.fill=a.nodeValue;break;case "stroke":b.stroke=a.nodeValue}});return b},read:{svg:function(){return f.Utils.read.g.apply(this,
arguments)},g:function(a){var b=new f.Group;this.add(b);_.each(a.childNodes,function(a){if(a.localName){var c=a.localName.toLowerCase();c in f.Utils.read&&(a=f.Utils.read[c].call(this,a),b.add(a))}},this);return f.Utils.applySvgAttributes(a,b)},polygon:function(a,b){var d=a.points;if(d){var c=_.map(_.range(d.numberOfItems),function(a){a=d.getItem(a);return new f.Vector(a.x,a.y)}),c=(new f.Polygon(c,!b)).noStroke();return f.Utils.applySvgAttributes(a,c)}},polyline:function(a){return f.Utils.read.polygon(a,
!0)},path:function(a){var b=a.getAttribute("d"),b=_.flatten(_.map(_.compact(b.split(/M/g)),function(a){a=_.map(_.compact(a.split(/m/g)),function(a,d){return 0>=d?a:"m"+a});a[0]="M"+a[0];return a})),d=new f.Vector,c=new f.Vector;return _.map(b,function(b){var h,e=!1,k=!1;b=_.flatten(_.map(b.match(/[a-z][^a-z]*/ig),function(a){var b,r,l=a[0],t=l.toLowerCase();h=a.slice(1).trim().split(/[\s,]+|(?=[+\-])/);e=l===t;var n,q,g;switch(t){case "z":k=!0;break;case "m":case "l":r=parseFloat(h[0]);b=parseFloat(h[1]);
b=new f.Vector(r,b);e&&b.addSelf(d);d.copy(b);break;case "h":case "v":r="h"===t?"x":"y";a="x"===r?"y":"x";b=new f.Vector;b[r]=parseFloat(h[0]);b[a]=d[a];e&&(b[r]+=d[r]);d.copy(b);break;case "s":case "c":b=d.x;a=d.y;"c"===t?(l=parseFloat(h[0]),r=parseFloat(h[1]),t=parseFloat(h[2]),n=parseFloat(h[3]),q=parseFloat(h[4]),g=parseFloat(h[5])):(n=(new f.Vector).copy(d).subSelf(c),l=parseFloat(n.x),r=parseFloat(n.y),t=parseFloat(h[0]),n=parseFloat(h[1]),q=parseFloat(h[2]),g=parseFloat(h[3]));e&&(l+=b,r+=
a,t+=b,n+=a,q+=b,g+=a);b=f.Utils.subdivide(b,a,l,r,t,n,q,g);d.set(q,g);c.set(t,n);break;case "t":case "q":b=d.x;a=d.y;c.isZero()?(l=b,r=a):(l=c.x,a=c.y);"q"===t?(t=parseFloat(h[0]),n=parseFloat(h[1]),q=parseFloat(h[1]),g=parseFloat(h[2])):(n=(new f.Vector).copy(d).subSelf(c),t=parseFloat(n.x),n=parseFloat(n.y),q=parseFloat(h[0]),g=parseFloat(h[1]));e&&(l+=b,r+=a,t+=b,n+=a,q+=b,g+=a);b=f.Utils.subdivide(b,a,l,r,t,n,q,g);d.set(q,g);c.set(t,n);break;case "a":throw new f.Utils.Error("not yet able to interpret Elliptical Arcs.");
}return b}));_.isUndefined(b[b.length-1])&&b.pop();b=(new f.Polygon(b,k)).noStroke();return f.Utils.applySvgAttributes(a,b)})},circle:function(b){var c=parseFloat(b.getAttribute("cx")),d=parseFloat(b.getAttribute("cy")),h=parseFloat(b.getAttribute("r")),e=f.Resolution,l=_.map(_.range(e),function(b){var d=b/e*a;b=h*k(d);d=h*m(d);return new f.Vector(b,d)},this),l=(new f.Polygon(l,!0,!0)).noStroke();l.translation.set(c,d);return f.Utils.applySvgAttributes(b,l)},ellipse:function(b){var c=parseFloat(b.getAttribute("cx")),
d=parseFloat(b.getAttribute("cy")),h=parseFloat(b.getAttribute("rx")),e=parseFloat(b.getAttribute("ry")),l=f.Resolution,n=_.map(_.range(l),function(b){var d=b/l*a;b=h*k(d);d=e*m(d);return new f.Vector(b,d)},this),n=(new f.Polygon(n,!0,!0)).noStroke();n.translation.set(c,d);return f.Utils.applySvgAttributes(b,n)},rect:function(a){var b=parseFloat(a.getAttribute("x")),d=parseFloat(a.getAttribute("y")),c=parseFloat(a.getAttribute("width")),h=parseFloat(a.getAttribute("height")),c=c/2,h=h/2,e=[new f.Vector(c,
h),new f.Vector(-c,h),new f.Vector(-c,-h),new f.Vector(c,-h)],e=(new f.Polygon(e,!0)).noStroke();e.translation.set(b+c,d+h);return f.Utils.applySvgAttributes(a,e)},line:function(a){var b=parseFloat(a.getAttribute("x1")),d=parseFloat(a.getAttribute("y1")),c=parseFloat(a.getAttribute("x2")),h=parseFloat(a.getAttribute("y2")),c=(c-b)/2,h=(h-d)/2,e=[new f.Vector(-c,-h),new f.Vector(c,h)],e=(new f.Polygon(e)).noFill();e.translation.set(b+c,d+h);return f.Utils.applySvgAttributes(a,e)}},subdivide:function(b,
e,d,l,k,n,x,j,y){var m=f.Utils.Curve.CollinearityEpsilon,C=f.Utils.Curve.RecursionLimit,s=f.Utils.Curve.CuspLimit,u=f.Utils.Curve.Tolerance,p;y=y||0;if(y>C)return[];var C=(b+d)/2,v=(e+l)/2,g=(d+k)/2,J=(l+n)/2,P=(k+x)/2,Q=(n+j)/2,R=(C+g)/2,S=(v+J)/2,g=(g+P)/2,J=(J+Q)/2,D=(R+g)/2,E=(S+J)/2;p=x-b;var A=j-e,H=h((d-x)*A-(l-j)*p),I=h((k-x)*A-(n-j)*p);if(0<y){if(H>m&&I>m&&(H+I)*(H+I)<=u.distance*(p*p+A*A)){if(u.angle<u.epsilon)return[new f.Vector(D,E)];p=c(n-l,k-d);m=h(p-c(l-e,d-b));p=h(c(j-n,x-k)-p);m>=
q&&(m=a-m);p>=q&&(p=a-p);if(m+p<u.angle)return[new f.Vector(D,E)];if(0!==s){if(m>s)return[new f.Vector(d,l)];if(p>s)return[new f.Vector(k,n)]}}}else if(H>m)if(H*H<=u.distance*(p*p+A*A)){if(u.angle<u.epsilon)return[new f.Vector(D,E)];m=h(c(n-l,k-d)-c(l-e,d-b));m>=q&&(m=a-m);if(m<u.angle)return[new f.Vector(d,l),new f.Vector(k,n)];if(0!==s&&m>s)return[new f.Vector(d,l)]}else if(I>m){if(I*I<=u.distance*(p*p+A*A)){if(u.angle<u.epsilon)return[new f.Vector(D,E)];m=h(c(j-n,x-k)-c(n-l,k-d));m>=q&&(m=a-m);
if(m<u.angle)return[new f.Vector(d,l),new f.Vector(k,n)];if(0!==s&&m>s)return[new f.Vector2(k,n)]}}else if(p=D-(b+x)/2,A=E-(e+j)/2,p*p+A*A<=u.distance)return[new f.Vector(D,E)];return f.Utils.subdivide(b,e,C,v,R,S,D,E,y+1).concat(f.Utils.subdivide(D,E,g,J,P,Q,x,j,y+1))},getCurveFromPoints:function(a,b){for(var d=[],f=a.length,c=f-1,h=0;h<f;h++){var e=a[h],l={x:e.x,y:e.y};d.push(l);var e=b?v(h-1,f):Math.max(h-1,0),k=b?v(h+1,f):Math.min(h+1,c);s(a[e],l,a[k]);!l.u.x&&!l.u.y&&(l.u.x=l.x,l.u.y=l.y);!l.v.x&&
!l.v.y&&(l.v.x=l.x,l.v.y=l.y)}return d},getControlPoints:function(a,b,d){var f=u(a,b),c=u(d,b);a=y(a,b);d=y(d,b);var h=(f+c)/2;if(1E-4>a||1E-4>d)return b.u={x:b.x,y:b.y},b.v={x:b.x,y:b.y},b;a*=0.33;d*=0.33;h=c<f?h+l:h-l;f={x:b.x+k(h)*a,y:b.y+m(h)*a};h-=q;c={x:b.x+k(h)*d,y:b.y+m(h)*d};b.u=f;b.v=c;return b},angleBetween:function(a,b){return c(a.y-b.y,a.x-b.x)},distanceBetweenSquared:function(a,b){var d=a.x-b.x,f=a.y-b.y;return d*d+f*f},distanceBetween:function(a,f){return b(C(a,f))},mod:function(a,
b){for(;0>a;)a+=b;return a%b},Collection:function(){Array.call(this);1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(a){this.name="two.js";this.message=a}}});f.Utils.Error.prototype=Error();f.Utils.Error.prototype.constructor=f.Utils.Error;f.Utils.Collection.prototype=[];f.Utils.Collection.constructor=f.Utils.Collection;_.extend(f.Utils.Collection.prototype,Backbone.Events,{pop:function(){var a=
Array.prototype.pop.apply(this,arguments);this.trigger(f.Events.remove,[a]);return a},shift:function(){var a=Array.prototype.shift.apply(this,arguments);this.trigger(f.Events.remove,[a]);return a},push:function(){var a=Array.prototype.push.apply(this,arguments);this.trigger(f.Events.insert,arguments);return a},unshift:function(){var a=Array.prototype.unshift.apply(this,arguments);this.trigger(f.Events.insert,arguments);return a},splice:function(){var a=Array.prototype.splice.apply(this,arguments),
b;this.trigger(f.Events.remove,a);2<arguments.length&&(b=this.slice(arguments[0],arguments.length-2),this.trigger(f.Events.insert,b));return a}});var y=f.Utils.distanceBetween,C=f.Utils.distanceBetweenSquared,u=f.Utils.angleBetween,s=f.Utils.getControlPoints,v=f.Utils.mod;_.extend(f.prototype,Backbone.Events,{appendTo:function(a){a.appendChild(this.renderer.domElement);return this},play:function(){f.Utils.setPlaying.call(this,!0);return this.trigger(f.Events.play)},pause:function(){this.playing=!1;
return this.trigger(f.Events.pause)},update:function(){_.defer(_.bind(function(){var a=!!this._lastFrame,b=(window.performance&&window.performance.now?window.performance:Date).now();this.frameCount++;a&&(this.timeDelta=parseFloat((b-this._lastFrame).toFixed(3)));this._lastFrame=b;var a=this.width,b=this.height,d=this.renderer;(a!==d.width||b!==d.height)&&d.setSize(a,b);this.trigger(f.Events.update,this.frameCount,this.timeDelta);this.render()},this));return this},render:function(){this.renderer.render();
return this.trigger(f.Events.render,this.frameCount)},add:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));this.scene.add(b);return this},remove:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));this.scene.remove(b);return this},clear:function(){_.each(this.scene.children,function(a){a.remove()});return this},makeLine:function(a,b,d,c){d=(d-a)/2;c=(c-b)/2;var h=[new f.Vector(-d,-c),new f.Vector(d,c)],h=(new f.Polygon(h)).noFill();h.translation.set(a+d,b+c);this.scene.add(h);return h},
makeRectangle:function(a,b,d,c){d/=2;c/=2;c=[new f.Vector(d,c),new f.Vector(-d,c),new f.Vector(-d,-c),new f.Vector(d,-c)];c=new f.Polygon(c,!0);c.translation.set(a,b);this.scene.add(c);return c},makeCircle:function(a,b,d){return this.makeEllipse(a,b,d,d)},makeEllipse:function(b,c,d,h){var e=f.Resolution,l=_.map(_.range(e),function(b){var c=b/e*a;b=d*k(c);c=h*m(c);return new f.Vector(b,c)},this),l=new f.Polygon(l,!0,!0);l.translation.set(b,c);this.scene.add(l);return l},makeCurve:function(a){var b=
arguments.length,d=a;if(!_.isArray(a))for(var d=[],c=0;c<b;c+=2){var h=arguments[c];if(!_.isNumber(h))break;d.push(new f.Vector(h,arguments[c+1]))}var b=arguments[b-1],d=new f.Polygon(d,!(_.isBoolean(b)&&b),!0),b=d.getBoundingClientRect(),l=b.left+b.width/2,e=b.top+b.height/2;_.each(d.vertices,function(a){a.x-=l;a.y-=e});d.translation.set(l,e);this.scene.add(d);return d},makePolygon:function(a){var b=arguments.length,d=a;if(!_.isArray(a))for(var d=[],c=0;c<b;c+=2){var h=arguments[c];if(!_.isNumber(h))break;
d.push(new f.Vector(h,arguments[c+1]))}b=arguments[b-1];d=new f.Polygon(d,!(_.isBoolean(b)&&b));b=d.getBoundingClientRect();d.center().translation.set(b.left+b.width/2,b.top+b.height/2);this.scene.add(d);return d},makeGroup:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));var d=new f.Group;this.scene.add(d);d.add(b);return d},interpret:function(a){var b=a.tagName.toLowerCase();if(!(b in f.Utils.read))return null;a=f.Utils.read[b].call(this,a);this.add(a);return a}});(function(){_.each(f.Instances,
function(a){a.playing&&a.update()});requestAnimationFrame(arguments.callee)})();"function"===typeof define&&define.amd?define(function(){return f}):"undefined"!=typeof module&&module.exports&&(module.exports=f)})();(function(){var p=Two.Vector=function(e,j){this.x=e||0;this.y=j||0};_.extend(p,{MakeGetterSetter:function(e,j,m){var k="_"+j;Object.defineProperty(e,j,{get:function(){return this[k]},set:function(c){this[k]=c;this.trigger(Two.Events.change,j)}});e[k]=m}});_.extend(p.prototype,Backbone.Events,{set:function(e,j){if(this._bound)return this._x=e,this._y=j,this.trigger(Two.Events.change);this.x=e;this.y=j;return this},copy:function(e){if(this._bound)return this._x=e.x,this._y=e.y,this.trigger(Two.Events.change);
this.x=e.x;this.y=e.y;return this},clear:function(){if(this._bound)return this._y=this._x=0,this.trigger(Two.Events.change);this.y=this.x=0;return this},clone:function(){return new p(this.x,this.y)},add:function(e,j){if(this._bound)return this._x=e.x+j.x,this._y=e.y+j.y,this.trigger(Two.Events.change);this.x=e.x+j.x;this.y=e.y+j.y;return this},addSelf:function(e){if(this._bound)return this._x+=e.x,this._y+=e.y,this.trigger(Two.Events.change);this.x+=e.x;this.y+=e.y;return this},sub:function(e,j){if(this._bound)return this._x=
e.x-j.x,this._y=e.y-j.y,this.trigger(Two.Events.change);this.x=e.x-j.x;this.y=e.y-j.y;return this},subSelf:function(e){if(this._bound)return this._x-=e.x,this._y-=e.y,this.trigger(Two.Events.change);this.x-=e.x;this.y-=e.y;return this},multiplySelf:function(e){if(this._bound)return this._x*=e.x,this._y*=e.y,this.trigger(Two.Events.change);this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){if(this._bound)return this._x*=e,this._y*=e,this.trigger(Two.Events.change);this.x*=e;this.y*=e;
return this},divideScalar:function(e){if(e){if(this._bound)return this._x/=e,this._y/=e,this.trigger(Two.Events.change);this.x/=e;this.y/=e}else this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this._bound?this._x*e.x+this._y*e.y:this.x*e.x+this.y*e.y},lengthSquared:function(){return this._bound?this._x*this._x+this._y*this._y:this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},
distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var j;this._bound?(j=this._x-e.x,e=this._y-e.y):(j=this.x-e.x,e=this.y-e.y);return j*j+e*e},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return 1E-4>this.distanceTo(e)},lerp:function(e,j){var m,k;this._bound?(m=(e.x-this._x)*j+this._x,k=(e.y-this._y)*j+this._y):(m=(e.x-this.x)*j+this.x,k=(e.y-this.y)*j+this.y);return this.set(m,k)},isZero:function(){return 1E-4>
this.length()}});Two.Vector.prototype.bind=Two.Vector.prototype.on=function(){this._bound||(Two.Vector.MakeGetterSetter(this,"x",this.x),Two.Vector.MakeGetterSetter(this,"y",this.y),this._bound=!0);Backbone.Events.bind.apply(this,arguments);return this}})();(function(){_.range(6);var p=Math.cos,e=Math.sin,j=Math.tan,m=Two.Matrix=function(e,c,b,h,q,a){this.elements=new Two.Array(9);var l=e;_.isArray(l)||(l=_.toArray(arguments));this.identity().set(l)};_.extend(m,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(e,c){if(3>=c.length){var b=c[0]||0,h=c[1]||0,q=c[2]||0;return{x:e[0]*b+e[1]*h+e[2]*q,y:e[3]*b+e[4]*h+e[5]*q,z:e[6]*b+e[7]*h+e[8]*q}}var b=e[0],h=e[1],q=e[2],a=e[3],l=e[4],n=e[5],x=e[6],f=e[7],j=e[8],m=c[0],p=c[1],s=c[2],v=c[3],r=c[4],t=c[5],d=c[6],
w=c[7],z=c[8];return[b*m+h*v+q*d,b*p+h*r+q*w,b*s+h*t+q*z,a*m+l*v+n*d,a*p+l*r+n*w,a*s+l*t+n*z,x*m+f*v+j*d,x*p+f*r+j*w,x*s+f*t+j*z]}});_.extend(m.prototype,Backbone.Events,{set:function(e,c,b,h,q,a){var l=e;_.isArray(l)||(l=_.toArray(arguments));_.each(l,function(a,b){_.isNumber(a)&&(this.elements[b]=a)},this);return this.trigger(Two.Events.change)},identity:function(){this.set(m.Identity);return this},multiply:function(e,c,b,h,q,a,l,n,x){var f=arguments,j=f.length;if(1>=j)return _.each(this.elements,
function(a,b){this.elements[b]=a*e},this),this.trigger(Two.Events.change);if(3>=j)return e=e||0,c=c||0,b=b||0,q=this.elements,{x:q[0]*e+q[1]*c+q[2]*b,y:q[3]*e+q[4]*c+q[5]*b,z:q[6]*e+q[7]*c+q[8]*b};j=this.elements;A0=j[0];A1=j[1];A2=j[2];A3=j[3];A4=j[4];A5=j[5];A6=j[6];A7=j[7];A8=j[8];B0=f[0];B1=f[1];B2=f[2];B3=f[3];B4=f[4];B5=f[5];B6=f[6];B7=f[7];B8=f[8];this.elements[0]=A0*B0+A1*B3+A2*B6;this.elements[1]=A0*B1+A1*B4+A2*B7;this.elements[2]=A0*B2+A1*B5+A2*B8;this.elements[3]=A3*B0+A4*B3+A5*B6;this.elements[4]=
A3*B1+A4*B4+A5*B7;this.elements[5]=A3*B2+A4*B5+A5*B8;this.elements[6]=A6*B0+A7*B3+A8*B6;this.elements[7]=A6*B1+A7*B4+A8*B7;this.elements[8]=A6*B2+A7*B5+A8*B8;return this.trigger(Two.Events.change)},inverse:function(e){var c=this.elements;e=e||new Two.Matrix;var b=c[0],h=c[1],q=c[2],a=c[3],l=c[4],n=c[5],j=c[6],f=c[7],c=c[8],m=c*l-n*f,p=-c*a+n*j,u=f*a-l*j,s=b*m+h*p+q*u;if(!s)return null;s=1/s;e.elements[0]=m*s;e.elements[1]=(-c*h+q*f)*s;e.elements[2]=(n*h-q*l)*s;e.elements[3]=p*s;e.elements[4]=(c*b-
q*j)*s;e.elements[5]=(-n*b+q*a)*s;e.elements[6]=u*s;e.elements[7]=(-f*b+h*j)*s;e.elements[8]=(l*b-h*a)*s;return e},scale:function(e,c){1>=arguments.length&&(c=e);return this.multiply(e,0,0,0,c,0,0,0,1)},rotate:function(k){var c=p(k);k=e(k);return this.multiply(c,-k,0,k,c,0,0,0,1)},translate:function(e,c){return this.multiply(1,0,e,0,1,c,0,0,1)},skewX:function(e){e=j(e);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(e){e=j(e);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(){return this.toArray().join(" ")},
toArray:function(e){var c=this.elements,b=parseFloat(c[0].toFixed(3)),h=parseFloat(c[1].toFixed(3)),q=parseFloat(c[2].toFixed(3)),a=parseFloat(c[3].toFixed(3)),l=parseFloat(c[4].toFixed(3)),n=parseFloat(c[5].toFixed(3));if(e){e=parseFloat(c[6].toFixed(3));var j=parseFloat(c[7].toFixed(3)),c=parseFloat(c[8].toFixed(3));return[b,a,e,h,l,j,q,n,c]}return[b,a,h,l,q,n]},clone:function(){return new Two.Matrix(this.elements[0],this.elements[1],this.elements[2],this.elements[3],this.elements[4],this.elements[5],
this.elements[6],this.elements[7],this.elements[8])}})})();(function(){function p(c){var b={},e=c.id,q=c.translation,a=c.rotation,l=c.scale,n=c.stroke,j=c.linewidth,f=c.fill,y=c.opacity,p=c.visible,u=c.cap,s=c.join,v=c.miter,r=c.curved,t=c.closed,d=c.vertices;e&&(b.id=k.Identifier+e);q&&(_.isNumber(l)&&_.isNumber(a))&&(b.transform="matrix("+c._matrix.toString()+")");n&&(b.stroke=n);f&&(b.fill=f);y&&(b["stroke-opacity"]=b["fill-opacity"]=y);b.visibility=p?"visible":"hidden";u&&(b["stroke-linecap"]=u);s&&(b["stroke-linejoin"]=s);v&&(b["stroke-miterlimit"]=
v);j&&(b["stroke-width"]=j);d&&(b.d=m.toString(d,t,r));return b}var e=Two.Utils.getCurveFromPoints,j=Two.Utils.mod,m={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(c,b){var e=document.createElementNS(this.ns,c);"svg"===c&&(b=_.defaults(b||{},{version:this.version}));_.isObject(b)&&this.setAttributes(e,b);return e},setAttributes:function(c,b){_.each(b,function(b,c){this.setAttribute(c,b)},c);return this},removeAttributes:function(c,b){_.each(b,
function(b){this.removeAttribute(b)},c);return this},toString:function(c,b,h){var k=c.length,a=k-1;if(!h)return _.map(c,function(c,e){var f;f=(0>=e?"M":"L")+(" "+c.x.toFixed(3)+" "+c.y.toFixed(3));e>=a&&b&&(f+=" Z");return f}).join(" ");var l=e(c,b);return _.map(l,function(c,e){var f,h=b?j(e-1,k):Math.max(e-1,0),m=b?j(e+1,k):Math.min(e+1,a);f=l[h];var m=l[m],h=f.v.x.toFixed(3),p=f.v.y.toFixed(3),s=c.u.x.toFixed(3),v=c.u.y.toFixed(3),r=c.x.toFixed(3),t=c.y.toFixed(3);f=0>=e?"M "+r+" "+t:"C "+h+" "+
p+" "+s+" "+v+" "+r+" "+t;e>=a&&b&&(h=c.v.x.toFixed(3),p=c.v.y.toFixed(3),s=m.u.x.toFixed(3),v=m.u.y.toFixed(3),r=m.x.toFixed(3),t=m.y.toFixed(3),f=f+(" C "+h+" "+p+" "+s+" "+v+" "+r+" "+t)+" Z");return f}).join(" ")}},k=Two[Two.Types.svg]=function(){this.count=0;this.domElement=m.createElement("svg");this.elements=[];this.domElement.style.visibility="hidden";this.unveil=_.once(_.bind(function(){this.domElement.style.visibility="visible"},this))};_.extend(k,{Identifier:"two-",Utils:m});_.extend(k.prototype,
Backbone.Events,{setSize:function(c,b){this.width=c;this.height=b;m.setAttributes(this.domElement,{width:c,height:b});return this},add:function(c){var b=c,e=this.elements,k=this.domElement;_.isArray(c)||(b=_.map(arguments,function(a){return a}));_.each(b,function(a){var b;b=a instanceof Two.Group;if(_.isUndefined(a.id)){var c=this.count;this.count++;a.id=c}b?(b="g",_.isUndefined(a.parent)&&(a.parent=this,a.unbind(Two.Events.change).bind(Two.Events.change,_.bind(this.update,this))),a=p(a),delete a.stroke,
delete a.fill,delete a["fill-opacity"],delete a["stroke-opacity"],delete a["stroke-linecap"],delete a["stroke-linejoin"],delete a["stroke-miterlimit"],delete a["stroke-width"]):(b="path",a=p(a));a=m.createElement(b,a);k.appendChild(a);e.push(a)},this);return this},update:function(c,b,e,k,a){var l=this.elements,n=l[c];switch(b){case Two.Properties.hierarchy:_.each(e,function(a){n.appendChild(l[a])});break;case Two.Properties.demotion:_.each(e,function(a){n.removeChild(l[a])});break;default:a:{c=b;
switch(c){case "matrix":c="transform";e="matrix("+e.toString()+")";break;case "visible":c="visibility";e=e?"visible":"hidden";break;case "cap":c="stroke-linecap";break;case "join":c="stroke-linejoin";break;case "miter":c="stroke-miterlimit";break;case "linewidth":c="stroke-width";break;case "vertices":c="d";e=m.toString(e,k,a);break;case "opacity":m.setAttributes(n,{"stroke-opacity":e,"fill-opacity":e});break a}n.setAttribute(c,e)}}return this},render:function(){this.unveil();return this}})})();(function(){var p=Two.Utils.getCurveFromPoints,e=Two.Utils.mod,j=function(b){_.each(b,function(b,c){this[c]=b},this);this.children=[]};_.extend(j.prototype,{appendChild:function(b){var c=b.parent;_.isUndefined(c)||c.removeChild(b);this.children.push(b);b.parent=this;return this},removeChild:function(b){b=_.indexOf(this.children,b);return 0>b?this:this.children.splice(b,1)[0]},render:function(b){var c=this.matrix;b.save();b.transform(c[0],c[1],c[2],c[3],c[4],c[5]);_.each(this.children,function(c){c.render(b)});
b.restore();return this}});var m=function(b){_.each(b,function(b,c){this[c]=b},this)};_.extend(m.prototype,{render:function(b){var c=this.matrix,k=this.stroke,a=this.linewidth,l=this.fill,n=this.opacity,j=this.cap,f=this.join,m=this.miter,p=this.curved,u=this.closed,s=this.commands,v=s.length,r=v-1;if(!this.visible)return this;b.save();c&&b.transform(c[0],c[1],c[2],c[3],c[4],c[5]);l&&(b.fillStyle=l);k&&(b.strokeStyle=k);a&&(b.lineWidth=a);m&&(b.miterLimit=m);f&&(b.lineJoin=f);j&&(b.lineCap=j);_.isNumber(n)&&
(b.globalAlpha=n);b.beginPath();_.each(s,function(a,d){var c=a.x.toFixed(3),f=a.y.toFixed(3);if(p){var h=u?e(d-1,v):Math.max(d-1,0),l=u?e(d+1,v):Math.min(d+1,r),k=s[h],l=s[l],h=k.v.x.toFixed(3),k=k.v.y.toFixed(3),n=a.u.x.toFixed(3),j=a.u.y.toFixed(3);0>=d?b.moveTo(c,f):(b.bezierCurveTo(h,k,n,j,c,f),d>=r&&u&&(h=a.v.x.toFixed(3),k=a.v.y.toFixed(3),n=l.u.x.toFixed(3),j=l.u.y.toFixed(3),c=l.x.toFixed(3),f=l.y.toFixed(3),b.bezierCurveTo(h,k,n,j,c,f)))}else 0>=d?b.moveTo(c,f):b.lineTo(c,f)});u&&!p&&b.closePath();
b.fill();b.stroke();b.restore()}});var k={devicePixelRatio:this.devicePixelRatio||1,getBackingStoreRatio:function(b){return b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1},getRatio:function(b){return this.devicePixelRatio/this.getBackingStoreRatio(b)},toArray:function(b,c,e){return!c?_.map(b,function(a){return{x:a.x,y:a.y}}):p(b,e)}},c=Two[Two.Types.canvas]=function(){this.count=0;this.domElement=document.createElement("canvas");
this.ctx=this.domElement.getContext("2d");this.overdraw=!1;this.elements=[];this.stage=null};_.extend(c,{Group:j,Element:m,getStyles:function(b){var c={},e=b.id,a=b._matrix,l=b.stroke,n=b.linewidth,j=b.fill,f=b.opacity,m=b.visible,p=b.cap,u=b.join,s=b.miter,v=b.curved,r=b.closed;b=b.vertices;e&&(c.id=e);_.isObject(a)&&(c.matrix=a.toArray());l&&(c.stroke=l);j&&(c.fill=j);_.isNumber(f)&&(c.opacity=f);p&&(c.cap=p);u&&(c.join=u);s&&(c.miter=s);n&&(c.linewidth=n);b&&(c.commands=k.toArray(b,v,r));c.visible=
!!m;c.curved=!!v;c.closed=!!r;return c},setStyles:function(b,c,e,a,l){switch(c){case "matrix":c="matrix";e=e.toArray();break;case "vertices":c="commands",b.curved=l,b.closed=a,e=k.toArray(e,b.curved,b.closed)}b[c]=e},Utils:k});_.extend(c.prototype,Backbone.Events,{setSize:function(b,c,e){this.width=b;this.height=c;this.ratio=_.isUndefined(e)?k.getRatio(this.ctx):e;this.domElement.width=b*this.ratio;this.domElement.height=c*this.ratio;_.extend(this.domElement.style,{width:b+"px",height:c+"px"});return this},
add:function(b){constructor=Object.getPrototypeOf(this).constructor;var c=b,e=this.elements,a=constructor.Group,l=constructor.Element,k=constructor.getStyles;_.isArray(b)||(c=_.map(arguments,function(a){return a}));_.each(c,function(b){var c;c=b instanceof Two.Group;var h=_.isNull(this.stage);if(_.isUndefined(b.id)){var j=this.count;this.count++;b.id=j}c?(c=k.call(this,b),delete c.stroke,delete c.fill,delete c.opacity,delete c.cap,delete c.join,delete c.miter,delete c.linewidth,c=new a(c),h&&(this.stage=
c,this.stage.object=b,b.parent=this,b.unbind(Two.Events.change).bind(Two.Events.change,_.bind(this.update,this)))):c=new l(k.call(this,b));e.push(c);h||this.stage.appendChild(c)},this);return this},update:function(b,c,e,a,l,k){var j=Object.getPrototypeOf(this).constructor,f=this.elements,m=f[b];switch(c){case Two.Properties.hierarchy:_.each(e,function(a){m.appendChild(f[a])});break;case Two.Properties.demotion:_.each(e,function(a){m.removeChild(f[a]);this.elements[a]=null},this);break;default:j.setStyles.call(this,
m,c,e,a,l,k)}return this},render:function(){if(_.isNull(this.stage))return this;1!==this.ratio&&(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio));this.overdraw||this.ctx.clearRect(0,0,this.width,this.height);this.stage.render(this.ctx);1!==this.ratio&&this.ctx.restore();return this}})})();(function(){function p(a,b){var c=Math.min(a.top,b.top),e=Math.min(a.left,b.left),f=Math.max(a.right,b.right),h=Math.max(a.bottom,b.bottom);return{top:c,left:e,right:f,bottom:h,width:f-e,height:h-c,centroid:{x:-e,y:-c}}}var e=Two[Two.Types.canvas],j=Two.Matrix.Multiply,m=Two[Two.Types.canvas].Utils.toArray,k=Two.Utils.mod,c=function(a){e.Group.call(this,a)};_.extend(c.prototype,e.Group.prototype,{appendChild:function(){e.Group.prototype.appendChild.apply(this,arguments);this.updateMatrix();return this},
updateTexture:function(a){_.each(this.children,function(b){b.updateTexture(a)});return this},updateMatrix:function(a){var b=a&&a._matrix||this.parent&&this.parent._matrix;a=a&&a._scale||this.parent&&this.parent._scale;if(!b)return this;this._matrix=j(this.matrix,b);this._scale=this.scale*a;_.each(this.children,function(a){a.updateMatrix(this)},this);return this},render:function(a,b){_.each(this.children,function(c){c.render(a,b)})}});var b=function(a){e.Element.call(this,a)};_.extend(b.prototype,
e.Element.prototype,{updateMatrix:function(a){var b=a&&a._matrix||this.parent&&this.parent._matrix;a=a&&a._scale||this.parent&&this.parent._scale;if(!b)return this;this._matrix=j(this.matrix,b);this._scale=this.scale*a;return this},updateTexture:function(a){h.updateTexture(a,this);return this},render:function(a,b){if(!this.visible||!this.opacity||!this.buffer)return this;a.bindBuffer(a.ARRAY_BUFFER,this.textureCoordsBuffer);a.vertexAttribPointer(b.textureCoords,2,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,
this.texture);a.uniformMatrix3fv(b.matrix,!1,this._matrix);a.bindBuffer(a.ARRAY_BUFFER,this.buffer);a.vertexAttribPointer(b.position,2,a.FLOAT,!1,0,0);a.drawArrays(a.TRIANGLES,0,6);return this}});var h={canvas:document.createElement("canvas"),uv:new Two.Array([0,0,1,0,0,1,0,1,1,0,1,1]),getBoundingClientRect:function(a,b,c){var e=Infinity,f=-Infinity,h=Infinity,k=-Infinity;_.each(a,function(a){var b=a.x,l=a.y,j;h=Math.min(l,h);e=Math.min(b,e);f=Math.max(b,f);k=Math.max(l,k);c&&(b=a.u.x,l=a.u.y,j=a.v.x,
a=a.v.y,h=Math.min(l,a,h),e=Math.min(b,j,e),f=Math.max(b,j,f),k=Math.max(l,a,k))});_.isNumber(b)&&(h-=b,e-=b,f+=b,k+=b);return{top:h,left:e,right:f,bottom:k,width:f-e,height:k-h,centroid:{x:-e,y:-h}}},getTriangles:function(a){var b=a.top,c=a.left,e=a.right;a=a.bottom;return new Two.Array([c,b,e,b,c,a,c,a,e,b,e,a])},updateCanvas:function(a){var b=a.commands,c=this.canvas,e=this.ctx,f=a._scale,h=a.stroke,j=a.linewidth*f,m=a.fill,q=a.opacity,p=a.cap,r=a.join,t=a.miter,d=a.curved,w=a.closed,z=b.length,
K=z-1;c.width=Math.max(Math.ceil(a.rect.width*f),1);c.height=Math.max(Math.ceil(a.rect.height*f),1);a=a.rect.centroid;var F=a.x*f,B=a.y*f;e.clearRect(0,0,c.width,c.height);m&&(e.fillStyle=m);h&&(e.strokeStyle=h);j&&(e.lineWidth=j);t&&(e.miterLimit=t);r&&(e.lineJoin=r);p&&(e.lineCap=p);_.isNumber(q)&&(e.globalAlpha=q);e.beginPath();_.each(b,function(a,c){var h=(a.x*f+F).toFixed(3),j=(a.y*f+B).toFixed(3);if(d){var n=w?k(c-1,z):Math.max(c-1,0),m=w?k(c+1,z):Math.min(c+1,K),q=b[n],m=b[m],n=(q.v.x*f+F).toFixed(3),
q=(q.v.y*f+B).toFixed(3),g=(a.u.x*f+F).toFixed(3),p=(a.u.y*f+B).toFixed(3);0>=c?e.moveTo(h,j):(e.bezierCurveTo(n,q,g,p,h,j),c>=K&&w&&(n=(a.v.x*f+F).toFixed(3),q=(a.v.y*f+B).toFixed(3),g=(m.u.x*f+F).toFixed(3),p=(m.u.y*f+B).toFixed(3),h=(m.x*f+F).toFixed(3),j=(m.y*f+B).toFixed(3),e.bezierCurveTo(n,q,g,p,h,j)))}else 0>=c?e.moveTo(h,j):e.lineTo(h,j)});w&&!d&&e.closePath();e.fill();e.stroke()},updateTexture:function(a,b){this.updateCanvas(b);b.texture&&a.deleteTexture(b.texture);a.bindBuffer(a.ARRAY_BUFFER,
b.textureCoordsBuffer);b.texture=a.createTexture();a.bindTexture(a.TEXTURE_2D,b.texture);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);0>=this.canvas.width||0>=this.canvas.height||a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(a,b,c){_.isObject(b.buffer)&&a.deleteBuffer(b.buffer);b.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,
b.buffer);a.enableVertexAttribArray(c.position);a.bufferData(a.ARRAY_BUFFER,b.triangles,a.STATIC_DRAW);_.isObject(b.textureCoordsBuffer)&&a.deleteBuffer(b.textureCoordsBuffer);b.textureCoordsBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b.textureCoordsBuffer);a.enableVertexAttribArray(c.textureCoords);a.bufferData(a.ARRAY_BUFFER,this.uv,a.STATIC_DRAW)},program:{create:function(a,b){var c=a.createProgram();_.each(b,function(b){a.attachShader(c,b)});a.linkProgram(c);if(!a.getProgramParameter(c,
a.LINK_STATUS))throw error=a.getProgramInfoLog(c),a.deleteProgram(c),new Two.Utils.Error("unable to link program: "+error);return c}},shaders:{create:function(a,b,c){c=a.createShader(a[c]);a.shaderSource(c,b);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS))throw b=a.getShaderInfoLog(c),a.deleteShader(c),new Two.Utils.Error("unable to compile shader "+c+": "+b);return c},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",
fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"}};h.ctx=h.canvas.getContext("2d");var q=Two[Two.Types.webgl]=function(a){this.count=0;this.domElement=document.createElement("canvas");this.elements=[];this.stage=null;a=_.defaults(a||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!1});a=this.ctx=this.domElement.getContext("webgl",a)||this.domElement.getContext("experimental-webgl",
a);if(!this.ctx)throw new Two.Utils.Error("unable to create a webgl context. Try using another renderer.");var b=h.shaders.create(a,h.shaders.vertex,h.shaders.types.vertex),c=h.shaders.create(a,h.shaders.fragment,h.shaders.types.fragment);this.program=h.program.create(a,[b,c]);a.useProgram(this.program);this.program.position=a.getAttribLocation(this.program,"a_position");this.program.matrix=a.getUniformLocation(this.program,"u_matrix");this.program.textureCoords=a.getAttribLocation(this.program,"a_textureCoords");
a.disable(a.DEPTH_TEST);a.enable(a.BLEND);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)};_.extend(q,{Group:c,Element:b,getStyles:function(a){var c={},e=a.id,k=a._matrix,f=a.stroke,j=a.linewidth,q=a.fill,p=a.opacity,s=a.visible,v=a.cap,r=a.join,t=a.miter,d=a.curved,w=a.closed,z=a.vertices;e&&(c.id=e);_.isObject(k)&&(c.matrix=c._matrix=k.toArray(!0),c.scale=c._scale=1);f&&(c.stroke=f);q&&(c.fill=q);_.isNumber(p)&&(c.opacity=
p);v&&(c.cap=v);r&&(c.join=r);t&&(c.miter=t);j&&(c.linewidth=j);z&&(c.vertices=m(z,d,w),c.commands=c.vertices,c.rect=h.getBoundingClientRect(c.commands,c.linewidth,c.curved),c.triangles=h.getTriangles(c.rect));c.visible=!!s;c.curved=!!d;c.closed=!!w;a instanceof Two.Polygon&&(h.updateBuffer(this.ctx,c,this.program),b.prototype.updateTexture.call(c,this.ctx));return c},setStyles:function(a,b,c,e,f,k){var j=!1;/matrix/.test(b)?(a[b]=c.toArray(!0),_.isNumber(e)&&(j=a.scale!==e,a.scale=e),a.updateMatrix()):
/(stroke|fill|opacity|cap|join|miter|linewidth)/.test(b)?(a[b]=c,a.rect=p(h.getBoundingClientRect(a.commands,a.linewidth,a.curved),a.rect),a.triangles=h.getTriangles(a.rect),h.updateBuffer(this.ctx,a,this.program),j=!0):"vertices"===b?(_.isUndefined(e)||(a.closed=e),_.isUndefined(f)||(a.curved=f),k?a.commands=m(c,a.curved,a.closed):(a.vertices=m(c,a.curved,a.closed),a.commands=a.vertices),a.rect=p(h.getBoundingClientRect(a.vertices,a.linewidth,a.curved),a.rect),a.triangles=h.getTriangles(a.rect),
h.updateBuffer(this.ctx,a,this.program),j=!0):a[b]=c;j&&a.updateTexture(this.ctx)}});_.extend(q.prototype,Backbone.Events,e.prototype,{setSize:function(a,b){e.prototype.setSize.apply(this,arguments);this.ratio=1;this.domElement.width=a;this.domElement.height=b;this.ctx.viewport(0,0,a,b);var c=this.ctx.getUniformLocation(this.program,"u_resolution");this.ctx.uniform2f(c,a,b);return this},render:function(){if(_.isNull(this.stage))return this;this.stage.render(this.ctx,this.program);return this}})})();(function(){var p=Two.Shape=function(e){this._matrix=new Two.Matrix;var j=_.debounce(_.bind(function(){var e=this._matrix.identity().translate(this.translation.x,this.translation.y).scale(this.scale).rotate(this.rotation);this.trigger(Two.Events.change,this.id,"matrix",e,this.scale)},this),0);this._rotation=0;Object.defineProperty(this,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e;j()}});this._scale="scale";Object.defineProperty(this,"scale",{get:function(){return this._scale},
set:function(e){this._scale=e;j()}});this.translation=new Two.Vector;this.rotation=0;this.scale=1;this.translation.bind(Two.Events.change,j);if(e)return this;p.MakeGetterSetter(this,p.Properties);this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.join=this.cap="round";this.miter=1};_.extend(p,{Properties:"fill stroke linewidth opacity visible cap join miter".split(" "),MakeGetterSetter:function(e,j){_.isArray(j)||(j=[j]);_.each(j,function(j){var k="_"+j;Object.defineProperty(e,
j,{get:function(){return this[k]},set:function(c){this[k]=c;this.trigger(Two.Events.change,this.id,j,c,this)}})})}});_.extend(p.prototype,Backbone.Events,{addTo:function(e){e.add(this);return this},noFill:function(){this.fill="transparent";return this},noStroke:function(){this.stroke="transparent";return this},clone:function(){var e=new p;e.translation.copy(this.translation);_.each(p.Properties,function(j){e[j]=this[j]},this);return this}})})();(function(){var p=Two.Group=function(){Two.Shape.call(this,!0);delete this.stroke;delete this.fill;delete this.linewidth;delete this.opacity;delete this.cap;delete this.join;delete this.miter;p.MakeGetterSetter(this,Two.Shape.Properties);this.children={}};_.extend(p,{MakeGetterSetter:function(e,j){_.isArray(j)||(j=[j]);_.each(j,function(j){var k="_"+j;Object.defineProperty(e,j,{get:function(){return this[k]},set:function(c){this[k]=c;_.each(this.children,function(b){b[j]=c})}})})}});_.extend(p.prototype,
Two.Shape.prototype,{clone:function(e){e=e||this.parent;var j=_.map(this.children,function(j){return j.clone(e)}),m=new p;e.add(m);m.add(j);m.translation.copy(this.translation);m.rotation=this.rotation;m.scale=this.scale;return m},corner:function(){var e=this.getBoundingClientRect(!0),j={x:e.left,y:e.top};_.each(this.children,function(e){e.translation.subSelf(j)});return this},center:function(){var e=this.getBoundingClientRect(!0);e.centroid={x:e.left+e.width/2,y:e.top+e.height/2};_.each(this.children,
function(j){j.translation.subSelf(e.centroid)});return this},add:function(e){var j=e,m=this.children,k=this.parent,c=[];_.isArray(e)||(j=_.toArray(arguments));var b=_.bind(function(b,c,a,e,j,k){this.trigger(Two.Events.change,b,c,a,e,j,k)},this);_.each(j,function(e){if(e){var j=e.id,a=e.parent;_.isUndefined(j)&&(k.add(e),j=e.id);_.isUndefined(m[j])&&(a&&delete a.children[j],m[j]=e,e.parent=this,e.unbind(Two.Events.change).bind(Two.Events.change,b),c.push(j))}},this);0<c.length&&this.trigger(Two.Events.change,
this.id,Two.Properties.hierarchy,c);return this},remove:function(e){var j=e,m=this.children,k=this.parent,c=[];if(0>=arguments.length&&k)return k.remove(this),this;_.isArray(e)||(j=_.toArray(arguments));_.each(j,function(b){var e=b.id;e in m&&(delete m[e],delete b.parent,b.unbind(Two.Events.change),c.push(e))});0<c.length&&this.trigger(Two.Events.change,this.id,Two.Properties.demotion,c);return this},getBoundingClientRect:function(e){var j=Infinity,m=-Infinity,k=Infinity,c=-Infinity;_.each(this.children,
function(b){b=b.getBoundingClientRect(!0);k&&(j&&m&&c)&&(k=Math.min(b.top,k),j=Math.min(b.left,j),m=Math.max(b.right,m),c=Math.max(b.bottom,c))},this);var b=e?this._matrix:Two.Utils.getComputedMatrix(this);e=b.multiply(j,k,1);b=b.multiply(m,c,1);return{top:e.y,left:e.x,right:b.x,bottom:b.y,width:b.x-e.x,height:b.y-e.y}},noFill:function(){_.each(this.children,function(e){e.noFill()});return this},noStroke:function(){_.each(this.children,function(e){e.noStroke()});return this}})})();(function(){var p=Math.min,e=Math.max,j=Math.round,m=Two.Polygon=function(k,c,b){Two.Shape.call(this);c=!!c;b=!!b;var h=0,m=1,a=!1,l=!1,n,x=[],f=_.debounce(_.bind(function(){var e,f;if(a||l){e=n.length;f=e-1;e=j(h*f);f=j(m*f);for(x.length=0;e<f+1;e++)x.push(n[e])}this.trigger(Two.Events.change,this.id,"vertices",x,c,b,a);l=a=!1},this),0);Object.defineProperty(this,"closed",{get:function(){return c},set:function(a){c=!!a;f()}});Object.defineProperty(this,"curved",{get:function(){return b},set:function(a){b=
!!a;f()}});Object.defineProperty(this,"beginning",{get:function(){return h},set:function(b){h=p(e(b,0),1);a=!0;f()}});Object.defineProperty(this,"ending",{get:function(){return m},set:function(b){m=p(e(b,0),1);a=!0;f()}});Object.defineProperty(this,"vertices",{get:function(){return n},set:function(a){var b=_.bind(function(a){_.each(a,function(a){a.bind(Two.Events.change,f)},this);l=!0;f()},this),c=_.bind(function(a){_.each(a,function(a){a.unbind(Two.Events.change,f)},this);l=!0;f()},this);n&&n.unbind();
n=new Two.Utils.Collection(a.slice(0));n.bind(Two.Events.insert,b);n.bind(Two.Events.remove,c);l=!0;b(n)}});this.vertices=k};_.extend(m.prototype,Two.Shape.prototype,{clone:function(){var e=_.map(this.vertices,function(b){return new Two.Vector(b.x,b.y)}),c=new m(e,this.closed,this.curved);_.each(Two.Shape.Properties,function(b){c[b]=this[b]},this);c.translation.copy(this.translation);c.rotation=this.rotation;c.scale=this.scale;return c},corner:function(){var e=this.getBoundingClientRect(!0),c={x:e.left,
y:e.top};_.each(this.vertices,function(b){b.subSelf(c)});return this},center:function(){var e=this.getBoundingClientRect(!0);e.centroid={x:e.left+e.width/2,y:e.top+e.height/2};_.each(this.vertices,function(c){c.subSelf(e.centroid)});return this},remove:function(){if(!this.parent)return this;this.parent.remove(this);return this},getBoundingClientRect:function(e){var c=this.linewidth,b=Infinity,h=-Infinity,j=Infinity,a=-Infinity;_.each(this.vertices,function(c){var e=c.x;c=c.y;j=Math.min(c,j);b=Math.min(e,
b);h=Math.max(e,h);a=Math.max(c,a)});j-=c;b-=c;h+=c;a+=c;c=e?this._matrix:Two.Utils.getComputedMatrix(this);e=c.multiply(b,j,1);c=c.multiply(h,a,1);return{top:e.y,left:e.x,right:c.x,bottom:c.y,width:c.x-e.x,height:c.y-e.y}}})})();
